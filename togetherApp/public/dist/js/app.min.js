!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,r,i){var n=e(i.fileModel),o=n.assign;r.bind("change",function(){t.$apply(function(){o(t,r[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,r){var i=new FormData;i.append("file",t),e.post(r,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,r,i,n,o,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=r,this.number=i,this.description=n,this.dateFrom=o,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),r=function(r,i){t.on(r,function(){var r=arguments;e.$apply(function(){i.apply(t,r)})})},i=function(r,i,n){t.emit(r,i,function(){var r=arguments;e.$apply(function(){n.apply(t,r)})})};return{on:r,emit:i,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="http://localhost:3000/api/"+t;return e.get(r).then(function(e){return e.data})},r=function(t,r){var i="http://localhost:3000/api/"+t+"/"+r;return e.get(i).then(function(e){return e.data})},i=function(t,r){var i="http://localhost:3000/api/"+t+"/userdetail/"+r;return e.get(i).then(function(e){return e.data})},n=function(t,r){var i="http://localhost:3000/api/"+t+"/userdelete/"+r;return e.get(i).then(function(e){return e.data})},o=function(t){return e.get("/user").then(function(e){return e.data})},s=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydetail/"+r;return e.get(i).then(function(e){return e.data})},a=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydelete/"+r;return e.get(i).then(function(e){return e.data})},c=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:r,getItem:o,getDetailsUser:i,deleteUser:n,getDetailsActivity:s,getNoiseWords:c,deleteActivity:a}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(null),200==r.status){for(var i=JSON.parse(r.responseText),n=[],o=[],s=0;s<i.length;s++){var a={user:i[s].user,matches:i[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&o.push(n[c].matches)}var u=o[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,r,i,n,o,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var i=e.split(" "),n="";r.getNoiseWords().then(function(e){for(var r=e.noisewords,o=i.length;o--;)-1==a(i[o].toLowerCase(),r)&&(n+=i[o],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var r=e+"";r.length<2?(r="0"+r,e=r.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,r){l(e,function(t,r){e=r,t&&console.log(t)}),l(t,function(e,r){t=r,e&&console.log(e)}),e.isEmpty||t.isEmpty?r("No number.",null):r(null,e,t)}function h(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function f(e){for(var t=e[0],r=0,i=1;i<e.length;i++)e[i].matches.length>t.matches.length&&(r=i,t=e[i]);return r}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;m(t,e)}function m(e,r){var i=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,o=t.arrDetailsActivity.zipcode,s=i+" "+n+", "+o;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){r.setCenter(e[0].geometry.location);var i="../../images/marker.png";new google.maps.Marker({map:r,position:e[0].geometry.location,icon:i})}else alert("Geocode was not successful for the following reason: "+t)})}function g(){var e=document.getElementsByName("ActivityForm")[0];e.reset()}t.interestedAct=!0,t.nameButton="Interested";var p=1;t.filter={showFilter:!0},t.showTableActivities=function(){t.filter={showFilter:!0},p++,p>1&&(t.filter={showFilter:!1},p=0)},t.hideTableActivities=function(){p=0,t.filter={showFilter:!1}},t.getActivities=function(){r.getCollection("activities").then(function(r){for(var i=r.activitielist,n=[],o=i.length;o--;)new Date(i[o].untilDate).getTime()>=new Date(e).getTime()&&(i[o].deleted===!1?(t.deleted=!1,n.push(i[o])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,r){var i,n=this+"",o=-1;if("string"==typeof e){if(!r)return this.split(e).join(t);for(i=e.toLowerCase();-1!==(o=n.toLowerCase().indexOf(e,o>=0?o+t.length:0));)n=n.substring(0,o)+t+n.substring(o+e.length)}return n},t.addActivity=function(){var e=this.activityName,r=this.street,n=this.number,o=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),h=this.startTimeHour,f=this.startTimeMin,d=this.endTimeHour,m=this.endTimeMin,p=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,b=this.dateUntilMonth,U=this.dateUntilYear.toString();u(p,v,function(e,t,r){p=t,v=r,e&&console.log(e)}),u(y,b,function(e,t,r){y=t,b=r,e&&console.log(e)}),new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(U+"-"+b+"-"+y+" "+d+":"+m).getTime()?new Date(U+"-"+b+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==p&&void 0!==h&&void 0!==f&&void 0!==U&&void 0!==b&&void 0!==y&&void 0!==d&&void 0!==m?60>f&&25>h?(l(h,function(e,t){h=t,e&&console.log(e)}),l(f,function(e,t){f=t,e&&console.log(e)}),2===f.length&&2===h.length?60>m&&24>d?(l(d,function(e,r){d=r,e&&(t.error=e)}),l(m,function(e,r){m=r,e&&(t.error=e)}),2===m.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(U+"-"+b+"-"+y+" "+d+":"+m).getTime()&&(new Date(U+"-"+b+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)t.error=c;else{var u="/api/activities/addactivity";i.post(u,{activityName:e,street:r,number:n,zipcode:o,description:s,dateFrom:w+"-"+v+"-"+p+" "+h+":"+f,dateUntil:U+"-"+b+"-"+y+" "+d+":"+m,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),g()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct":t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){r.getDetailsActivity("activities",o.activityName).then(function(r){t.arrDetailsActivity=r.activity,d();for(var i=t.arrDetailsActivity.matches.length;i--;)t.arrDetailsActivity.matches[i]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,r,n){var o="",s=t.interestedAct;s!==!1?(o="/api/activities/interested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!1,t.nameButton="Not interested",t.error=e.error})):(o="/api/activities/deleteinterested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!0,t.nameButton="Interested",t.error=e.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);o.sort(h);for(var a=[],c=i;c--;)a.push(o[c]);for(var l=[],u=a.length;u--;){var f=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",l);void 0===a[u]&&a.splice(u,1,f)}t.arrMostRecentActivities=a})},t.getMostPopularActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);for(var a=[],c=0;i>c;c++){var l=f(o);a.push(o[l]),o.splice(l,1)}for(var u=[],h=a.length;h--;){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===a[h]&&a.splice(h,1,d)}t.arrMostPopularActivities=a})},t.deleteActivity=function(e){r.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";function e(e,t,r){e.init=function(){},r.emit("halloNikita"),e.messages=[],e.message="",e.sendMessage=function(){if(console.log(this.message),""!==this.message&&null!==this.message){var i={user:t.currentUser,text:this.message,receiver:t.contactedUser.username};e.messages.push(i),r.emit("message",i),e.message=""}},r.on("message_receiver",function(t){console.log("JE BENT ER!"),console.log(t.message),console.log(t.sender),e.messages.push({text:t.message,user:t.sender})})}angular.module("app").controller("ChatController",["$scope","$rootScope","chatService",e])}(),function(){"use strict";var e=function(e,t){var r=0;e.showDiv=function(){e.filter={showFilter:!0},r++,r>1&&(e.filter={showFilter:!1},r=0)},e.hideDiv=function(){r=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.filter2Matches=function(t){return""===e.filter2Query?!0:void 0===t?!1:void 0===t.zipcode?!1:e.filter2Query==t.zipcode?!0:(""===e.filter2Query.toLowerCase()&&(e.filter2Query=""),!1)},e.intersect=function(e,t){var r,i,n=[],o={},s=t.length;for(r=0;s>r;r++)o[t[r]]=!0;for(s=e.length,r=0;s>r;r++)i=e[r],i in o&&n.push(i);return n},e.showMatches=function(){var r;r=localStorage.getItem("username"),t.getCollection("users").then(function(i){for(var n=i.userlist,o=0;o<n.length;o++)n[o].username===r&&n.splice(o,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(r).then(function(t){for(var r=t,i=[],o=n.length;o--;){var s=[];s=e.intersect(r.interests,n[o].interests),0!==s.length&&n[o].deleted===!1&&i.push(n[o])}e.arrMatches=i})})},e.searchInMatches=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrMatches.length;i>r;r++)e.arrMatches[r].zipcode==e.filter2Query&&t.push(e.arrMatches[r]);e.arrMatches=t}else""===e.filter2Query&&e.showMatches()}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,r,i,n,o){var s=0;e.startChat=function(r,i){n.post("/chat",{currentUser:r,contactedUser:i}).success(function(r){e.error=r.error,t.currentUser=r.currentUser,t.contactedUser=r.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),o.path(r.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),i.getCollection("users").then(function(r){for(var i=r.userlist,n=i.length;n--;)i[n].username===t&&i.splice(n,1);for(var o=i.length;o--;)"admin"===i[o].username&&i.splice(o,1);e.arrProfiles=i})},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.searchInProfiles=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrProfiles.length;i>r;r++)e.arrProfiles[r].zipcode==e.filter2Query&&t.push(e.arrProfiles[r]);e.arrProfiles=t}else""===e.filter2Query&&e.showProfiles()}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,r,i){e.getUsers=function(){i.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var r=e.arrUsers.length;r--;)e.arrUsers[r].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){i.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){i.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,i=e.user.firstname,n=e.user.lastname,o=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";r.post(l,{username:t,firstname:i,lastname:n,birthdate:o,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t})},e.getUserByID=function(){i.getItem("user").then(function(t){e.userProfile=t})};var n=0;e.showTableUsers=function(){e.filter={showFilter:!0},n++,n>1&&(e.filter={showFilter:!1},n=0)},e.hideTableUsers=function(){n=0,e.filter={showFilter:!1}}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,r,i,n,o){function s(e,t,r){var i=[31,28,31,30,31,30,31,31,30,31,30,31];return(r%100&&!r%4||!r%400)&&(i[1]=29),e<=i[--t]}function a(e){return e?""===e.value||void 0===e?!1:!0:void 0}function c(e){var t=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return t.test(e)}function l(e){var t=/^[1-9]{1}[0-9]{3}$/;return t.test(e)}t.login=function(){i.post("/login",{username:this.username,password:this.password}).success(function(e){r.user=e.user,t.error=e.error,o.emit("newUser",r.user.username),void 0!==r.user&&localStorage.setItem("username",r.user.username),n.path(e.redirect)})},t.interests=["Music","Traveling"],t.lst=[],t.change=function(){t.lst.push("2")},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude}}function r(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){if(a(this.firstname)&&a(this.lastname)&&a(this.password)&&a(this.sex)&&a(this.biography))if(t.error="",s(this.birthdateDay,this.birthdateMonth,this.birthdateYear)){var r=this.birthdateYear+"-"+this.birthdateMonth+"-"+this.birthdateDay;t.error="",l(this.zipcode)?(t.error="",c(this.username)?(t.error="",i.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:r,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})):t.error="Please enter a valid email as username."):t.error="Please enter a valid Belgian postcode."}else t.error="Please enter a valid date as birthdate.";else t.error="All fields are required when making a new account."}},r=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},i=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(" "!==t)if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location","chatService",t]).controller("signupController",["$scope",r]).controller("editableCheckboxController",["$scope",i])}(),function(){"use strict";var e=function(e,t,r,i){r.get("/user").success(function(r){e.user=r,t.user=r,"admin"==r.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=r.username&&void 0!==r.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===r.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkFjdGl2aXR5LmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwiZ2V0SXRlbSIsIml0ZW0iLCJnZXREZXRhaWxzQWN0aXZpdHkiLCJhY3Rpdml0eW5hbWUiLCJkZWxldGVBY3Rpdml0eSIsImFjdGl2aXR5SWQiLCJnZXROb2lzZVdvcmRzIiwibWF0Y2hlc1NlcnZpY2UiLCJnZXRNYXRjaGVzIiwibmFtZVVzZXIiLCJsb2NhbFVybCIsInhtbEh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYXJyIiwiYXJyTWF0Y2hlcyIsImkiLCJsZW5ndGgiLCJvYmoiLCJwdXNoIiwiaWkiLCJpbmRleCIsImluZGV4T2YiLCJhcnJNYXRjaGVzQnlVc2VyIiwiZGF0ZVRpbWVOb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJBY3Rpdml0aWVzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImlzSW5BcnJheSIsInZhbHVlIiwiYXJyYXkiLCJnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbiIsInJlcGxhY2VBbGwiLCJ3b3JkcyIsInNwbGl0Iiwia2V5V29yZHMiLCJub2lzZVdvcmRzIiwibm9pc2V3b3JkcyIsInRvTG93ZXJDYXNlIiwiaXNFbXB0eSIsInN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzIiwib3V0cHV0IiwidG9TdHJpbmciLCJmdWxsRGF0ZSIsIm51bWJlcjIiLCJudW1iZXJUb1N0cmluZyIsInJlY2VudEZpcnN0IiwiYSIsImIiLCJwb3B1bGFyRmlyc3QiLCJtYXgiLCJtYXhJbmRleCIsImluaXRtYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZUFkZHJlc3MiLCJyZXN1bHRzTWFwIiwiYXJyRGV0YWlsc0FjdGl2aXR5IiwiYWRkcmVzcyIsImdlb2NvZGUiLCJyZXN1bHRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsInNldENlbnRlciIsImdlb21ldHJ5IiwiaW1hZ2UiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhbGVydCIsInJlc2V0Rm9ybSIsImZybSIsImdldEVsZW1lbnRzQnlOYW1lIiwicmVzZXQiLCJpbnRlcmVzdGVkQWN0IiwibmFtZUJ1dHRvbiIsImNsaWNrc09uQnRuIiwiZmlsdGVyIiwic2hvd0ZpbHRlciIsInNob3dUYWJsZUFjdGl2aXRpZXMiLCJoaWRlVGFibGVBY3Rpdml0aWVzIiwiZ2V0QWN0aXZpdGllcyIsImFyclRlbXAiLCJhY3Rpdml0aWVsaXN0IiwiYXJyQWN0cyIsInVudGlsRGF0ZSIsImdldFRpbWUiLCJkZWxldGVkIiwiYXJyQWN0aXZpdGllcyIsIlN0cmluZyIsInByb3RvdHlwZSIsInRva2VuIiwibmV3VG9rZW4iLCJpZ25vcmVDYXNlIiwiX3Rva2VuIiwic3RyIiwiam9pbiIsImFkZEFjdGl2aXR5IiwiY29tbWVudCIsInN0YXJ0VGltZUhvdXIiLCJzdGFydFRpbWVNaW4iLCJlbmRUaW1lSG91ciIsImVuZFRpbWVNaW4iLCJkYXRlRnJvbURheSIsImRhdGVGcm9tTW9udGgiLCJkYXRlRnJvbVllYXIiLCJkYXRlVW50aWxEYXkiLCJkYXRlVW50aWxNb250aCIsImRhdGVVbnRpbFllYXIiLCJkYXRlRnJvbWRheVN0cmluZyIsImRhdGVGcm9tTW9udGhTdHJpbmciLCJkYXRlVW50aWxEYXlTdHJpbmciLCJkYXRlVW50aWxNb250aFN0cmluZyIsInN0YXJ0VGltZUhvdXJTdHJpbmciLCJzdGFydFRpbWVNaW5TdHJpbmciLCJlbmRUaW1lSG91clN0cmluZyIsImVuZFRpbWVNaW5TdHJpbmciLCJnZXREZXRhaWxBY3Rpdml0eSIsImN1cnJlbnRVc2VyIiwiYWN0aXZpdHkiLCJpbnRlcmVzdGVkIiwiaW50ZXJlc3RlZFVzZXIiLCJjcmVhdGVyVXNlciIsInNob3dBY3Rpdml0aWVzT25Ib21lUGFnZSIsImdldE1vc3RSZWNlbnRBY3Rpdml0aWVzIiwiZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwibnVtYmVyT2ZBY3Rpdml0aWVzIiwiYXJyQWxsQWN0aXZpdGllcyIsInNvcnQiLCJhcnJNb3N0UmVjZW50QWN0aXZpdGllcyIsImlpaSIsImR1bW15QWN0aXZpdHkiLCJzcGxpY2UiLCJhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMiLCJqIiwiaW5kZXhNb3N0UG9wIiwiaW5mb2RlbGV0ZWRBY3Rpdml0eSIsIkNoYXRDb250cm9sbGVyIiwiaW5pdCIsIm1lc3NhZ2VzIiwibWVzc2FnZSIsInNlbmRNZXNzYWdlIiwidGV4dCIsInJlY2VpdmVyIiwiY29udGFjdGVkVXNlciIsInNlbmRlciIsIk1hdGNoZXNDb250cm9sbGVyIiwic2hvd0RpdiIsImhpZGVEaXYiLCJzb3J0UHJvcGVydHkiLCJmaWx0ZXJRdWVyeSIsImZpbHRlcjJRdWVyeSIsImZpbHRlck1hdGNoZXMiLCJzZXgiLCJmaWx0ZXIyTWF0Y2hlcyIsImludGVyc2VjdCIsImFycjEiLCJhcnIyIiwidiIsInIiLCJvIiwibCIsInNob3dNYXRjaGVzIiwibG9jYWxTdG9yYWdlIiwiYXJyUHJvZmlsZXMiLCJ1c2VybGlzdCIsInNhbWVJbnRlcmVzdHMiLCJpbnRlcmVzdHMiLCJzZWFyY2hJbk1hdGNoZXMiLCJhcnJaaXBjb2RlV2l0aE1hdGNoZXMiLCJQcm9maWxlc0NvbnRyb2xsZXIiLCJzdGFydENoYXQiLCJzZXRJdGVtIiwicGF0aCIsInJlZGlyZWN0Iiwic2hvd1Byb2ZpbGVzIiwiZmlsdGVyUHJvZmlsZXMiLCJzZWFyY2hJblByb2ZpbGVzIiwiYXJyWmlwY29kZVdpdGhQcm9maWxlcyIsIlVzZXJzQ29udHJvbGxlciIsImdldFVzZXJzIiwiYXJyVXNlcnMiLCJnZXREZXRhaWxVc2VyIiwidXNlckRldGFpbHMiLCJjb3JyZWN0dXNlciIsImluZm9kZWxldGVkVXNlciIsInVwZGF0ZVVzZXIiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImJpcnRoZGF0ZSIsImJpb2dyYXBoeSIsImluZm9ybWF0aW9uIiwiZ2V0VXNlckJ5SUQiLCJ1c2VyUHJvZmlsZSIsInNob3dUYWJsZVVzZXJzIiwiaGlkZVRhYmxlVXNlcnMiLCJzZWxlY3RlZEludGVyZXN0IiwibG9naW5Db250cm9sbGVyIiwiaXNWYWxpZERhdGUiLCJkIiwibSIsInkiLCJkYXlzSW5Nb250aCIsImlzUmVxdWlyZWRGaWVsZCIsImlzVmFsaWRFbWFpbCIsImVtYWlsIiwicGF0dGVybiIsInRlc3QiLCJpc1ZhbGlkWmlwY29kZSIsImxvZ2luIiwicGFzc3dvcmQiLCJsc3QiLCJjaGFuZ2UiLCJzdGF0ZUNoYW5nZWQiLCJxSWQiLCJnZW9sb2NhdGlvbiIsImdldExvY2F0aW9uIiwic3VjY2Vzc0NhbGxiYWNrIiwibGF0aXR1ZGUiLCJjb29yZHMiLCJsb25naXR1ZGUiLCJlcnJvckNhbGxiYWNrIiwiY29kZSIsIlBFUk1JU1NJT05fREVOSUVEIiwiUE9TSVRJT05fVU5BVkFJTEFCTEUiLCJUSU1FT1VUIiwiVU5LTk9XTl9FUlJPUiIsIm5hdmlnYXRvciIsImdldEN1cnJlbnRQb3NpdGlvbiIsIm1heGltdW1BZ2UiLCJyZWdpc3RlciIsImJpcnRoZGF0ZURheSIsImJpcnRoZGF0ZU1vbnRoIiwiYmlydGhkYXRlWWVhciIsInNpZ251cENvbnRyb2xsZXIiLCJjYXRlZ29yaWVzIiwibmV3Q2F0ZWdvcnkiLCJzYXZlQ2F0ZWdvcnkiLCJlZGl0YWJsZUNoZWNrYm94Q29udHJvbGxlciIsImNhdGVnb3J5Iiwic2hvd0xhYmVsIiwic2hvd1RleHRib3giLCJlZGl0IiwiaXNDaGVja2VkIiwidXNlckNv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SUFBQSxTQUFBcEMsUUFBQSxTQUFBOEIsR0FDQStDLEVBQUFoSCxLQUFBaUUsRUFDQWxFLEVBQUFDLEtBQUFpRSxFQUNBLFNBQUFBLEVBQUFqQixTQUNBZ0UsRUFBQXVPLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBLFNBQUF4UixFQUFBakIsVUFBQWQsU0FBQStCLEVBQUFqQixTQUNBZ0UsRUFBQXVPLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBdlQsU0FBQStCLEVBQUFqQixXQUNBZ0UsRUFBQXVPLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxNQVNBbFcsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLGtCQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0F5ViIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IE1hcnRoZSBvbiAxMC8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoXCJhcHBcIiwgW1wibmdSb3V0ZVwiXSk7XG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlcil7XG4gICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob21lLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3NpZ251cFwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9zaWdudXAuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvaG9tZVwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2hvbWUuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvbWF0Y2hlc1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL21hdGNoZXMuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvaG93dG9cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob3dUby5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9hY3Rpdml0aWVzXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvYWN0aXZpdGllcy5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9hZG1pblwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2FkbWluLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3NlYXJjaHByb2ZpbGVzXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3Mvc2VhcmNoUHJvZmlsZXMuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvbXlwcm9maWxlXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvbXlQcm9maWxlLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL3VzZXJkZXRhaWxzLzp1c2VybmFtZVwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNVc2VyLmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnVXNlcnNDb250cm9sbGVyJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2RldGFpbHN1c2VyXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvZGV0YWlsc1VzZXIuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdHlkZXRhaWxzLzphY3Rpdml0eU5hbWVcIiwge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvZGV0YWlsc0FjdGl2aXR5Lmh0bWxcIixcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBcIkFjdGl2aXRpZXNDb250cm9sbGVyXCJcblxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2NoYXRcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9jaGF0Lmh0bWxcIlxuICAgICAgICAgICAgfSk7XG5cblxuICAgIH0pO1xuXG4gICAgYXBwLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuICAgICAgICAkcm9vdFNjb3BlLnVzZXIgPSB7fTtcbiAgICB9KTtcblxuICAgIGFwcC5kaXJlY3RpdmUoJ25nRW50ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICBlbGVtZW50LmJpbmQoXCJrZXlkb3duIGtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nRW50ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH0pO1xuXG5cbiAgICBhcHAuZGlyZWN0aXZlKCdmaWxlTW9kZWwnLCBbJyRwYXJzZScsIGZ1bmN0aW9uICgkcGFyc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSAkcGFyc2UoYXR0cnMuZmlsZU1vZGVsKTtcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxTZXR0ZXIgPSBtb2RlbC5hc3NpZ247XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LmJpbmQoJ2NoYW5nZScsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxTZXR0ZXIoc2NvcGUsIGVsZW1lbnRbMF0uZmlsZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSk7XG5cbiAgICBhcHAuc2VydmljZSgnZmlsZVVwbG9hZCcsIFsnJGh0dHAnLCBmdW5jdGlvbiAoJGh0dHApIHtcbiAgICAgICAgdGhpcy51cGxvYWRGaWxlVG9VcmwgPSBmdW5jdGlvbihmaWxlLCB1cGxvYWRVcmwpe1xuICAgICAgICAgICAgdmFyIGZkID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmZC5hcHBlbmQoJ2ZpbGUnLCBmaWxlKTtcbiAgICAgICAgICAgICRodHRwLnBvc3QodXBsb2FkVXJsLCBmZCwge1xuICAgICAgICAgICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IGFuZ3VsYXIuaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiB1bmRlZmluZWR9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yXCIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgIH1dKTtcblxuXG4gICAgYXBwLmRpcmVjdGl2ZSgnZWRpdGFibGVDaGVja2JveCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJy4vdmlld3MvZWRpdGFibGVjaGVja2JveC5odG1sJ1xuICAgICAgICB9O1xuICAgIH0pO1xuXG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gMTUvMTIvMTUuXG4gKi9cbnZhciBBY3Rpdml0eSA9IGZ1bmN0aW9uKG5hbWUsIHppcGNvZGUsIHN0cmVldCwgbnVtYmVyLCBkZXNjcmlwdGlvbiwgZGF0ZUZyb20sIGRhdGVVbnRpbCwgdGltZXN0YW1wLCB1c2VybmFtZSwgbWF0Y2hlcyl7XG4gICAgdGhpcy5hY3Rpdml0eU5hbWUgPSBuYW1lO1xuICAgIHRoaXMuemlwY29kZSA9IHppcGNvZGU7XG4gICAgdGhpcy5zdHJlZXQgPSBzdHJlZXQ7XG4gICAgdGhpcy5udW1iZXIgPSBudW1iZXI7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuZGF0ZUZyb20gPSBkYXRlRnJvbTtcbiAgICB0aGlzLmRhdGVVbnRpbCA9IGRhdGVVbnRpbDtcbiAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcbiAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG4gICAgdGhpcy5tYXRjaGVzID0gbWF0Y2hlcztcbn07IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IE5pa2l0YSBvbiA3LzAxLzIwMTYuXG4gKi9cblxuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgY2hhdFNlcnZpY2UgPSBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xuICAgICAgICB2YXIgc29ja2V0ID0gaW8uY29ubmVjdCh3aW5kb3cubG9jYXRpb24uaG9zdCk7XG5cbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5vbihldmVudE5hbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdChldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHNvY2tldCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvbjogb24sXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxuICAgICAgICAgICAgc29ja2V0OiBzb2NrZXRcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImNoYXRTZXJ2aWNlXCIsIFtcIiRyb290U2NvcGVcIiwgY2hhdFNlcnZpY2VdKTtcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiAxNS8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgZGJTZXJ2aWNlID0gZnVuY3Rpb24gKCRodHRwKSB7XG5cbiAgICAgICAgdmFyIGdldENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuXG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXRCeUlEID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGlkKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL1wiICsgaWQ7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldERldGFpbHNVc2VyID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIHVzZXJuYW1lKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL3VzZXJkZXRhaWwvXCIgKyB1c2VybmFtZTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZGVsZXRlVXNlciA9ICBmdW5jdGlvbiAoY29sbGVjdGlvbiwgdXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvdXNlcmRlbGV0ZS9cIiArIHVzZXJuYW1lO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgdmFyIGdldEl0ZW0gPSBmdW5jdGlvbihpdGVtKXtcblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGl0ZW07XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvdXNlcicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldERldGFpbHNBY3Rpdml0eSA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBhY3Rpdml0eW5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZXRhaWwvXCIgKyBhY3Rpdml0eW5hbWU7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZGVsZXRlQWN0aXZpdHkgPSAgZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGFjdGl2aXR5SWQpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZWxldGUvXCIgKyBhY3Rpdml0eUlkO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgdmFyIGdldE5vaXNlV29yZHMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYXRhL25vaXNld29yZHMuanNvblwiO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cblxuICAgICAgICAvL3B1YmxpYyBnZWRlZWx0ZVxuICAgICAgICByZXR1cm57XG5cbiAgICAgICAgICAgIGdldENvbGxlY3Rpb246Z2V0Q29sbGVjdGlvbixcbiAgICAgICAgICAgIGdldEJ5SUQ6Z2V0QnlJRCxcbiAgICAgICAgICAgIGdldEl0ZW06Z2V0SXRlbSxcbiAgICAgICAgICAgIGdldERldGFpbHNVc2VyOiBnZXREZXRhaWxzVXNlcixcbiAgICAgICAgICAgIGRlbGV0ZVVzZXI6IGRlbGV0ZVVzZXIsXG4gICAgICAgICAgICBnZXREZXRhaWxzQWN0aXZpdHk6IGdldERldGFpbHNBY3Rpdml0eSxcbiAgICAgICAgICAgIGdldE5vaXNlV29yZHM6IGdldE5vaXNlV29yZHMsXG4gICAgICAgICAgICBkZWxldGVBY3Rpdml0eTogZGVsZXRlQWN0aXZpdHlcblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJkYlNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgZGJTZXJ2aWNlXSk7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXiBkZXplIG5hYW0gYmVwYWFsdCB3ZWxrZSBuYWFtIGplIG5vZGlnIGhlYnQgaW4gamUgY29udHJvbGxlciBhbHMgdmVyd2lqemluZyFcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiA1LzEyLzE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG1hdGNoZXNTZXJ2aWNlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBnZXRNYXRjaGVzID0gZnVuY3Rpb24gKG5hbWVVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciB2YXJpYWJlbFVSTCA9IFwidG9nZXRoZXJcIjtcbiAgICAgICAgICAgIHZhciBsb2NhbFVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbWF0Y2hlcy5qc29uXCI7XG4gICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiR0VUXCIsIGxvY2FsVXJsLCBmYWxzZSk7XG4gICAgICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7XG5cbiAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hVc2VycyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaEludGVyZXN0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1c2VyXCI6IGRhdGFbaV0udXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF0Y2hlc1wiOmRhdGFbaV0ubWF0Y2hlc1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKG9iaik7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gMDsgaWk8YXJyLmxlbmd0aDsgaWkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gYXJyW2lpXS51c2VyLmluZGV4T2YobmFtZVVzZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJNYXRjaGVzLnB1c2goYXJyW2lpXS5tYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5kZXg6IFwiK2luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFycik7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhcnJNYXRjaGVzWzBdKTtcblxuXG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXNCeVVzZXIgPSBhcnJNYXRjaGVzWzBdO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJBYW50YWwgbWF0Y2hlczogXCIgKyBhcnJNYXRjaGVzQnlVc2VyLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyTWF0Y2hlc0J5VXNlcjtcblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWk8YXJyTWF0Y2hlc1swXS5sZW5ndGg7IGlpaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hVc2VyID0gYXJyTWF0Y2hlc1swXVtpaWldLnVzZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaEludGVyZXN0cyA9IGFyck1hdGNoZXNbMF1baWlpXS5pbnRlcmVzdHM7XG5cbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hVc2Vycy5wdXNoKG1hdGNoVXNlcik7XG4gICAgICAgICAgICAgICAgICAgIGFyck1hdGNoSW50ZXJlc3RzLnB1c2gobWF0Y2hJbnRlcmVzdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWF0Y2hVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhtYXRjaEludGVyZXN0cyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyTWF0Y2hVc2Vycyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyTWF0Y2hJbnRlcmVzdHMpO1xuICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBnZWRlZWx0ZVxuICAgICAgICByZXR1cm57XG5cbiAgICAgICAgICAgIGdldE1hdGNoZXM6Z2V0TWF0Y2hlcyxcblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJtYXRjaGVzU2VydmljZVwiLCBbbWF0Y2hlc1NlcnZpY2VdKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBkYXRlVGltZU5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApICsgXCIgXCIgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxNik7XG5cbiAgICB2YXIgQWN0aXZpdGllc0NvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBkYlNlcnZpY2UsICRodHRwLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJHJvdXRlKSB7XG4gICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIkludGVyZXN0ZWRcIjtcblxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAxO1xuXG4gICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcblxuICAgICAgICAkc2NvcGUuc2hvd1RhYmxlQWN0aXZpdGllcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6dHJ1ZX07XG4gICAgICAgICAgICBjbGlja3NPbkJ0bisrO1xuXG4gICAgICAgICAgICBpZihjbGlja3NPbkJ0biA+IDEpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlVGFibGVBY3Rpdml0aWVzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGFyckFjdHMgPSBbXTtcblxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFyclRlbXAubGVuZ3RoO2ktLTspe1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoYXJyVGVtcFtpXS51bnRpbERhdGUpLmdldFRpbWUoKSA+PSBuZXcgRGF0ZShkYXRlVGltZU5vdykuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJUZW1wW2ldLmRlbGV0ZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyckFjdHMucHVzaChhcnJUZW1wW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJBY3Rpdml0aWVzID0gYXJyQWN0cztcblxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9O1xuXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZUFsbCA9IGZ1bmN0aW9uICh0b2tlbiwgbmV3VG9rZW4sIGlnbm9yZUNhc2UpIHtcbiAgICAgICAgICAgIHZhciBfdG9rZW47XG4gICAgICAgICAgICB2YXIgc3RyID0gdGhpcyArIFwiXCI7XG4gICAgICAgICAgICB2YXIgaSA9IC0xO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlQ2FzZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIF90b2tlbiA9IHRva2VuLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzdHIudG9Mb3dlckNhc2UoKS5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLCBpID49IDAgPyBpICsgbmV3VG9rZW4ubGVuZ3RoIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgKSApICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUb2tlbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyLnN1YnN0cmluZyhpICsgdG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQodG9rZW4pLmpvaW4obmV3VG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpc0luQXJyYXkodmFsdWUsIGFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbihkZXNjcmlwdGlvbiwgY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCcuJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCcsJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCc/JywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCchJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCdcIicsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbChcIidcIiwgJycpO1xuXG4gICAgICAgICAgICB2YXIgd29yZHMgPSBkZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICB2YXIga2V5V29yZHMgPSBcIlwiO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Tm9pc2VXb3JkcygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9pc2VXb3JkcyA9IHJlc3BvbnNlLm5vaXNld29yZHM7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gd29yZHMubGVuZ3RoOyBpLS07KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5BcnJheSh3b3Jkc1tpXS50b0xvd2VyQ2FzZSgpLCBub2lzZVdvcmRzKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5V29yZHMgKz0gd29yZHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlXb3JkcyArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGtleVdvcmRzO1xuICAgICAgICAgICAgICAgIGlmICgha2V5V29yZHMuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBrZXlXb3Jkcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8ga2V5d29yZHMgZm91bmQuXCIsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhudW1iZXIsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XG4gICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSAnMCcgKyBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgbnVtYmVyID0gb3V0cHV0LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG51bWJlciA9IG51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGlmICghbnVtYmVyLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudW1iZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIG51bWJlci5cIiwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZnVsbERhdGUobnVtYmVyLCBudW1iZXIyLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyLCBmdW5jdGlvbiAoZXJyb3IsIG51bWJlclRvU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyVG9TdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyMiwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xuICAgICAgICAgICAgICAgIG51bWJlcjIgPSBudW1iZXJUb1N0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbnVtYmVyLmlzRW1wdHkgJiYgIW51bWJlcjIuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bWJlciwgbnVtYmVyMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbnVtYmVyLlwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuYWRkQWN0aXZpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZpdHlOYW1lID0gdGhpcy5hY3Rpdml0eU5hbWU7XG4gICAgICAgICAgICB2YXIgc3RyZWV0ID0gdGhpcy5zdHJlZXQ7XG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5udW1iZXI7XG4gICAgICAgICAgICB2YXIgemlwY29kZSA9IHRoaXMuemlwY29kZTtcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMuY29tbWVudDtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IHRoaXMuZGF0ZUZyb207XG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsID0gdGhpcy5kYXRlVW50aWw7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lSG91ciA9IHRoaXMuc3RhcnRUaW1lSG91cjtcbiAgICAgICAgICAgIHZhciBzdGFydFRpbWVNaW4gPSB0aGlzLnN0YXJ0VGltZU1pbjtcbiAgICAgICAgICAgIHZhciBlbmRUaW1lSG91ciA9IHRoaXMuZW5kVGltZUhvdXI7XG4gICAgICAgICAgICB2YXIgZW5kVGltZU1pbiA9IHRoaXMuZW5kVGltZU1pbjtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbURheSA9IHRoaXMuZGF0ZUZyb21EYXk7XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21Nb250aCA9IHRoaXMuZGF0ZUZyb21Nb250aDtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVllYXIgPSB0aGlzLmRhdGVGcm9tWWVhci50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbERheSA9IHRoaXMuZGF0ZVVudGlsRGF5O1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbE1vbnRoID0gdGhpcy5kYXRlVW50aWxNb250aDtcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxZZWFyID0gdGhpcy5kYXRlVW50aWxZZWFyLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIGZ1bGxEYXRlKGRhdGVGcm9tRGF5LCBkYXRlRnJvbU1vbnRoLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGVGcm9tZGF5U3RyaW5nLCBkYXRlRnJvbU1vbnRoU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgZGF0ZUZyb21EYXkgPSBkYXRlRnJvbWRheVN0cmluZztcbiAgICAgICAgICAgICAgICBkYXRlRnJvbU1vbnRoID0gZGF0ZUZyb21Nb250aFN0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZnVsbERhdGUoZGF0ZVVudGlsRGF5LCBkYXRlVW50aWxNb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlVW50aWxEYXlTdHJpbmcsIGRhdGVVbnRpbE1vbnRoU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgZGF0ZVVudGlsRGF5ID0gZGF0ZVVudGlsRGF5U3RyaW5nO1xuICAgICAgICAgICAgICAgIGRhdGVVbnRpbE1vbnRoID0gZGF0ZVVudGlsTW9udGhTdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVGcm9tWWVhciArIFwiLVwiICsgZGF0ZUZyb21Nb250aCArIFwiLVwiICsgZGF0ZUZyb21EYXkgKyBcIiBcIiArIHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbikuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkpe1xuICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGUgdW50aWwgY2FuJ3QgYmUgYmVmb3JlIHRvZGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSBzdGFydGRhdGVcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgoc3RyZWV0ICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKG51bWJlciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgICh6aXBjb2RlICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbVllYXIgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21Nb250aCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbURheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChzdGFydFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZU1pbiAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlVW50aWxZZWFyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbE1vbnRoICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbERheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lSG91ciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lTWluICE9PSB1bmRlZmluZWQpKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbiA8IDYwICYmIHN0YXJ0VGltZUhvdXIgPCAyNSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKHN0YXJ0VGltZUhvdXIsIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lSG91clN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lSG91ciA9IHN0YXJ0VGltZUhvdXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhzdGFydFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lTWluU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVNaW4gPSBzdGFydFRpbWVNaW5TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lTWluLmxlbmd0aCA9PT0gMiAmJiBzdGFydFRpbWVIb3VyLmxlbmd0aCA9PT0gMikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbiA8IDYwICYmIGVuZFRpbWVIb3VyIDwgMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhlbmRUaW1lSG91ciwgZnVuY3Rpb24gKGVycm9yLCBlbmRUaW1lSG91clN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lSG91ciA9IGVuZFRpbWVIb3VyU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoZW5kVGltZU1pbiwgZnVuY3Rpb24gKGVycm9yLCBlbmRUaW1lTWluU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVNaW4gPSBlbmRUaW1lTWluU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMiAmJiBlbmRUaW1lSG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4pLmdldFRpbWUoKSA8PSBuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9hZGRhY3Rpdml0eVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXQ6IHN0cmVldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aXBjb2RlOiB6aXBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRnJvbTogZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVVbnRpbDogZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEZvcm0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9XCJFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSB0b2RheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kZGF0ZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFbmR0aW1lIGlucHV0IGlzIG5vdCBjb3JyZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gJ0RlIHN0YXJ0aW1lIGxlbmd0aCBpcyBub3QgY29ycmVjdCEhISEgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTdGFydHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFUlJPUjogQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldERldGFpbEFjdGl2aXR5ID0gZnVuY3Rpb24gKGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0RGV0YWlsc0FjdGl2aXR5KCdhY3Rpdml0aWVzJywgJHJvdXRlUGFyYW1zLmFjdGl2aXR5TmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5ID0gcmVzcG9uc2UuYWN0aXZpdHk7XG4gICAgICAgICAgICAgICAgaW5pdG1hcCgpO1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXNbaV0gPT09IGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHk7XG5cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmludGVyZXN0ZWQgPSBmdW5jdGlvbiAoYWN0aXZpdHlOYW1lLCBpbnRlcmVzdGVkVXNlciwgY3JlYXRlclVzZXIpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGludGVyZXN0ZWRBY3QgPSAkc2NvcGUuaW50ZXJlc3RlZEFjdDtcbiAgICAgICAgICAgIGlmIChpbnRlcmVzdGVkQWN0ICE9PSBmYWxzZSkge1xuXG4gICAgICAgICAgICAgICAgdXJsID0gXCIvYXBpL2FjdGl2aXRpZXMvaW50ZXJlc3RlZFwiO1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5TmFtZTogYWN0aXZpdHlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdGVkVXNlcjogaW50ZXJlc3RlZFVzZXIsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZXJVc2VyOiBjcmVhdGVyVXNlclxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9kZWxldGVpbnRlcmVzdGVkXCI7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWRVc2VyOiBpbnRlcmVzdGVkVXNlcixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlclVzZXI6IGNyZWF0ZXJVc2VyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJJbnRlcmVzdGVkXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiByZWNlbnRGaXJzdChhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPiBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9wdWxhckZpcnN0KGFycikge1xuICAgICAgICAgICAgdmFyIG1heCA9IGFyclswXTtcbiAgICAgICAgICAgIHZhciBtYXhJbmRleCA9IDA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5tYXRjaGVzLmxlbmd0aCA+IG1heC5tYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93QWN0aXZpdGllc09uSG9tZVBhZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzKCk7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyclRlbXAgPSByZXNwb25zZS5hY3Rpdml0aWVsaXN0O1xuICAgICAgICAgICAgICAgIHZhciBhcnJBbGxBY3Rpdml0aWVzID0gW107XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDtpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5wdXNoKGFyclRlbXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zb3J0KHJlY2VudEZpcnN0KTtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UmVjZW50QWN0aXZpdGllcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSBudW1iZXJPZkFjdGl2aXRpZXM7IGlpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLnB1c2goYXJyQWxsQWN0aXZpdGllc1tpaV0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaWkgPSBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5sZW5ndGg7IGlpaS0tOykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyTW9zdFJlY2VudEFjdGl2aXRpZXNbaWlpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5zcGxpY2UoaWlpLCAxLCBkdW1teUFjdGl2aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMgPSBhcnJNb3N0UmVjZW50QWN0aXZpdGllcztcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZBY3Rpdml0aWVzID0gMztcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGFyckFsbEFjdGl2aXRpZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMucHVzaChhcnJUZW1wW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBudW1iZXJPZkFjdGl2aXRpZXM7IGorKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4TW9zdFBvcCA9IHBvcHVsYXJGaXJzdChhcnJBbGxBY3Rpdml0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnB1c2goYXJyQWxsQWN0aXZpdGllc1tpbmRleE1vc3RQb3BdKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zcGxpY2UoaW5kZXhNb3N0UG9wLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWlpID0gIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcy5sZW5ndGg7IGlpaS0tOykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzW2lpaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcztcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZUFjdGl2aXR5ID0gZnVuY3Rpb24oYWN0aXZpdHlJZCl7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZGVsZXRlQWN0aXZpdHkoJ2FjdGl2aXRpZXMnLCBhY3Rpdml0eUlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb2RlbGV0ZWRBY3Rpdml0eSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBY3Rpdml0aWVzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpbml0bWFwKCl7XG4gICAgICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgICAgICAgICB6b29tOiA4LFxuICAgICAgICAgICAgICAgIGNlbnRlcjoge2xhdDogNTAuODE5NDg5NCwgbG5nOiAzLjI1NzcwNzZ9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG4gICAgICAgICAgICBnZW9jb2RlQWRkcmVzcyhnZW9jb2RlciwgbWFwKTtcblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2VvY29kZUFkZHJlc3MoZ2VvY29kZXIsIHJlc3VsdHNNYXApIHtcbiAgICAgICAgICAgIHZhciBzdHJlZXQgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5LnN0cmVldDtcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm51bWJlcjtcbiAgICAgICAgICAgIHZhciB6aXBjb2RlID0gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS56aXBjb2RlO1xuXG4gICAgICAgICAgICB2YXIgYWRkcmVzcyA9IHN0cmVldCArIFwiIFwiICsgbnVtYmVyICsgXCIsIFwiICsgemlwY29kZTsgLy9oaWVyIGFkZHJlc3MgdWl0IGRiIGluc3RvcHBlblxuXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsnYWRkcmVzcyc6IGFkZHJlc3N9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcC5zZXRDZW50ZXIocmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IFwiLi4vLi4vaW1hZ2VzL21hcmtlci5wbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiByZXN1bHRzTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydCgnR2VvY29kZSB3YXMgbm90IHN1Y2Nlc3NmdWwgZm9yIHRoZSBmb2xsb3dpbmcgcmVhc29uOiAnICsgc3RhdHVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcbiAgICAgICAgICAgIHZhciBmcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSgnQWN0aXZpdHlGb3JtJylbMF07XG4gICAgICAgICAgICBmcm0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQWN0aXZpdGllc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiZGJTZXJ2aWNlXCIsIFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJmaWxlVXBsb2FkXCIsIEFjdGl2aXRpZXNDb250cm9sbGVyXSk7XG5cblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgZnVuY3Rpb24gQ2hhdENvbnRyb2xsZXIoJHNjb3BlLCRyb290U2NvcGUsY2hhdFNlcnZpY2UpIHtcbiAgICAgICAgJHNjb3BlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvL2NoYXRTZXJ2aWNlLmVtaXQoXCJpbml0X3VzZXJzXCIse3VzZXI6JHJvb3RTY29wZS5jdXJyZW50VXNlciwgY29sbGVjdGlvbjpcInVzZXJzXCJ9KTtcblxuICAgICAgICB9O1xuICAgICAgICBjaGF0U2VydmljZS5lbWl0KFwiaGFsbG9OaWtpdGFcIik7XG4gICAgICAgICRzY29wZS5tZXNzYWdlcyA9IFtdO1xuICAgICAgICAkc2NvcGUubWVzc2FnZSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubWVzc2FnZSk7XG4gICAgICAgICAgICBpZih0aGlzLm1lc3NhZ2UgIT09XCJcIiAmJiB0aGlzLm1lc3NhZ2UgIT09bnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyOiAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiB0aGlzLm1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgIHJlY2VpdmVyOiAkcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNoYXRTZXJ2aWNlLmVtaXQoXCJtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBjaGF0U2VydmljZS5vbihcIm1lc3NhZ2VfcmVjZWl2ZXJcIiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpFIEJFTlQgRVIhXCIpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuc2VuZGVyKTtcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHt0ZXh0OmRhdGEubWVzc2FnZSwgdXNlcjpkYXRhLnNlbmRlcn0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTb2NrZXQgbGlzdGVuZXJzXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT1cbiAgICAgICAgLypcbiAgICAgICAgc29ja2V0Lm9uKCdpbml0JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gZGF0YS51c2VycztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCdzZW5kOm1lc3NhZ2UnLCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldC5vbignY2hhbmdlOm5hbWUnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY2hhbmdlTmFtZShkYXRhLm9sZE5hbWUsIGRhdGEubmV3TmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldC5vbigndXNlcjpqb2luJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBkYXRhLm5hbWUgKyAnIGhhcyBqb2luZWQuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnMucHVzaChkYXRhLm5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgYSBtZXNzYWdlIHRvIHRoZSBjb252ZXJzYXRpb24gd2hlbiBhIHVzZXIgZGlzY29ubmVjdHMgb3IgbGVhdmVzIHRoZSByb29tXG4gICAgICAgIHNvY2tldC5vbigndXNlcjpsZWZ0JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBkYXRhLm5hbWUgKyAnIGhhcyBsZWZ0LidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGksIHVzZXI7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJHNjb3BlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdXNlciA9ICRzY29wZS51c2Vyc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodXNlciA9PT0gZGF0YS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUHJpdmF0ZSBoZWxwZXJzXG4gICAgICAgIC8vID09PT09PT09PT09PT09PVxuXG4gICAgICAgIHZhciBjaGFuZ2VOYW1lID0gZnVuY3Rpb24gKG9sZE5hbWUsIG5ld05hbWUpIHtcbiAgICAgICAgICAgIC8vIHJlbmFtZSB1c2VyIGluIGxpc3Qgb2YgdXNlcnNcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8ICRzY29wZS51c2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudXNlcnNbaV0gPT09IG9sZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzW2ldID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBvbGROYW1lICsgJyBpcyBub3cga25vd24gYXMgJyArIG5ld05hbWUgKyAnLidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE1ldGhvZHMgcHVibGlzaGVkIHRvIHRoZSBzY29wZVxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICAkc2NvcGUuY2hhbmdlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdjaGFuZ2U6bmFtZScsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUubmV3TmFtZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYW4gZXJyb3IgY2hhbmdpbmcgeW91ciBuYW1lJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lKCRzY29wZS5uYW1lLCAkc2NvcGUubmV3TmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAkc2NvcGUubmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUubWVzc2FnZXMgPSBbXTtcblxuICAgICAgICAkc2NvcGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgnc2VuZDptZXNzYWdlJywge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5tZXNzYWdlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIHRvIG91ciBtb2RlbCBsb2NhbGx5XG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXNlcjogJHNjb3BlLm5hbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogJHNjb3BlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBjbGVhciBtZXNzYWdlIGJveFxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgfTsqL1xuICAgIH1cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQ2hhdENvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsXCIkcm9vdFNjb3BlXCIsXCJjaGF0U2VydmljZVwiLCBDaGF0Q29udHJvbGxlcl0pO1xuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBNYXRjaGVzQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgZGJTZXJ2aWNlKSB7XG5cbiAgICAgICAgdmFyIGNsaWNrc09uQnRuID0gMDtcblxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6dHJ1ZX07XG4gICAgICAgICAgICBjbGlja3NPbkJ0bisrO1xuXG4gICAgICAgICAgICBpZihjbGlja3NPbkJ0biA+IDEpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlRGl2ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJNYXRjaGVzID0gZnVuY3Rpb24oaSl7XG5cbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgZWxzZSBpZihpLnVzZXJuYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIGVsc2UgaWYoaS5zZXggPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09IGkuc2V4LnRvTG93ZXJDYXNlKCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJRdWVyeSA9IFwiXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZmlsdGVyMk1hdGNoZXMgPSBmdW5jdGlvbihpKXtcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgPT09IFwiXCIpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKGkgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKGkuemlwY29kZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSA9PSBpLnppcGNvZGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkudG9Mb3dlckNhc2UoKSA9PT0gXCJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL2h0dHA6Ly93d3cuZmFsc2Vwb3NpdGl2ZXMuY29tL2luZGV4LnBocC8yMDA5LzEyLzAxL2phdmFzY3JpcHQtZnVuY3Rpb24tdG8tZ2V0LXRoZS1pbnRlcnNlY3Qtb2YtMi1hcnJheXMvXG4gICAgICAgICRzY29wZS5pbnRlcnNlY3QgPSBmdW5jdGlvbihhcnIxLCBhcnIyKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgciA9IFtdLCBvID0ge30sIGwgPSBhcnIyLmxlbmd0aCwgaSwgdjtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvW2FycjJbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGwgPSBhcnIxLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ID0gYXJyMVtpXTtcbiAgICAgICAgICAgICAgICBpZiAodiBpbiBvKSB7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93TWF0Y2hlcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcbiAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgdXNlcm5hbWUgPSAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIHZhciB1c2VybmFtZTtcblxuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJQcm9maWxlcyA9IHJlc3BvbnNlLnVzZXJsaXN0O1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnJQcm9maWxlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSAwOyBpaSA8IGFyclByb2ZpbGVzLmxlbmd0aDsgaWkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2lpXS51c2VybmFtZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaWksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBkYlNlcnZpY2UuZ2V0SXRlbSh1c2VybmFtZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT1hcnJQcm9maWxlcy5sZW5ndGg7IGktLTspe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtZUludGVyZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUludGVyZXN0cyA9ICRzY29wZS5pbnRlcnNlY3QodXNlci5pbnRlcmVzdHMsIGFyclByb2ZpbGVzW2ldLmludGVyZXN0cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNhbWVJbnRlcmVzdHMubGVuZ3RoICE9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJQcm9maWxlc1tpXS5kZWxldGVkID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJQcm9maWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJNYXRjaGVzID0gYXJyTWF0Y2hlcztcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaEluTWF0Y2hlcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgIT09IFwiXCIpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclppcGNvZGVXaXRoTWF0Y2hlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9ICRzY29wZS5hcnJNYXRjaGVzLmxlbmd0aDsgaTxsOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hcnJNYXRjaGVzW2ldLnppcGNvZGUgPT0gJHNjb3BlLmZpbHRlcjJRdWVyeSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJaaXBjb2RlV2l0aE1hdGNoZXMucHVzaCgkc2NvcGUuYXJyTWF0Y2hlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJNYXRjaGVzID0gYXJyWmlwY29kZVdpdGhNYXRjaGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01hdGNoZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJNYXRjaGVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJkYlNlcnZpY2VcIiwgTWF0Y2hlc0NvbnRyb2xsZXJdKTtcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiAyMC8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgUHJvZmlsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbikge1xuXG4gICAgICAgIHZhciBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICRzY29wZS5zdGFydENoYXQgPSBmdW5jdGlvbihjdXJyZW50VXNlciwgY29udGFjdGVkVXNlcil7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KFwiL2NoYXRcIiwge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgICAgICAgICAgICBjb250YWN0ZWRVc2VyOmNvbnRhY3RlZFVzZXJcblxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IGRhdGEuY3VycmVudFVzZXI7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyID0gZGF0YS5jb250YWN0ZWRVc2VyO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50dXNlcm5hbWVcIiwgJHJvb3RTY29wZS5jdXJyZW50VXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb250YWN0ZWR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG5cbiAgICAgICAgJHNjb3BlLnNob3dEaXYgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOnRydWV9O1xuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcblxuICAgICAgICAgICAgaWYoY2xpY2tzT25CdG4gPiAxKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZURpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93UHJvZmlsZXMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcbiAgICAgICAgICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJQcm9maWxlcyA9IHJlc3BvbnNlLnVzZXJsaXN0O1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IGFyclByb2ZpbGVzLmxlbmd0aDsgaS0tOyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSBhcnJQcm9maWxlcy5sZW5ndGg7IGlpLS07KXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclByb2ZpbGVzID0gYXJyUHJvZmlsZXM7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJQcm9maWxlcyA9IGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBlbHNlIGlmKGkudXNlcm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT0gaS5zZXgudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09IFwibm9maWx0ZXJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWFyY2hJblByb2ZpbGVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSAhPT0gXCJcIil7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyWmlwY29kZVdpdGhQcm9maWxlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9ICRzY29wZS5hcnJQcm9maWxlcy5sZW5ndGg7IGk8bDsgaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuYXJyUHJvZmlsZXNbaV0uemlwY29kZSA9PSAkc2NvcGUuZmlsdGVyMlF1ZXJ5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclppcGNvZGVXaXRoUHJvZmlsZXMucHVzaCgkc2NvcGUuYXJyUHJvZmlsZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyUHJvZmlsZXMgPSBhcnJaaXBjb2RlV2l0aFByb2ZpbGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1Byb2ZpbGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIlByb2ZpbGVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiZGJTZXJ2aWNlXCIsXCIkaHR0cFwiLCBcIiRsb2NhdGlvblwiLCBQcm9maWxlc0NvbnRyb2xsZXJdKTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
