<<<<<<< HEAD
<<<<<<< HEAD
!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,r,i){var n=e(i.fileModel),o=n.assign;r.bind("change",function(){t.$apply(function(){o(t,r[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,r){var i=new FormData;i.append("file",t),e.post(r,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,r,i,n,o,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=r,this.number=i,this.description=n,this.dateFrom=o,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),r=function(r,i){t.on(r,function(){var r=arguments;e.$apply(function(){i.apply(t,r)})})},i=function(r,i,n){t.emit(r,i,function(){var r=arguments;e.$apply(function(){n.apply(t,r)})})};return{on:r,emit:i,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="http://localhost:3000/api/"+t;return e.get(r).then(function(e){return e.data})},r=function(t,r){var i="http://localhost:3000/api/"+t+"/"+r;return e.get(i).then(function(e){return e.data})},i=function(t,r){var i="http://localhost:3000/api/"+t+"/userdetail/"+r;return e.get(i).then(function(e){return e.data})},n=function(t,r){var i="http://localhost:3000/api/"+t+"/userdelete/"+r;return e.get(i).then(function(e){return e.data})},o=function(t){return e.get("/user").then(function(e){return e.data})},s=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydetail/"+r;return e.get(i).then(function(e){return e.data})},a=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydelete/"+r;return e.get(i).then(function(e){return e.data})},c=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:r,getItem:o,getDetailsUser:i,deleteUser:n,getDetailsActivity:s,getNoiseWords:c,deleteActivity:a}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(null),200==r.status){for(var i=JSON.parse(r.responseText),n=[],o=[],s=0;s<i.length;s++){var a={user:i[s].user,matches:i[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&o.push(n[c].matches)}var u=o[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,r,i,n,o,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var i=e.split(" "),n="";r.getNoiseWords().then(function(e){for(var r=e.noisewords,o=i.length;o--;)-1==a(i[o].toLowerCase(),r)&&(n+=i[o],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var r=e+"";r.length<2?(r="0"+r,e=r.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,r){l(e,function(t,r){e=r,t&&console.log(t)}),l(t,function(e,r){t=r,e&&console.log(e)}),e.isEmpty||t.isEmpty?r("No number.",null):r(null,e,t)}function f(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function h(e){for(var t=e[0],r=0,i=1;i<e.length;i++)e[i].matches.length>t.matches.length&&(r=i,t=e[i]);return r}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;m(t,e)}function m(e,r){var i=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,o=t.arrDetailsActivity.zipcode,s=i+" "+n+", "+o;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){r.setCenter(e[0].geometry.location);var i="../../images/marker.png";new google.maps.Marker({map:r,position:e[0].geometry.location,icon:i})}else alert("Geocode was not successful for the following reason: "+t)})}function p(){var e=document.getElementsByName("ActivityForm")[0];e.reset()}t.interestedAct=!0,t.nameButton="Interested",t.getActivities=function(){r.getCollection("activities").then(function(r){for(var i=r.activitielist,n=[],o=i.length;o--;)new Date(i[o].untilDate).getTime()>=new Date(e).getTime()&&(i[o].deleted===!1?(t.deleted=!1,n.push(i[o])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,r){var i,n=this+"",o=-1;if("string"==typeof e){if(!r)return this.split(e).join(t);for(i=e.toLowerCase();-1!==(o=n.toLowerCase().indexOf(e,o>=0?o+t.length:0));)n=n.substring(0,o)+t+n.substring(o+e.length)}return n},t.addActivity=function(){var e=this.activityName,r=this.street,n=this.number,o=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),f=this.startTimeHour,h=this.startTimeMin,d=this.endTimeHour,m=this.endTimeMin,g=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,U=this.dateUntilMonth,A=this.dateUntilYear.toString();u(g,v,function(e,t,r){g=t,v=r,e&&console.log(e)}),u(y,U,function(e,t,r){y=t,U=r,e&&console.log(e)}),new Date(w+"-"+v+"-"+g+" "+f+":"+h).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()?new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==g&&void 0!==f&&void 0!==h&&void 0!==A&&void 0!==U&&void 0!==y&&void 0!==d&&void 0!==m?60>h&&25>f?(l(f,function(e,t){f=t,e&&console.log(e)}),l(h,function(e,t){h=t,e&&console.log(e)}),2===h.length&&2===f.length?60>m&&24>d?(l(d,function(e,r){d=r,e&&(t.error=e)}),l(m,function(e,r){m=r,e&&(t.error=e)}),2===m.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+g+" "+f+":"+h).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()&&(new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)t.error=c;else{var u="/api/activities/addactivity";i.post(u,{activityName:e,street:r,number:n,zipcode:o,description:s,dateFrom:w+"-"+v+"-"+g+" "+f+":"+h,dateUntil:A+"-"+U+"-"+y+" "+d+":"+m,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),p()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct":t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){r.getDetailsActivity("activities",o.activityName).then(function(r){t.arrDetailsActivity=r.activity,d();for(var i=t.arrDetailsActivity.matches.length;i--;)t.arrDetailsActivity.matches[i]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,r,n){var o="",s=t.interestedAct;s!==!1?(o="/api/activities/interested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!1,t.nameButton="Not interested",t.error=e.error})):(o="/api/activities/deleteinterested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!0,t.nameButton="Interested",t.error=e.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);o.sort(f);for(var a=[],c=i;c--;)a.push(o[c]);for(var l=[],u=a.length;u--;){var h=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",l);void 0===a[u]&&a.splice(u,1,h)}t.arrMostRecentActivities=a})},t.getMostPopularActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);for(var a=[],c=0;i>c;c++){var l=h(o);a.push(o[l]),o.splice(l,1)}for(var u=[],f=a.length;f--;){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===a[f]&&a.splice(f,1,d)}t.arrMostPopularActivities=a})},t.deleteActivity=function(e){r.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";function e(e,t,r){e.init=function(){},r.emit("halloNikita"),e.messages=[],e.message="",e.sendMessage=function(){console.log(this.message);var e={user:t.currentUser,text:this.message,receiver:t.contactedUser.username};r.emit("message",e)},r.on("message_receiver",function(e){console.log("JE BENT ER!"),console.log(e.message),console.log(e.user)})}angular.module("app").controller("ChatController",["$scope","$rootScope","chatService",e])}(),function(){"use strict";var e=function(e,t){var r=0;e.showDiv=function(){e.filter={showFilter:!0},r++,r>1&&(e.filter={showFilter:!1},r=0)},e.hideDiv=function(){r=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.filter2Matches=function(t){return""===e.filter2Query?!0:void 0===t?!1:void 0===t.zipcode?!1:e.filter2Query==t.zipcode?!0:(""===e.filter2Query.toLowerCase()&&(e.filter2Query=""),!1)},e.intersect=function(e,t){var r,i,n=[],o={},s=t.length;for(r=0;s>r;r++)o[t[r]]=!0;for(s=e.length,r=0;s>r;r++)i=e[r],i in o&&n.push(i);return n},e.showMatches=function(){var r;r=localStorage.getItem("username"),t.getCollection("users").then(function(i){for(var n=i.userlist,o=0;o<n.length;o++)n[o].username===r&&n.splice(o,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(r).then(function(t){for(var r=t,i=[],o=n.length;o--;){var s=[];s=e.intersect(r.interests,n[o].interests),0!==s.length&&n[o].deleted===!1&&i.push(n[o])}e.arrMatches=i})})},e.searchInMatches=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrMatches.length;i>r;r++)e.arrMatches[r].zipcode==e.filter2Query&&t.push(e.arrMatches[r]);e.arrMatches=t}else""===e.filter2Query&&e.showMatches()}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,r,i,n,o){var s=0;e.startChat=function(r,i){n.post("/chat",{currentUser:r,contactedUser:i}).success(function(r){e.error=r.error,t.currentUser=r.currentUser,t.contactedUser=r.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),o.path(r.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),i.getCollection("users").then(function(r){for(var i=r.userlist,n=i.length;n--;)i[n].username===t&&i.splice(n,1);for(var o=i.length;o--;)"admin"===i[o].username&&i.splice(o,1);e.arrProfiles=i})},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.searchInProfiles=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrProfiles.length;i>r;r++)e.arrProfiles[r].zipcode==e.filter2Query&&t.push(e.arrProfiles[r]);e.arrProfiles=t}else""===e.filter2Query&&e.showProfiles()}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,r,i){e.getUsers=function(){i.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var r=e.arrUsers.length;r--;)e.arrUsers[r].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){i.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){i.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,i=e.user.firstname,n=e.user.lastname,o=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";r.post(l,{username:t,firstname:i,lastname:n,birthdate:o,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t})},e.getUserByID=function(){i.getItem("user").then(function(t){e.userProfile=t})}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,r,i,n){t.login=function(){i.post("/login",{username:this.username,password:this.password}).success(function(e){r.user=e.user,t.error=e.error,void 0!==r.user&&localStorage.setItem("username",r.user.username),n.path(e.redirect)})},t.interests=["Jazz","Hiphop","New wave","Traveling","Party"],t.lst=[],t.change=function(){t.lst.push("2")},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude}}function r(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){i.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:this.birthdate,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})}},r=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},i=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(" "!==t)if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location",t]).controller("signupController",["$scope",r]).controller("editableCheckboxController",["$scope",i])}(),function(){"use strict";var e=function(e,t,r,i){r.get("/user").success(function(r){e.user=r,t.user=r,"admin"==r.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=r.username&&void 0!==r.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===r.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkFjdGl2aXR5LmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwiZ2V0SXRlbSIsIml0ZW0iLCJnZXREZXRhaWxzQWN0aXZpdHkiLCJhY3Rpdml0eW5hbWUiLCJkZWxldGVBY3Rpdml0eSIsImFjdGl2aXR5SWQiLCJnZXROb2lzZVdvcmRzIiwibWF0Y2hlc1NlcnZpY2UiLCJnZXRNYXRjaGVzIiwibmFtZVVzZXIiLCJsb2NhbFVybCIsInhtbEh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYXJyIiwiYXJyTWF0Y2hlcyIsImkiLCJsZW5ndGgiLCJvYmoiLCJwdXNoIiwiaWkiLCJpbmRleCIsImluZGV4T2YiLCJhcnJNYXRjaGVzQnlVc2VyIiwiZGF0ZVRpbWVOb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJBY3Rpdml0aWVzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImlzSW5BcnJheSIsInZhbHVlIiwiYXJyYXkiLCJnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbiIsInJlcGxhY2VBbGwiLCJ3b3JkcyIsInNwbGl0Iiwia2V5V29yZHMiLCJub2lzZVdvcmRzIiwibm9pc2V3b3JkcyIsInRvTG93ZXJDYXNlIiwiaXNFbXB0eSIsInN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzIiwib3V0cHV0IiwidG9TdHJpbmciLCJmdWxsRGF0ZSIsIm51bWJlcjIiLCJudW1iZXJUb1N0cmluZyIsInJlY2VudEZpcnN0IiwiYSIsImIiLCJwb3B1bGFyRmlyc3QiLCJtYXgiLCJtYXhJbmRleCIsImluaXRtYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZUFkZHJlc3MiLCJyZXN1bHRzTWFwIiwiYXJyRGV0YWlsc0FjdGl2aXR5IiwiYWRkcmVzcyIsImdlb2NvZGUiLCJyZXN1bHRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsInNldENlbnRlciIsImdlb21ldHJ5IiwiaW1hZ2UiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhbGVydCIsInJlc2V0Rm9ybSIsImZybSIsImdldEVsZW1lbnRzQnlOYW1lIiwicmVzZXQiLCJpbnRlcmVzdGVkQWN0IiwibmFtZUJ1dHRvbiIsImdldEFjdGl2aXRpZXMiLCJhcnJUZW1wIiwiYWN0aXZpdGllbGlzdCIsImFyckFjdHMiLCJ1bnRpbERhdGUiLCJnZXRUaW1lIiwiZGVsZXRlZCIsImFyckFjdGl2aXRpZXMiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJ0b2tlbiIsIm5ld1Rva2VuIiwiaWdub3JlQ2FzZSIsIl90b2tlbiIsInN0ciIsImpvaW4iLCJhZGRBY3Rpdml0eSIsImNvbW1lbnQiLCJzdGFydFRpbWVIb3VyIiwic3RhcnRUaW1lTWluIiwiZW5kVGltZUhvdXIiLCJlbmRUaW1lTWluIiwiZGF0ZUZyb21EYXkiLCJkYXRlRnJvbU1vbnRoIiwiZGF0ZUZyb21ZZWFyIiwiZGF0ZVVudGlsRGF5IiwiZGF0ZVVudGlsTW9udGgiLCJkYXRlVW50aWxZZWFyIiwiZGF0ZUZyb21kYXlTdHJpbmciLCJkYXRlRnJvbU1vbnRoU3RyaW5nIiwiZGF0ZVVudGlsRGF5U3RyaW5nIiwiZGF0ZVVudGlsTW9udGhTdHJpbmciLCJzdGFydFRpbWVIb3VyU3RyaW5nIiwic3RhcnRUaW1lTWluU3RyaW5nIiwiZW5kVGltZUhvdXJTdHJpbmciLCJlbmRUaW1lTWluU3RyaW5nIiwiZ2V0RGV0YWlsQWN0aXZpdHkiLCJjdXJyZW50VXNlciIsImFjdGl2aXR5IiwiaW50ZXJlc3RlZCIsImludGVyZXN0ZWRVc2VyIiwiY3JlYXRlclVzZXIiLCJzaG93QWN0aXZpdGllc09uSG9tZVBhZ2UiLCJnZXRNb3N0UmVjZW50QWN0aXZpdGllcyIsImdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyIsIm51bWJlck9mQWN0aXZpdGllcyIsImFyckFsbEFjdGl2aXRpZXMiLCJzb3J0IiwiYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMiLCJpaWkiLCJkdW1teUFjdGl2aXR5Iiwic3BsaWNlIiwiYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwiaiIsImluZGV4TW9zdFBvcCIsImluZm9kZWxldGVkQWN0aXZpdHkiLCJDaGF0Q29udHJvbGxlciIsImluaXQiLCJtZXNzYWdlcyIsIm1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsInRleHQiLCJyZWNlaXZlciIsImNvbnRhY3RlZFVzZXIiLCJNYXRjaGVzQ29udHJvbGxlciIsImNsaWNrc09uQnRuIiwic2hvd0RpdiIsImZpbHRlciIsInNob3dGaWx0ZXIiLCJoaWRlRGl2Iiwic29ydFByb3BlcnR5IiwiZmlsdGVyUXVlcnkiLCJmaWx0ZXIyUXVlcnkiLCJmaWx0ZXJNYXRjaGVzIiwic2V4IiwiZmlsdGVyMk1hdGNoZXMiLCJpbnRlcnNlY3QiLCJhcnIxIiwiYXJyMiIsInYiLCJyIiwibyIsImwiLCJzaG93TWF0Y2hlcyIsImxvY2FsU3RvcmFnZSIsImFyclByb2ZpbGVzIiwidXNlcmxpc3QiLCJzYW1lSW50ZXJlc3RzIiwiaW50ZXJlc3RzIiwic2VhcmNoSW5NYXRjaGVzIiwiYXJyWmlwY29kZVdpdGhNYXRjaGVzIiwiUHJvZmlsZXNDb250cm9sbGVyIiwic3RhcnRDaGF0Iiwic2V0SXRlbSIsInBhdGgiLCJyZWRpcmVjdCIsInNob3dQcm9maWxlcyIsImZpbHRlclByb2ZpbGVzIiwic2VhcmNoSW5Qcm9maWxlcyIsImFyclppcGNvZGVXaXRoUHJvZmlsZXMiLCJVc2Vyc0NvbnRyb2xsZXIiLCJnZXRVc2VycyIsImFyclVzZXJzIiwiZ2V0RGV0YWlsVXNlciIsInVzZXJEZXRhaWxzIiwiY29ycmVjdHVzZXIiLCJpbmZvZGVsZXRlZFVzZXIiLCJ1cGRhdGVVc2VyIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJiaXJ0aGRhdGUiLCJiaW9ncmFwaHkiLCJpbmZvcm1hdGlvbiIsImdldFVzZXJCeUlEIiwidXNlclByb2ZpbGUiLCJzZWxlY3RlZEludGVyZXN0IiwibG9naW5Db250cm9sbGVyIiwibG9naW4iLCJwYXNzd29yZCIsImxzdCIsImNoYW5nZSIsInN0YXRlQ2hhbmdlZCIsInFJZCIsImdlb2xvY2F0aW9uIiwiZ2V0TG9jYXRpb24iLCJzdWNjZXNzQ2FsbGJhY2siLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImVycm9yQ2FsbGJhY2siLCJjb2RlIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJQT1NJVElPTl9VTkFWQUlMQUJMRSIsIlRJTUVPVVQiLCJVTktOT1dOX0VSUk9SIiwibmF2aWdhdG9yIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibWF4aW11bUFnZSIsInJlZ2lzdGVyIiwic2lnbnVwQ29udHJvbGxlciIsImNhdGVnb3JpZXMiLCJuZXdDYXRlZ29yeSIsInNhdmVDYXRlZ29yeSIsImVkaXRhYmxlQ2hlY2tib3hDb250cm9sbGVyIiwiY2F0ZWdvcnkiLCJzaG93TGFiZWwiLCJzaG93VGV4dGJveCIsImVkaXQiLCJpc0NoZWNrZWQiLCJ1c2VyQ29udHJvbGxlciIsImF1dGgiLCJpc0F1dGgiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLEdBQUFBLEdBQUFDLFFBQUFDLE9BQUEsT0FBQSxXQUNBRixHQUFBRyxRQUNBLGlCQUNBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUEsS0FBQUMsWUFBQSxzQkFBQUQsS0FBQSxXQUFBQyxZQUFBLHNCQUFBRCxLQUFBLFNBQUFDLFlBQUEsc0JBQUFELEtBQUEsWUFBQUMsWUFBQSx5QkFBQUQsS0FBQSxVQUFBQyxZQUFBLHVCQUFBRCxLQUFBLGVB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RUFBQXVMLGFBQUEsU0FBQUMsS0FHQWpULFNBQUFDLE9BQUEsT0FBQUssV0FBQSxtQkFDQSxTQUNBLGFBQ0EsUUFDQSxZQUNBcVMsSUFDQXJTLFdBQUEsb0JBQ0EsU0FDQTRULElBQ0E1VCxXQUFBLDhCQUNBLFNBQ0FnVSxPQU1BLFdBQ0EsWUFDQSxJQUFBTSxHQUFBLFNBQUFuTixFQUFBakgsRUFBQXNCLEVBQUE0RixHQUNBNUYsRUFBQWtELElBQUEsU0FBQXBDLFFBQUEsU0FBQThCLEdBQ0ErQyxFQUFBaEgsS0FBQWlFLEVBQ0FsRSxFQUFBQyxLQUFBaUUsRUFDQSxTQUFBQSxFQUFBakIsU0FDQWdFLEVBQUFvTixNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsR0FFQSxTQUFBclEsRUFBQWpCLFVBQUFkLFNBQUErQixFQUFBakIsU0FDQWdFLEVBQUFvTixNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsR0FFQXBTLFNBQUErQixFQUFBakIsV0FDQWdFLEVBQUFvTixNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsTUMzS0EvVSxTQUFBQyxPQUFBLE9BQUFLLFdBQUEsa0JBQ0EsU0FDQSxhQUNBLFFBQ0EsWUFDQXNVIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTWFydGhlIG9uIDEwLzEyLzE1LlxuICovXG5cbihmdW5jdGlvbigpe1xuICAgIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZShcImFwcFwiLCBbXCJuZ1JvdXRlXCJdKTtcbiAgICBhcHAuY29uZmlnKGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKXtcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcbiAgICAgICAgICAgIC53aGVuKFwiL1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2hvbWUuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2lnbnVwXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcInZpZXdzL3NpZ251cC5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9ob21lXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvaG9tZS5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9tYXRjaGVzXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvbWF0Y2hlcy5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9ob3d0b1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2hvd1RvLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2FjdGl2aXRpZXNcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9hY3Rpdml0aWVzLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2FkbWluXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvYWRtaW4uaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2VhcmNocHJvZmlsZXNcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9zZWFyY2hQcm9maWxlcy5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9teXByb2ZpbGVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9teVByb2ZpbGUuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvdXNlcmRldGFpbHMvOnVzZXJuYW1lXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvZGV0YWlsc1VzZXIuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvZGV0YWlsc3VzZXJcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzVXNlci5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9hY3Rpdml0eWRldGFpbHMvOmFjdGl2aXR5TmFtZVwiLCB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzQWN0aXZpdHkuaHRtbFwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IFwiQWN0aXZpdGllc0NvbnRyb2xsZXJcIlxuXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvY2hhdFwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2NoYXQuaHRtbFwiXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgfSk7XG5cbiAgICBhcHAucnVuKGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgICAgICRyb290U2NvcGUudXNlciA9IHt9O1xuICAgIH0pO1xuXG4gICAgYXBwLmRpcmVjdGl2ZSgnbmdFbnRlcicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGVsZW1lbnQuYmluZChcImtleWRvd24ga2V5cHJlc3NcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdFbnRlcik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfSk7XG5cblxuICAgIGFwcC5kaXJlY3RpdmUoJ2ZpbGVNb2RlbCcsIFsnJHBhcnNlJywgZnVuY3Rpb24gKCRwYXJzZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9ICRwYXJzZShhdHRycy5maWxlTW9kZWwpO1xuICAgICAgICAgICAgICAgIHZhciBtb2RlbFNldHRlciA9IG1vZGVsLmFzc2lnbjtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZCgnY2hhbmdlJywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRlcihzY29wZSwgZWxlbWVudFswXS5maWxlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1dKTtcblxuICAgIGFwcC5zZXJ2aWNlKCdmaWxlVXBsb2FkJywgWyckaHR0cCcsIGZ1bmN0aW9uICgkaHR0cCkge1xuICAgICAgICB0aGlzLnVwbG9hZEZpbGVUb1VybCA9IGZ1bmN0aW9uKGZpbGUsIHVwbG9hZFVybCl7XG4gICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgICAgICAgIGZkLmFwcGVuZCgnZmlsZScsIGZpbGUpO1xuICAgICAgICAgICAgJGh0dHAucG9zdCh1cGxvYWRVcmwsIGZkLCB7XG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6IHVuZGVmaW5lZH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JcIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfV0pO1xuXG5cbiAgICBhcHAuZGlyZWN0aXZlKCdlZGl0YWJsZUNoZWNrYm94JywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnLi92aWV3cy9lZGl0YWJsZWNoZWNrYm94Lmh0bWwnXG4gICAgICAgIH07XG4gICAgfSk7XG5cblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiAxNS8xMi8xNS5cbiAqL1xudmFyIEFjdGl2aXR5ID0gZnVuY3Rpb24obmFtZSwgemlwY29kZSwgc3RyZWV0LCBudW1iZXIsIGRlc2NyaXB0aW9uLCBkYXRlRnJvbSwgZGF0ZVVudGlsLCB0aW1lc3RhbXAsIHVzZXJuYW1lLCBtYXRjaGVzKXtcbiAgICB0aGlzLmFjdGl2aXR5TmFtZSA9IG5hbWU7XG4gICAgdGhpcy56aXBjb2RlID0gemlwY29kZTtcbiAgICB0aGlzLnN0cmVldCA9IHN0cmVldDtcbiAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy5kYXRlRnJvbSA9IGRhdGVGcm9tO1xuICAgIHRoaXMuZGF0ZVVudGlsID0gZGF0ZVVudGlsO1xuICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wO1xuICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICB0aGlzLm1hdGNoZXMgPSBtYXRjaGVzO1xufTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cbiAqL1xuXG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBjaGF0U2VydmljZSA9IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcblxuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uOiBvbixcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiY2hhdFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBjaGF0U2VydmljZV0pO1xuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDE1LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBkYlNlcnZpY2UgPSBmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICB2YXIgZ2V0Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG5cblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb247XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldEJ5SUQgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgaWQpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvXCIgKyBpZDtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZ2V0RGV0YWlsc1VzZXIgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgdXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvdXNlcmRldGFpbC9cIiArIHVzZXJuYW1lO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkZWxldGVVc2VyID0gIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCB1c2VybmFtZSkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi91c2VyZGVsZXRlL1wiICsgdXNlcm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICB2YXIgZ2V0SXRlbSA9IGZ1bmN0aW9uKGl0ZW0pe1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgaXRlbTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy91c2VyJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZ2V0RGV0YWlsc0FjdGl2aXR5ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGFjdGl2aXR5bmFtZSkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi9hY3Rpdml0eWRldGFpbC9cIiArIGFjdGl2aXR5bmFtZTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkZWxldGVBY3Rpdml0eSA9ICBmdW5jdGlvbiAoY29sbGVjdGlvbiwgYWN0aXZpdHlJZCkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi9hY3Rpdml0eWRlbGV0ZS9cIiArIGFjdGl2aXR5SWQ7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICB2YXIgZ2V0Tm9pc2VXb3JkcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbm9pc2V3b3Jkcy5qc29uXCI7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vcHVibGljIGdlZGVlbHRlXG4gICAgICAgIHJldHVybntcblxuICAgICAgICAgICAgZ2V0Q29sbGVjdGlvbjpnZXRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgZ2V0QnlJRDpnZXRCeUlELFxuICAgICAgICAgICAgZ2V0SXRlbTpnZXRJdGVtLFxuICAgICAgICAgICAgZ2V0RGV0YWlsc1VzZXI6IGdldERldGFpbHNVc2VyLFxuICAgICAgICAgICAgZGVsZXRlVXNlcjogZGVsZXRlVXNlcixcbiAgICAgICAgICAgIGdldERldGFpbHNBY3Rpdml0eTogZ2V0RGV0YWlsc0FjdGl2aXR5LFxuICAgICAgICAgICAgZ2V0Tm9pc2VXb3JkczogZ2V0Tm9pc2VXb3JkcyxcbiAgICAgICAgICAgIGRlbGV0ZUFjdGl2aXR5OiBkZWxldGVBY3Rpdml0eVxuXG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImRiU2VydmljZVwiLCBbXCIkaHR0cFwiLCBkYlNlcnZpY2VdKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgbWF0Y2hlc1NlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIGdldE1hdGNoZXMgPSBmdW5jdGlvbiAobmFtZVVzZXIpIHtcblxuICAgICAgICAgICAgdmFyIHZhcmlhYmVsVVJMID0gXCJ0b2dldGhlclwiO1xuICAgICAgICAgICAgdmFyIGxvY2FsVXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvZGF0YS9tYXRjaGVzLmpzb25cIjtcbiAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4bWxIdHRwLm9wZW4oXCJHRVRcIiwgbG9jYWxVcmwsIGZhbHNlKTtcbiAgICAgICAgICAgIHhtbEh0dHAuc2VuZChudWxsKTtcblxuICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaFVzZXJzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoSW50ZXJlc3RzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcInVzZXJcIjogZGF0YVtpXS51c2VyLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJtYXRjaGVzXCI6ZGF0YVtpXS5tYXRjaGVzXG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gob2JqKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSAwOyBpaTxhcnIubGVuZ3RoOyBpaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBhcnJbaWldLnVzZXIuaW5kZXhPZihuYW1lVXNlcik7XG4gICAgICAgICAgICAgICAgICAgIGlmKGluZGV4ID09PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJbaWldLm1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJJbmRleDogXCIraW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYXJyKTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFyck1hdGNoZXNbMF0pO1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlc0J5VXNlciA9IGFyck1hdGNoZXNbMF07XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkFhbnRhbCBtYXRjaGVzOiBcIiArIGFyck1hdGNoZXNCeVVzZXIubGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJNYXRjaGVzQnlVc2VyO1xuXG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpaSA9IDA7IGlpaTxhcnJNYXRjaGVzWzBdLmxlbmd0aDsgaWlpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaFVzZXIgPSBhcnJNYXRjaGVzWzBdW2lpaV0udXNlcjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoSW50ZXJlc3RzID0gYXJyTWF0Y2hlc1swXVtpaWldLmludGVyZXN0cztcblxuICAgICAgICAgICAgICAgICAgICBhcnJNYXRjaFVzZXJzLnB1c2gobWF0Y2hVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hJbnRlcmVzdHMucHVzaChtYXRjaEludGVyZXN0cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhtYXRjaFVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hdGNoSW50ZXJlc3RzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJNYXRjaFVzZXJzKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJNYXRjaEludGVyZXN0cyk7XG4gICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICB9O1xuXG4gICAgICAgIC8vcHVibGljIGdlZGVlbHRlXG4gICAgICAgIHJldHVybntcblxuICAgICAgICAgICAgZ2V0TWF0Y2hlczpnZXRNYXRjaGVzLFxuXG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcIm1hdGNoZXNTZXJ2aWNlXCIsIFttYXRjaGVzU2VydmljZV0pO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gZGV6ZSBuYWFtIGJlcGFhbHQgd2Vsa2UgbmFhbSBqZSBub2RpZyBoZWJ0IGluIGplIGNvbnRyb2xsZXIgYWxzIHZlcndpanppbmchXG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgdmFyIGRhdGVUaW1lTm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCkgKyBcIiBcIiArIG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMTEsIDE2KTtcblxuICAgIHZhciBBY3Rpdml0aWVzQ29udHJvbGxlciA9IGZ1bmN0aW9uICgkc2NvcGUsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCAkcm91dGUpIHtcbiAgICAgICAgJHNjb3BlLmludGVyZXN0ZWRBY3QgPSB0cnVlO1xuICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiSW50ZXJlc3RlZFwiO1xuXG4gICAgICAgICRzY29wZS5nZXRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclRlbXAgPSByZXNwb25zZS5hY3Rpdml0aWVsaXN0O1xuICAgICAgICAgICAgICAgIHZhciBhcnJBY3RzID0gW107XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDtpLS07KXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyVGVtcFtpXS5kZWxldGVkID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJBY3RzLnB1c2goYXJyVGVtcFtpXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyQWN0aXZpdGllcyA9IGFyckFjdHM7XG5cbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgfTtcblxuICAgICAgICBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2VBbGwgPSBmdW5jdGlvbiAodG9rZW4sIG5ld1Rva2VuLCBpZ25vcmVDYXNlKSB7XG4gICAgICAgICAgICB2YXIgX3Rva2VuO1xuICAgICAgICAgICAgdmFyIHN0ciA9IHRoaXMgKyBcIlwiO1xuICAgICAgICAgICAgdmFyIGkgPSAtMTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiA9PT0gXCJzdHJpbmdcIikge1xuXG4gICAgICAgICAgICAgICAgaWYgKGlnbm9yZUNhc2UpIHtcblxuICAgICAgICAgICAgICAgICAgICBfdG9rZW4gPSB0b2tlbi50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICgoXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gc3RyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2tlbiwgaSA+PSAwID8gaSArIG5ld1Rva2VuLmxlbmd0aCA6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICkgKSAhPT0gLTFcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnN1YnN0cmluZygwLCBpKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3VG9rZW4gK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ci5zdWJzdHJpbmcoaSArIHRva2VuLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwbGl0KHRva2VuKS5qb2luKG5ld1Rva2VuKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gaXNJbkFycmF5KHZhbHVlLCBhcnJheSkge1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnLicsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnLCcsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnPycsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnIScsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnXCInLCAnJyk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoXCInXCIsICcnKTtcblxuICAgICAgICAgICAgdmFyIHdvcmRzID0gZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xuICAgICAgICAgICAgdmFyIGtleVdvcmRzID0gXCJcIjtcblxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldE5vaXNlV29yZHMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIG5vaXNlV29yZHMgPSByZXNwb25zZS5ub2lzZXdvcmRzO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IHdvcmRzLmxlbmd0aDsgaS0tOykge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luQXJyYXkod29yZHNbaV0udG9Mb3dlckNhc2UoKSwgbm9pc2VXb3JkcykgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVdvcmRzICs9IHdvcmRzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5V29yZHMgKz0gXCIgXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL3JldHVybiBrZXlXb3JkcztcbiAgICAgICAgICAgICAgICBpZiAoIWtleVdvcmRzLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwga2V5V29yZHMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIGtleXdvcmRzIGZvdW5kLlwiLCBudWxsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgdmFyIG91dHB1dCA9IG51bWJlciArICcnO1xuICAgICAgICAgICAgaWYgKG91dHB1dC5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xuICAgICAgICAgICAgICAgIG51bWJlciA9IG91dHB1dC50b1N0cmluZygpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBudW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgbnVtYmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soXCJObyBudW1iZXIuXCIsIG51bGwpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGxEYXRlKG51bWJlciwgbnVtYmVyMiwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKG51bWJlciwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xuICAgICAgICAgICAgICAgIG51bWJlciA9IG51bWJlclRvU3RyaW5nO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKG51bWJlcjIsIGZ1bmN0aW9uIChlcnJvciwgbnVtYmVyVG9TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBudW1iZXIyID0gbnVtYmVyVG9TdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5ICYmICFudW1iZXIyLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudW1iZXIsIG51bWJlcjIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIG51bWJlci5cIiwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cblxuICAgICAgICAkc2NvcGUuYWRkQWN0aXZpdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYWN0aXZpdHlOYW1lID0gdGhpcy5hY3Rpdml0eU5hbWU7XG4gICAgICAgICAgICB2YXIgc3RyZWV0ID0gdGhpcy5zdHJlZXQ7XG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5udW1iZXI7XG4gICAgICAgICAgICB2YXIgemlwY29kZSA9IHRoaXMuemlwY29kZTtcbiAgICAgICAgICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMuY29tbWVudDtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IHRoaXMuZGF0ZUZyb207XG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsID0gdGhpcy5kYXRlVW50aWw7XG4gICAgICAgICAgICB2YXIgdGltZXN0YW1wID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lSG91ciA9IHRoaXMuc3RhcnRUaW1lSG91cjtcbiAgICAgICAgICAgIHZhciBzdGFydFRpbWVNaW4gPSB0aGlzLnN0YXJ0VGltZU1pbjtcbiAgICAgICAgICAgIHZhciBlbmRUaW1lSG91ciA9IHRoaXMuZW5kVGltZUhvdXI7XG4gICAgICAgICAgICB2YXIgZW5kVGltZU1pbiA9IHRoaXMuZW5kVGltZU1pbjtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbURheSA9IHRoaXMuZGF0ZUZyb21EYXk7XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21Nb250aCA9IHRoaXMuZGF0ZUZyb21Nb250aDtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVllYXIgPSB0aGlzLmRhdGVGcm9tWWVhci50b1N0cmluZygpO1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbERheSA9IHRoaXMuZGF0ZVVudGlsRGF5O1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbE1vbnRoID0gdGhpcy5kYXRlVW50aWxNb250aDtcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxZZWFyID0gdGhpcy5kYXRlVW50aWxZZWFyLnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIGZ1bGxEYXRlKGRhdGVGcm9tRGF5LCBkYXRlRnJvbU1vbnRoLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGVGcm9tZGF5U3RyaW5nLCBkYXRlRnJvbU1vbnRoU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgZGF0ZUZyb21EYXkgPSBkYXRlRnJvbWRheVN0cmluZztcbiAgICAgICAgICAgICAgICBkYXRlRnJvbU1vbnRoID0gZGF0ZUZyb21Nb250aFN0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZnVsbERhdGUoZGF0ZVVudGlsRGF5LCBkYXRlVW50aWxNb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlVW50aWxEYXlTdHJpbmcsIGRhdGVVbnRpbE1vbnRoU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgZGF0ZVVudGlsRGF5ID0gZGF0ZVVudGlsRGF5U3RyaW5nO1xuICAgICAgICAgICAgICAgIGRhdGVVbnRpbE1vbnRoID0gZGF0ZVVudGlsTW9udGhTdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVGcm9tWWVhciArIFwiLVwiICsgZGF0ZUZyb21Nb250aCArIFwiLVwiICsgZGF0ZUZyb21EYXkgKyBcIiBcIiArIHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbikuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkpe1xuICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRhdGUgdW50aWwgY2FuJ3QgYmUgYmVmb3JlIHRvZGF5XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSBzdGFydGRhdGVcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgoc3RyZWV0ICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKG51bWJlciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgICh6aXBjb2RlICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbVllYXIgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21Nb250aCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbURheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChzdGFydFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZU1pbiAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlVW50aWxZZWFyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbE1vbnRoICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbERheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lSG91ciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lTWluICE9PSB1bmRlZmluZWQpKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbiA8IDYwICYmIHN0YXJ0VGltZUhvdXIgPCAyNSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKHN0YXJ0VGltZUhvdXIsIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lSG91clN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lSG91ciA9IHN0YXJ0VGltZUhvdXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhzdGFydFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lTWluU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVNaW4gPSBzdGFydFRpbWVNaW5TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lTWluLmxlbmd0aCA9PT0gMiAmJiBzdGFydFRpbWVIb3VyLmxlbmd0aCA9PT0gMikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbiA8IDYwICYmIGVuZFRpbWVIb3VyIDwgMjQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhlbmRUaW1lSG91ciwgZnVuY3Rpb24gKGVycm9yLCBlbmRUaW1lSG91clN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lSG91ciA9IGVuZFRpbWVIb3VyU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoZW5kVGltZU1pbiwgZnVuY3Rpb24gKGVycm9yLCBlbmRUaW1lTWluU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVNaW4gPSBlbmRUaW1lTWluU3RyaW5nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMiAmJiBlbmRUaW1lSG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4pLmdldFRpbWUoKSA8PSBuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9hZGRhY3Rpdml0eVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXQ6IHN0cmVldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aXBjb2RlOiB6aXBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRnJvbTogZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVVbnRpbDogZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEZvcm0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9XCJFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSB0b2RheVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kZGF0ZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFbmR0aW1lIGlucHV0IGlzIG5vdCBjb3JyZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gJ0RlIHN0YXJ0aW1lIGxlbmd0aCBpcyBub3QgY29ycmVjdCEhISEgJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTdGFydHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFUlJPUjogQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQuXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldERldGFpbEFjdGl2aXR5ID0gZnVuY3Rpb24gKGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0RGV0YWlsc0FjdGl2aXR5KCdhY3Rpdml0aWVzJywgJHJvdXRlUGFyYW1zLmFjdGl2aXR5TmFtZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5ID0gcmVzcG9uc2UuYWN0aXZpdHk7XG4gICAgICAgICAgICAgICAgaW5pdG1hcCgpO1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXMubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXNbaV0gPT09IGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHk7XG5cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmludGVyZXN0ZWQgPSBmdW5jdGlvbiAoYWN0aXZpdHlOYW1lLCBpbnRlcmVzdGVkVXNlciwgY3JlYXRlclVzZXIpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGludGVyZXN0ZWRBY3QgPSAkc2NvcGUuaW50ZXJlc3RlZEFjdDtcbiAgICAgICAgICAgIGlmIChpbnRlcmVzdGVkQWN0ICE9PSBmYWxzZSkge1xuXG4gICAgICAgICAgICAgICAgdXJsID0gXCIvYXBpL2FjdGl2aXRpZXMvaW50ZXJlc3RlZFwiO1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5TmFtZTogYWN0aXZpdHlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdGVkVXNlcjogaW50ZXJlc3RlZFVzZXIsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZXJVc2VyOiBjcmVhdGVyVXNlclxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9kZWxldGVpbnRlcmVzdGVkXCI7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWRVc2VyOiBpbnRlcmVzdGVkVXNlcixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlclVzZXI6IGNyZWF0ZXJVc2VyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJJbnRlcmVzdGVkXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiByZWNlbnRGaXJzdChhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPiBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9wdWxhckZpcnN0KGFycikge1xuICAgICAgICAgICAgdmFyIG1heCA9IGFyclswXTtcbiAgICAgICAgICAgIHZhciBtYXhJbmRleCA9IDA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5tYXRjaGVzLmxlbmd0aCA+IG1heC5tYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93QWN0aXZpdGllc09uSG9tZVBhZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzKCk7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyclRlbXAgPSByZXNwb25zZS5hY3Rpdml0aWVsaXN0O1xuICAgICAgICAgICAgICAgIHZhciBhcnJBbGxBY3Rpdml0aWVzID0gW107XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDtpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5wdXNoKGFyclRlbXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zb3J0KHJlY2VudEZpcnN0KTtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UmVjZW50QWN0aXZpdGllcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWkgPSBudW1iZXJPZkFjdGl2aXRpZXM7IGlpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLnB1c2goYXJyQWxsQWN0aXZpdGllc1tpaV0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaWkgPSBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5sZW5ndGg7IGlpaS0tOykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyTW9zdFJlY2VudEFjdGl2aXRpZXNbaWlpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5zcGxpY2UoaWlpLCAxLCBkdW1teUFjdGl2aXR5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMgPSBhcnJNb3N0UmVjZW50QWN0aXZpdGllcztcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZBY3Rpdml0aWVzID0gMztcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGFyckFsbEFjdGl2aXRpZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDsgaS0tOykge1xuICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMucHVzaChhcnJUZW1wW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaiA9IDA7IGogPCBudW1iZXJPZkFjdGl2aXRpZXM7IGorKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4TW9zdFBvcCA9IHBvcHVsYXJGaXJzdChhcnJBbGxBY3Rpdml0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnB1c2goYXJyQWxsQWN0aXZpdGllc1tpbmRleE1vc3RQb3BdKTtcbiAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zcGxpY2UoaW5kZXhNb3N0UG9wLCAxKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaWlpID0gIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcy5sZW5ndGg7IGlpaS0tOykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzW2lpaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcztcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5kZWxldGVBY3Rpdml0eSA9IGZ1bmN0aW9uKGFjdGl2aXR5SWQpe1xuICAgICAgICAgICAgZGJTZXJ2aWNlLmRlbGV0ZUFjdGl2aXR5KCdhY3Rpdml0aWVzJywgYWN0aXZpdHlJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmluZm9kZWxldGVkQWN0aXZpdHkgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICBmdW5jdGlvbiBpbml0bWFwKCl7XG4gICAgICAgICAgICB2YXIgbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcbiAgICAgICAgICAgICAgICB6b29tOiA4LFxuICAgICAgICAgICAgICAgIGNlbnRlcjoge2xhdDogNTAuODE5NDg5NCwgbG5nOiAzLjI1NzcwNzZ9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xuXG4gICAgICAgICAgICBnZW9jb2RlQWRkcmVzcyhnZW9jb2RlciwgbWFwKTtcblxuICAgICAgICB9XG5cblxuICAgICAgICBmdW5jdGlvbiBnZW9jb2RlQWRkcmVzcyhnZW9jb2RlciwgcmVzdWx0c01hcCkge1xuICAgICAgICAgICAgdmFyIHN0cmVldCA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkuc3RyZWV0O1xuICAgICAgICAgICAgdmFyIG51bWJlciA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubnVtYmVyO1xuICAgICAgICAgICAgdmFyIHppcGNvZGUgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5LnppcGNvZGU7XG5cbiAgICAgICAgICAgIHZhciBhZGRyZXNzID0gc3RyZWV0ICsgXCIgXCIgKyBudW1iZXIgKyBcIiwgXCIgKyB6aXBjb2RlOyAvL2hpZXIgYWRkcmVzcyB1aXQgZGIgaW5zdG9wcGVuXG5cbiAgICAgICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoeydhZGRyZXNzJzogYWRkcmVzc30sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwLnNldENlbnRlcihyZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlID0gXCIuLi8uLi9pbWFnZXMvbWFya2VyLnBuZ1wiO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXA6IHJlc3VsdHNNYXAsXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzZXRGb3JtKCkge1xuICAgICAgICAgICAgdmFyIGZybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdBY3Rpdml0eUZvcm0nKVswXTtcbiAgICAgICAgICAgIGZybS5yZXNldCgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJBY3Rpdml0aWVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJkYlNlcnZpY2VcIiwgXCIkaHR0cFwiLCBcIiRsb2NhdGlvblwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcImZpbGVVcGxvYWRcIiwgQWN0aXZpdGllc0NvbnRyb2xsZXJdKTtcblxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBOaWtpdGEgb24gNy8wMS8yMDE2LlxuICovXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBDaGF0Q29udHJvbGxlcigkc2NvcGUsJHJvb3RTY29wZSxjaGF0U2VydmljZSkge1xuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vY2hhdFNlcnZpY2UuZW1pdChcImluaXRfdXNlcnNcIix7dXNlcjokcm9vdFNjb3BlLmN1cnJlbnRVc2VyLCBjb2xsZWN0aW9uOlwidXNlcnNcIn0pO1xuXG4gICAgICAgIH07XG4gICAgICAgIGNoYXRTZXJ2aWNlLmVtaXQoXCJoYWxsb05pa2l0YVwiKTtcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW107XG4gICAgICAgICRzY29wZS5tZXNzYWdlID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLnNlbmRNZXNzYWdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlKTtcbiAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge3VzZXI6ICRyb290U2NvcGUuY3VycmVudFVzZXIsXG4gICAgICAgICAgICAgICAgdGV4dDp0aGlzLm1lc3NhZ2UsXG4gICAgICAgICAgICByZWNlaXZlcjokcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWV9O1xuICAgICAgICAgICAgLy8kc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIGNoYXRTZXJ2aWNlLmVtaXQoXCJtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoYXRTZXJ2aWNlLm9uKFwibWVzc2FnZV9yZWNlaXZlclwiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSkUgQkVOVCBFUiFcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS51c2VyKTtcbiAgICAgICAgICAgIC8vJHNjb3BlLm1lc3NhZ2VzLnB1c2goe3RleHQ6ZGF0YS5tZXNzYWdlLCB1c2VyOmRhdGEudXNlcn0pO1xuXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTb2NrZXQgbGlzdGVuZXJzXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT1cbiAgICAgICAgLypcbiAgICAgICAgc29ja2V0Lm9uKCdpbml0JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5uYW1lID0gZGF0YS5uYW1lO1xuICAgICAgICAgICAgJHNjb3BlLnVzZXJzID0gZGF0YS51c2VycztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCdzZW5kOm1lc3NhZ2UnLCBmdW5jdGlvbiAobWVzc2FnZSkge1xuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldC5vbignY2hhbmdlOm5hbWUnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgY2hhbmdlTmFtZShkYXRhLm9sZE5hbWUsIGRhdGEubmV3TmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNvY2tldC5vbigndXNlcjpqb2luJywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBkYXRhLm5hbWUgKyAnIGhhcyBqb2luZWQuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnMucHVzaChkYXRhLm5hbWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBhZGQgYSBtZXNzYWdlIHRvIHRoZSBjb252ZXJzYXRpb24gd2hlbiBhIHVzZXIgZGlzY29ubmVjdHMgb3IgbGVhdmVzIHRoZSByb29tXG4gICAgICAgIHNvY2tldC5vbigndXNlcjpsZWZ0JywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBkYXRhLm5hbWUgKyAnIGhhcyBsZWZ0LidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGksIHVzZXI7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJHNjb3BlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdXNlciA9ICRzY29wZS51c2Vyc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAodXNlciA9PT0gZGF0YS5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS51c2Vycy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUHJpdmF0ZSBoZWxwZXJzXG4gICAgICAgIC8vID09PT09PT09PT09PT09PVxuXG4gICAgICAgIHZhciBjaGFuZ2VOYW1lID0gZnVuY3Rpb24gKG9sZE5hbWUsIG5ld05hbWUpIHtcbiAgICAgICAgICAgIC8vIHJlbmFtZSB1c2VyIGluIGxpc3Qgb2YgdXNlcnNcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8ICRzY29wZS51c2Vycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgkc2NvcGUudXNlcnNbaV0gPT09IG9sZE5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzW2ldID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBvbGROYW1lICsgJyBpcyBub3cga25vd24gYXMgJyArIG5ld05hbWUgKyAnLidcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE1ldGhvZHMgcHVibGlzaGVkIHRvIHRoZSBzY29wZVxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICAkc2NvcGUuY2hhbmdlTmFtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdjaGFuZ2U6bmFtZScsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUubmV3TmFtZVxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYW4gZXJyb3IgY2hhbmdpbmcgeW91ciBuYW1lJyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lKCRzY29wZS5uYW1lLCAkc2NvcGUubmV3TmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSAkc2NvcGUubmV3TmFtZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld05hbWUgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUubWVzc2FnZXMgPSBbXTtcblxuICAgICAgICAkc2NvcGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgnc2VuZDptZXNzYWdlJywge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5tZXNzYWdlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIHRvIG91ciBtb2RlbCBsb2NhbGx5XG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdXNlcjogJHNjb3BlLm5hbWUsXG4gICAgICAgICAgICAgICAgdGV4dDogJHNjb3BlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBjbGVhciBtZXNzYWdlIGJveFxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgfTsqL1xuICAgIH1cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQ2hhdENvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsXCIkcm9vdFNjb3BlXCIsXCJjaGF0U2VydmljZVwiLCBDaGF0Q29udHJvbGxlcl0pO1xuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBNYXRjaGVzQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwgZGJTZXJ2aWNlKSB7XG5cbiAgICAgICAgdmFyIGNsaWNrc09uQnRuID0gMDtcblxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6dHJ1ZX07XG4gICAgICAgICAgICBjbGlja3NPbkJ0bisrO1xuXG4gICAgICAgICAgICBpZihjbGlja3NPbkJ0biA+IDEpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlRGl2ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJNYXRjaGVzID0gZnVuY3Rpb24oaSl7XG5cbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgZWxzZSBpZihpLnVzZXJuYW1lLnRvTG93ZXJDYXNlKCkuaW5kZXhPZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb2NhbGVMb3dlckNhc2UoKSkgPj0gMCl7XG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIGVsc2UgaWYoaS5zZXggPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09IGkuc2V4LnRvTG93ZXJDYXNlKCkpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXJRdWVyeSA9IFwiXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZmlsdGVyMk1hdGNoZXMgPSBmdW5jdGlvbihpKXtcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgPT09IFwiXCIpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKGkgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKGkuemlwY29kZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSA9PSBpLnppcGNvZGUpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkudG9Mb3dlckNhc2UoKSA9PT0gXCJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvL2h0dHA6Ly93d3cuZmFsc2Vwb3NpdGl2ZXMuY29tL2luZGV4LnBocC8yMDA5LzEyLzAxL2phdmFzY3JpcHQtZnVuY3Rpb24tdG8tZ2V0LXRoZS1pbnRlcnNlY3Qtb2YtMi1hcnJheXMvXG4gICAgICAgICRzY29wZS5pbnRlcnNlY3QgPSBmdW5jdGlvbihhcnIxLCBhcnIyKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgciA9IFtdLCBvID0ge30sIGwgPSBhcnIyLmxlbmd0aCwgaSwgdjtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICBvW2FycjJbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGwgPSBhcnIxLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2ID0gYXJyMVtpXTtcbiAgICAgICAgICAgICAgICBpZiAodiBpbiBvKSB7XG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93TWF0Y2hlcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcbiAgICAgICAgICAgICBpZigkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUgIT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAgdXNlcm5hbWUgPSAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWU7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIHZhciB1c2VybmFtZTtcblxuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJQcm9maWxlcyA9IHJlc3BvbnNlLnVzZXJsaXN0O1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnJQcm9maWxlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSAwOyBpaSA8IGFyclByb2ZpbGVzLmxlbmd0aDsgaWkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2lpXS51c2VybmFtZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaWksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBkYlNlcnZpY2UuZ2V0SXRlbSh1c2VybmFtZSkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHVzZXIgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaT1hcnJQcm9maWxlcy5sZW5ndGg7IGktLTspe1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2FtZUludGVyZXN0cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUludGVyZXN0cyA9ICRzY29wZS5pbnRlcnNlY3QodXNlci5pbnRlcmVzdHMsIGFyclByb2ZpbGVzW2ldLmludGVyZXN0cyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNhbWVJbnRlcmVzdHMubGVuZ3RoICE9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJQcm9maWxlc1tpXS5kZWxldGVkID09PSBmYWxzZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJQcm9maWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hcnJNYXRjaGVzID0gYXJyTWF0Y2hlcztcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaEluTWF0Y2hlcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgIT09IFwiXCIpe1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclppcGNvZGVXaXRoTWF0Y2hlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9ICRzY29wZS5hcnJNYXRjaGVzLmxlbmd0aDsgaTxsOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hcnJNYXRjaGVzW2ldLnppcGNvZGUgPT0gJHNjb3BlLmZpbHRlcjJRdWVyeSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJaaXBjb2RlV2l0aE1hdGNoZXMucHVzaCgkc2NvcGUuYXJyTWF0Y2hlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJNYXRjaGVzID0gYXJyWmlwY29kZVdpdGhNYXRjaGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd01hdGNoZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJNYXRjaGVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJkYlNlcnZpY2VcIiwgTWF0Y2hlc0NvbnRyb2xsZXJdKTtcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiAyMC8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgUHJvZmlsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbikge1xuXG4gICAgICAgIHZhciBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICRzY29wZS5zdGFydENoYXQgPSBmdW5jdGlvbihjdXJyZW50VXNlciwgY29udGFjdGVkVXNlcil7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KFwiL2NoYXRcIiwge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgICAgICAgICAgICBjb250YWN0ZWRVc2VyOmNvbnRhY3RlZFVzZXJcblxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IGRhdGEuY3VycmVudFVzZXI7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyID0gZGF0YS5jb250YWN0ZWRVc2VyO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50dXNlcm5hbWVcIiwgJHJvb3RTY29wZS5jdXJyZW50VXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb250YWN0ZWR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG5cbiAgICAgICAgJHNjb3BlLnNob3dEaXYgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOnRydWV9O1xuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcblxuICAgICAgICAgICAgaWYoY2xpY2tzT25CdG4gPiAxKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZURpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93UHJvZmlsZXMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcbiAgICAgICAgICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJQcm9maWxlcyA9IHJlc3BvbnNlLnVzZXJsaXN0O1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IGFyclByb2ZpbGVzLmxlbmd0aDsgaS0tOyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSBhcnJQcm9maWxlcy5sZW5ndGg7IGlpLS07KXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyclByb2ZpbGVzID0gYXJyUHJvZmlsZXM7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlcjJRdWVyeSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJQcm9maWxlcyA9IGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBlbHNlIGlmKGkudXNlcm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT0gaS5zZXgudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09IFwibm9maWx0ZXJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZWFyY2hJblByb2ZpbGVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSAhPT0gXCJcIil7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyWmlwY29kZVdpdGhQcm9maWxlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMCwgbCA9ICRzY29wZS5hcnJQcm9maWxlcy5sZW5ndGg7IGk8bDsgaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICBpZigkc2NvcGUuYXJyUHJvZmlsZXNbaV0uemlwY29kZSA9PSAkc2NvcGUuZmlsdGVyMlF1ZXJ5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclppcGNvZGVXaXRoUHJvZmlsZXMucHVzaCgkc2NvcGUuYXJyUHJvZmlsZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyUHJvZmlsZXMgPSBhcnJaaXBjb2RlV2l0aFByb2ZpbGVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuc2hvd1Byb2ZpbGVzKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIlByb2ZpbGVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCIkcm9vdFNjb3BlXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiZGJTZXJ2aWNlXCIsXCIkaHR0cFwiLCBcIiRsb2NhdGlvblwiLCBQcm9maWxlc0NvbnRyb2xsZXJdKTtcblxufSkoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
=======
!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,r,i){var n=e(i.fileModel),o=n.assign;r.bind("change",function(){t.$apply(function(){o(t,r[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,r){var i=new FormData;i.append("file",t),e.post(r,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,r,i,n,o,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=r,this.number=i,this.description=n,this.dateFrom=o,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),r=function(r,i){t.on(r,function(){var r=arguments;e.$apply(function(){i.apply(t,r)})})},i=function(r,i,n){t.emit(r,i,function(){var r=arguments;e.$apply(function(){n.apply(t,r)})})};return{on:r,emit:i,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="http://localhost:3000/api/"+t;return e.get(r).then(function(e){return e.data})},r=function(t,r){var i="http://localhost:3000/api/"+t+"/"+r;return e.get(i).then(function(e){return e.data})},i=function(t,r){var i="http://localhost:3000/api/"+t+"/userdetail/"+r;return e.get(i).then(function(e){return e.data})},n=function(t,r){var i="http://localhost:3000/api/"+t+"/userdelete/"+r;return e.get(i).then(function(e){return e.data})},o=function(t){return e.get("/user").then(function(e){return e.data})},s=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydetail/"+r;return e.get(i).then(function(e){return e.data})},a=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydelete/"+r;return e.get(i).then(function(e){return e.data})},c=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:r,getItem:o,getDetailsUser:i,deleteUser:n,getDetailsActivity:s,getNoiseWords:c,deleteActivity:a}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(null),200==r.status){for(var i=JSON.parse(r.responseText),n=[],o=[],s=0;s<i.length;s++){var a={user:i[s].user,matches:i[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&o.push(n[c].matches)}var u=o[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,r,i,n,o,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var i=e.split(" "),n="";r.getNoiseWords().then(function(e){for(var r=e.noisewords,o=i.length;o--;)-1==a(i[o].toLowerCase(),r)&&(n+=i[o],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var r=e+"";r.length<2?(r="0"+r,e=r.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,r){l(e,function(t,r){e=r,t&&console.log(t)}),l(t,function(e,r){t=r,e&&console.log(e)}),e.isEmpty||t.isEmpty?r("No number.",null):r(null,e,t)}function h(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function f(e){for(var t=e[0],r=0,i=1;i<e.length;i++)e[i].matches.length>t.matches.length&&(r=i,t=e[i]);return r}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;m(t,e)}function m(e,r){var i=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,o=t.arrDetailsActivity.zipcode,s=i+" "+n+", "+o;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){r.setCenter(e[0].geometry.location);var i="../../images/marker.png";new google.maps.Marker({map:r,position:e[0].geometry.location,icon:i})}else alert("Geocode was not successful for the following reason: "+t)})}function g(){var e=document.getElementsByName("ActivityForm")[0];e.reset()}t.interestedAct=!0,t.nameButton="Interested",t.getActivities=function(){r.getCollection("activities").then(function(r){for(var i=r.activitielist,n=[],o=i.length;o--;)new Date(i[o].untilDate).getTime()>=new Date(e).getTime()&&(i[o].deleted===!1?(t.deleted=!1,n.push(i[o])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,r){var i,n=this+"",o=-1;if("string"==typeof e){if(!r)return this.split(e).join(t);for(i=e.toLowerCase();-1!==(o=n.toLowerCase().indexOf(e,o>=0?o+t.length:0));)n=n.substring(0,o)+t+n.substring(o+e.length)}return n},t.addActivity=function(){var e=this.activityName,r=this.street,n=this.number,o=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),h=this.startTimeHour,f=this.startTimeMin,d=this.endTimeHour,m=this.endTimeMin,p=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,U=this.dateUntilMonth,A=this.dateUntilYear.toString();u(p,v,function(e,t,r){p=t,v=r,e&&console.log(e)}),u(y,U,function(e,t,r){y=t,U=r,e&&console.log(e)}),new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()?new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==p&&void 0!==h&&void 0!==f&&void 0!==A&&void 0!==U&&void 0!==y&&void 0!==d&&void 0!==m?60>f&&25>h?(l(h,function(e,t){h=t,e&&console.log(e)}),l(f,function(e,t){f=t,e&&console.log(e)}),2===f.length&&2===h.length?60>m&&24>d?(l(d,function(e,r){d=r,e&&(t.error=e)}),l(m,function(e,r){m=r,e&&(t.error=e)}),2===m.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()&&(new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)t.error=c;else{var u="/api/activities/addactivity";i.post(u,{activityName:e,street:r,number:n,zipcode:o,description:s,dateFrom:w+"-"+v+"-"+p+" "+h+":"+f,dateUntil:A+"-"+U+"-"+y+" "+d+":"+m,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),g()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct":t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){r.getDetailsActivity("activities",o.activityName).then(function(r){t.arrDetailsActivity=r.activity,d();for(var i=t.arrDetailsActivity.matches.length;i--;)t.arrDetailsActivity.matches[i]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,r,n){var o="",s=t.interestedAct;s!==!1?(o="/api/activities/interested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!1,t.nameButton="Not interested",t.error=e.error})):(o="/api/activities/deleteinterested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!0,t.nameButton="Interested",t.error=e.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);o.sort(h);for(var a=[],c=i;c--;)a.push(o[c]);for(var l=[],u=a.length;u--;){var f=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",l);void 0===a[u]&&a.splice(u,1,f)}t.arrMostRecentActivities=a})},t.getMostPopularActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);for(var a=[],c=0;i>c;c++){var l=f(o);a.push(o[l]),o.splice(l,1)}for(var u=[],h=a.length;h--;){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===a[h]&&a.splice(h,1,d)}t.arrMostPopularActivities=a})},t.deleteActivity=function(e){r.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";function e(e,t,r){e.init=function(){},r.emit("halloNikita"),e.messages=[],e.message="",e.sendMessage=function(){console.log(this.message);var i={user:t.currentUser,text:this.message,receiver:t.contactedUser.username};e.messages.push(i),r.emit("message",i)},r.on("message_receiver",function(t){console.log("JE BENT ER!"),console.log(t.message),console.log(t.sender),e.messages.push({text:t.message,user:t.sender})})}angular.module("app").controller("ChatController",["$scope","$rootScope","chatService",e])}(),function(){"use strict";var e=function(e,t){var r=0;e.showDiv=function(){e.filter={showFilter:!0},r++,r>1&&(e.filter={showFilter:!1},r=0)},e.hideDiv=function(){r=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.intersect=function(e,t){var r,i,n=[],o={},s=t.length;for(r=0;s>r;r++)o[t[r]]=!0;for(s=e.length,r=0;s>r;r++)i=e[r],i in o&&n.push(i);return n},e.showMatches=function(){var r;r=localStorage.getItem("username"),t.getCollection("users").then(function(i){for(var n=i.userlist,o=0;o<n.length;o++)n[o].username===r&&n.splice(o,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(r).then(function(t){for(var r=t,i=[],o=n.length;o--;){var s=[];s=e.intersect(r.interests,n[o].interests),0!==s.length&&n[o].deleted===!1&&i.push(n[o])}e.arrMatches=i})})}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,r,i,n,o){var s=0;e.startChat=function(r,i){n.post("/chat",{currentUser:r,contactedUser:i}).success(function(r){e.error=r.error,t.currentUser=r.currentUser,t.contactedUser=r.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),o.path(r.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),i.getCollection("users").then(function(r){for(var i=r.userlist,n=i.length;n--;)i[n].username===t&&i.splice(n,1);for(var o=i.length;o--;)"admin"===i[o].username&&i.splice(o,1);e.arrProfiles=i})},e.sortProperty="title",e.filterQuery="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,r,i){e.getUsers=function(){i.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var r=e.arrUsers.length;r--;)e.arrUsers[r].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){i.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){i.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,i=e.user.firstname,n=e.user.lastname,o=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";r.post(l,{username:t,firstname:i,lastname:n,birthdate:o,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t})},e.getUserByID=function(){i.getItem("user").then(function(t){e.userProfile=t})}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,r,i,n,o){t.login=function(){i.post("/login",{username:this.username,password:this.password}).success(function(e){r.user=e.user,t.error=e.error,o.emit("newUser",r.user.username),void 0!==r.user&&localStorage.setItem("username",r.user.username),n.path(e.redirect)})},t.interests=["Jazz","Hiphop","New wave","Traveling","Party"],t.lst=[],t.change=function(){t.lst.push("2")},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude}}function r(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){i.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:this.birthdate,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})}},r=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},i=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(" "!==t)if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location","chatService",t]).controller("signupController",["$scope",r]).controller("editableCheckboxController",["$scope",i])}(),function(){"use strict";var e=function(e,t,r,i){r.get("/user").success(function(r){e.user=r,t.user=r,"admin"==r.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=r.username&&void 0!==r.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===r.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkFjdGl2aXR5LmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwiZ2V0SXRlbSIsIml0ZW0iLCJnZXREZXRhaWxzQWN0aXZpdHkiLCJhY3Rpdml0eW5hbWUiLCJkZWxldGVBY3Rpdml0eSIsImFjdGl2aXR5SWQiLCJnZXROb2lzZVdvcmRzIiwibWF0Y2hlc1NlcnZpY2UiLCJnZXRNYXRjaGVzIiwibmFtZVVzZXIiLCJsb2NhbFVybCIsInhtbEh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYXJyIiwiYXJyTWF0Y2hlcyIsImkiLCJsZW5ndGgiLCJvYmoiLCJwdXNoIiwiaWkiLCJpbmRleCIsImluZGV4T2YiLCJhcnJNYXRjaGVzQnlVc2VyIiwiZGF0ZVRpbWVOb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJBY3Rpdml0aWVzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImlzSW5BcnJheSIsInZhbHVlIiwiYXJyYXkiLCJnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbiIsInJlcGxhY2VBbGwiLCJ3b3JkcyIsInNwbGl0Iiwia2V5V29yZHMiLCJub2lzZVdvcmRzIiwibm9pc2V3b3JkcyIsInRvTG93ZXJDYXNlIiwiaXNFbXB0eSIsInN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzIiwib3V0cHV0IiwidG9TdHJpbmciLCJmdWxsRGF0ZSIsIm51bWJlcjIiLCJudW1iZXJUb1N0cmluZyIsInJlY2VudEZpcnN0IiwiYSIsImIiLCJwb3B1bGFyRmlyc3QiLCJtYXgiLCJtYXhJbmRleCIsImluaXRtYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZUFkZHJlc3MiLCJyZXN1bHRzTWFwIiwiYXJyRGV0YWlsc0FjdGl2aXR5IiwiYWRkcmVzcyIsImdlb2NvZGUiLCJyZXN1bHRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsInNldENlbnRlciIsImdlb21ldHJ5IiwiaW1hZ2UiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhbGVydCIsInJlc2V0Rm9ybSIsImZybSIsImdldEVsZW1lbnRzQnlOYW1lIiwicmVzZXQiLCJpbnRlcmVzdGVkQWN0IiwibmFtZUJ1dHRvbiIsImdldEFjdGl2aXRpZXMiLCJhcnJUZW1wIiwiYWN0aXZpdGllbGlzdCIsImFyckFjdHMiLCJ1bnRpbERhdGUiLCJnZXRUaW1lIiwiZGVsZXRlZCIsImFyckFjdGl2aXRpZXMiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJ0b2tlbiIsIm5ld1Rva2VuIiwiaWdub3JlQ2FzZSIsIl90b2tlbiIsInN0ciIsImpvaW4iLCJhZGRBY3Rpdml0eSIsImNvbW1lbnQiLCJzdGFydFRpbWVIb3VyIiwic3RhcnRUaW1lTWluIiwiZW5kVGltZUhvdXIiLCJlbmRUaW1lTWluIiwiZGF0ZUZyb21EYXkiLCJkYXRlRnJvbU1vbnRoIiwiZGF0ZUZyb21ZZWFyIiwiZGF0ZVVudGlsRGF5IiwiZGF0ZVVudGlsTW9udGgiLCJkYXRlVW50aWxZZWFyIiwiZGF0ZUZyb21kYXlTdHJpbmciLCJkYXRlRnJvbU1vbnRoU3RyaW5nIiwiZGF0ZVVudGlsRGF5U3RyaW5nIiwiZGF0ZVVudGlsTW9udGhTdHJpbmciLCJzdGFydFRpbWVIb3VyU3RyaW5nIiwic3RhcnRUaW1lTWluU3RyaW5nIiwiZW5kVGltZUhvdXJTdHJpbmciLCJlbmRUaW1lTWluU3RyaW5nIiwiZ2V0RGV0YWlsQWN0aXZpdHkiLCJjdXJyZW50VXNlciIsImFjdGl2aXR5IiwiaW50ZXJlc3RlZCIsImludGVyZXN0ZWRVc2VyIiwiY3JlYXRlclVzZXIiLCJzaG93QWN0aXZpdGllc09uSG9tZVBhZ2UiLCJnZXRNb3N0UmVjZW50QWN0aXZpdGllcyIsImdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyIsIm51bWJlck9mQWN0aXZpdGllcyIsImFyckFsbEFjdGl2aXRpZXMiLCJzb3J0IiwiYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMiLCJpaWkiLCJkdW1teUFjdGl2aXR5Iiwic3BsaWNlIiwiYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwiaiIsImluZGV4TW9zdFBvcCIsImluZm9kZWxldGVkQWN0aXZpdHkiLCJDaGF0Q29udHJvbGxlciIsImluaXQiLCJtZXNzYWdlcyIsIm1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsInRleHQiLCJyZWNlaXZlciIsImNvbnRhY3RlZFVzZXIiLCJzZW5kZXIiLCJNYXRjaGVzQ29udHJvbGxlciIsImNsaWNrc09uQnRuIiwic2hvd0RpdiIsImZpbHRlciIsInNob3dGaWx0ZXIiLCJoaWRlRGl2Iiwic29ydFByb3BlcnR5IiwiZmlsdGVyUXVlcnkiLCJmaWx0ZXJNYXRjaGVzIiwic2V4IiwiaW50ZXJzZWN0IiwiYXJyMSIsImFycjIiLCJ2IiwiciIsIm8iLCJsIiwic2hvd01hdGNoZXMiLCJsb2NhbFN0b3JhZ2UiLCJhcnJQcm9maWxlcyIsInVzZXJsaXN0Iiwic2FtZUludGVyZXN0cyIsImludGVyZXN0cyIsIlByb2ZpbGVzQ29udHJvbGxlciIsInN0YXJ0Q2hhdCIsInNldEl0ZW0iLCJwYXRoIiwicmVkaXJlY3QiLCJzaG93UHJvZmlsZXMiLCJmaWx0ZXJQcm9maWxlcyIsIlVzZXJzQ29udHJvbGxlciIsImdldFVzZXJzIiwiYXJyVXNlcnMiLCJnZXREZXRhaWxVc2VyIiwidXNlckRldGFpbHMiLCJjb3JyZWN0dXNlciIsImluZm9kZWxldGVkVXNlciIsInVwZGF0ZVVzZXIiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImJpcnRoZGF0ZSIsImJpb2dyYXBoeSIsImluZm9ybWF0aW9uIiwiZ2V0VXNlckJ5SUQiLCJ1c2VyUHJvZmlsZSIsInNlbGVjdGVkSW50ZXJlc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJsb2dpbiIsInBhc3N3b3JkIiwibHN0IiwiY2hhbmdlIiwic3RhdGVDaGFuZ2VkIiwicUlkIiwiZ2VvbG9jYXRpb24iLCJnZXRMb2NhdGlvbiIsInN1Y2Nlc3NDYWxsYmFjayIsImxhdGl0dWRlIiwiY29vcmRzIiwibG9uZ2l0dWRlIiwiZXJyb3JDYWxsYmFjayIsImNvZGUiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlBPU0lUSU9OX1VOQVZBSUxBQkxFIiwiVElNRU9VVCIsIlVOS05PV05fRVJST1IiLCJuYXZpZ2F0b3IiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJtYXhpbXVtQWdlIiwicmVnaXN0ZXIiLCJzaWdudXBDb250cm9sbGVyIiwiY2F0ZWdvcmllcyIsIm5ld0NhdGVnb3J5Iiwic2F2ZUNhdGVnb3J5IiwiZWRpdGFibGVDaGVja2JveENvbnRyb2xsZXIiLCJjYXRlZ29yeSIsInNob3dMYWJlbCIsInNob3dUZXh0Ym94IiwiZWRpdCIsImlzQ2hlY2tlZCIsInVzZXJDb250cm9sbGVyIiwiYXV0aCIsImlzQXV0aCIsImlzQWRtaW4iXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsR0FBQUEsR0FBQUMsUUFBQUMsT0FBQSxPQUFBLFdBQ0FGLEdBQUFHLFFBQ0EsaUJBQ0EsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUFBQyxZQUFBLHNCQUFBRCxLQUFBLFdBQUFDLFlBQUEsc0JBQUFELEtBQUEsU0FBQUMsWUFBQSxzQkFBQUQsS0FBQSxZQUFBQyxZQUFBLHlCQUFBRCxLQUFBLFVBQUFDLFlBQUEsdUJBQUFELEtBQUEsZUFBQUMsWUFBQSw0QkFBQUQsS0FBQSxVQUFBQyxZQUFBLHVCQUFBRCxLQUFBLG1CQUFBQyxZQUFBLGdDQUFBRCxLQUFBLGNBQUFDLFlBQUEsMkJBQUFELEtBQUEsMEJBQ0FDLFlBQUEsMkJBQ0FD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TSxFQUFBME0sV0FBQSxFQUNBMU0sRUFBQTJNLGFBQUEsR0FFQTNNLEVBQUE2TSxVQUFBLFNBQUExQixHQUNBLEdBQUEsTUFBQUEsRUFDQSxHQUFBLEtBQUFQLEVBQUFuTCxRQUFBMEwsR0FBQSxDQUNBLEdBQUEzTCxHQUFBb0wsRUFBQW5MLFFBQUEwTCxFQUNBM0wsR0FBQSxJQUNBb0wsRUFBQTNELE9BQUF6SCxFQUFBLE9BR0FvTCxHQUFBdEwsS0FBQTZMLElBSUFuTCxFQUFBa0wsYUFBQSxTQUFBQyxLQUdBNVMsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLG1CQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0EsY0FDQWdTLElBQ0FoUyxXQUFBLG9CQUNBLFNBQ0F1VCxJQUNBdlQsV0FBQSw4QkFDQSxTQUNBMlQsT0FNQSxXQUNBLFlBQ0EsSUFBQU0sR0FBQSxTQUFBOU0sRUFBQWpILEVBQUFzQixFQUFBNEYsR0FDQTVGLEVBQUFrRCxJQUFBLFNBQUFwQyxRQUFBLFNBQUE4QixHQUNBK0MsRUFBQWhILEtBQUFpRSxFQUNBbEUsRUFBQUMsS0FBQWlFLEVBQ0EsU0FBQUEsRUFBQWpCLFNBQ0FnRSxFQUFBK00sTUFDQUMsUUFBQSxFQUNBQyxTQUFBLEdBRUEsU0FBQWhRLEVBQUFqQixVQUFBZCxTQUFBK0IsRUFBQWpCLFNDbklBZ0UsRUFBQStNLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBL1IsU0FBQStCLEVBQUFqQixXQUNBZ0UsRUFBQStNLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxNQVNBMVUsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLGtCQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0FpVSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWFydGhlIG9uIDEwLzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xyXG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlcil7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob21lLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9zaWdudXBcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9zaWdudXAuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2hvbWVcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2hvbWUuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL21hdGNoZXNcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL21hdGNoZXMuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2hvd3RvXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob3dUby5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdGllc1wiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvYWN0aXZpdGllcy5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWRtaW5cIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2FkbWluLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9zZWFyY2hwcm9maWxlc1wiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3Mvc2VhcmNoUHJvZmlsZXMuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL215cHJvZmlsZVwiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvbXlQcm9maWxlLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi91c2VyZGV0YWlscy86dXNlcm5hbWVcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNVc2VyLmh0bWxcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2RldGFpbHN1c2VyXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzVXNlci5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdHlkZXRhaWxzLzphY3Rpdml0eU5hbWVcIiwge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzQWN0aXZpdHkuaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBY3Rpdml0aWVzQ29udHJvbGxlclwiXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9jaGF0XCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9jaGF0Lmh0bWxcIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICRyb290U2NvcGUudXNlciA9IHt9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLmRpcmVjdGl2ZSgnbmdFbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICBlbGVtZW50LmJpbmQoXCJrZXlkb3duIGtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nRW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGFwcC5kaXJlY3RpdmUoJ2ZpbGVNb2RlbCcsIFsnJHBhcnNlJywgZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZpbGVNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxTZXR0ZXIgPSBtb2RlbC5hc3NpZ247XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRlcihzY29wZSwgZWxlbWVudFswXS5maWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgYXBwLnNlcnZpY2UoJ2ZpbGVVcGxvYWQnLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XHJcbiAgICAgICAgdGhpcy51cGxvYWRGaWxlVG9VcmwgPSBmdW5jdGlvbihmaWxlLCB1cGxvYWRVcmwpe1xyXG4gICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QodXBsb2FkVXJsLCBmZCwge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG5cclxuICAgIGFwcC5kaXJlY3RpdmUoJ2VkaXRhYmxlQ2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2VkaXRhYmxlY2hlY2tib3guaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDE1LzEyLzE1LlxyXG4gKi9cclxudmFyIEFjdGl2aXR5ID0gZnVuY3Rpb24obmFtZSwgemlwY29kZSwgc3RyZWV0LCBudW1iZXIsIGRlc2NyaXB0aW9uLCBkYXRlRnJvbSwgZGF0ZVVudGlsLCB0aW1lc3RhbXAsIHVzZXJuYW1lLCBtYXRjaGVzKXtcclxuICAgIHRoaXMuYWN0aXZpdHlOYW1lID0gbmFtZTtcclxuICAgIHRoaXMuemlwY29kZSA9IHppcGNvZGU7XHJcbiAgICB0aGlzLnN0cmVldCA9IHN0cmVldDtcclxuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5kYXRlRnJvbSA9IGRhdGVGcm9tO1xyXG4gICAgdGhpcy5kYXRlVW50aWwgPSBkYXRlVW50aWw7XHJcbiAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgIHRoaXMubWF0Y2hlcyA9IG1hdGNoZXM7XHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgY2hhdFNlcnZpY2UgPSBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcclxuXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb246IG9uLFxyXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxyXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJjaGF0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIGNoYXRTZXJ2aWNlXSk7XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gMTUvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBkYlNlcnZpY2UgPSBmdW5jdGlvbiAoJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIGdldENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0QnlJRCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL1wiICsgaWQ7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXREZXRhaWxzVXNlciA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCB1c2VybmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL3VzZXJkZXRhaWwvXCIgKyB1c2VybmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRlbGV0ZVVzZXIgPSAgZnVuY3Rpb24gKGNvbGxlY3Rpb24sIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvdXNlcmRlbGV0ZS9cIiArIHVzZXJuYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHZhciBnZXRJdGVtID0gZnVuY3Rpb24oaXRlbSl7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgaXRlbTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL3VzZXInKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RGV0YWlsc0FjdGl2aXR5ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGFjdGl2aXR5bmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL2FjdGl2aXR5ZGV0YWlsL1wiICsgYWN0aXZpdHluYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRlbGV0ZUFjdGl2aXR5ID0gIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBhY3Rpdml0eUlkKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZWxldGUvXCIgKyBhY3Rpdml0eUlkO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHZhciBnZXROb2lzZVdvcmRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbm9pc2V3b3Jkcy5qc29uXCI7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcclxuICAgICAgICByZXR1cm57XHJcblxyXG4gICAgICAgICAgICBnZXRDb2xsZWN0aW9uOmdldENvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgIGdldEJ5SUQ6Z2V0QnlJRCxcclxuICAgICAgICAgICAgZ2V0SXRlbTpnZXRJdGVtLFxyXG4gICAgICAgICAgICBnZXREZXRhaWxzVXNlcjogZ2V0RGV0YWlsc1VzZXIsXHJcbiAgICAgICAgICAgIGRlbGV0ZVVzZXI6IGRlbGV0ZVVzZXIsXHJcbiAgICAgICAgICAgIGdldERldGFpbHNBY3Rpdml0eTogZ2V0RGV0YWlsc0FjdGl2aXR5LFxyXG4gICAgICAgICAgICBnZXROb2lzZVdvcmRzOiBnZXROb2lzZVdvcmRzLFxyXG4gICAgICAgICAgICBkZWxldGVBY3Rpdml0eTogZGVsZXRlQWN0aXZpdHlcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJkYlNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgZGJTZXJ2aWNlXSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc1NlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRNYXRjaGVzID0gZnVuY3Rpb24gKG5hbWVVc2VyKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFiZWxVUkwgPSBcInRvZ2V0aGVyXCI7XHJcbiAgICAgICAgICAgIHZhciBsb2NhbFVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbWF0Y2hlcy5qc29uXCI7XHJcbiAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCBsb2NhbFVybCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaFVzZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hJbnRlcmVzdHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVzZXJcIjogZGF0YVtpXS51c2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1hdGNoZXNcIjpkYXRhW2ldLm1hdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmopO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gMDsgaWk8YXJyLmxlbmd0aDsgaWkrKyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGFycltpaV0udXNlci5pbmRleE9mKG5hbWVVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJbaWldLm1hdGNoZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5kZXg6IFwiK2luZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFycik7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFyck1hdGNoZXNbMF0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlc0J5VXNlciA9IGFyck1hdGNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQWFudGFsIG1hdGNoZXM6IFwiICsgYXJyTWF0Y2hlc0J5VXNlci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJNYXRjaGVzQnlVc2VyO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpaSA9IDA7IGlpaTxhcnJNYXRjaGVzWzBdLmxlbmd0aDsgaWlpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hVc2VyID0gYXJyTWF0Y2hlc1swXVtpaWldLnVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoSW50ZXJlc3RzID0gYXJyTWF0Y2hlc1swXVtpaWldLmludGVyZXN0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hVc2Vycy5wdXNoKG1hdGNoVXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hJbnRlcmVzdHMucHVzaChtYXRjaEludGVyZXN0cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWF0Y2hVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hdGNoSW50ZXJlc3RzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJNYXRjaFVzZXJzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyck1hdGNoSW50ZXJlc3RzKTtcclxuICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcclxuICAgICAgICByZXR1cm57XHJcblxyXG4gICAgICAgICAgICBnZXRNYXRjaGVzOmdldE1hdGNoZXMsXHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwibWF0Y2hlc1NlcnZpY2VcIiwgW21hdGNoZXNTZXJ2aWNlXSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBkYXRlVGltZU5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApICsgXCIgXCIgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxNik7XHJcblxyXG4gICAgdmFyIEFjdGl2aXRpZXNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSwgZGJTZXJ2aWNlLCAkaHR0cCwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRyb3V0ZSkge1xyXG4gICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiSW50ZXJlc3RlZFwiO1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhcnJUZW1wID0gcmVzcG9uc2UuYWN0aXZpdGllbGlzdDtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJBY3RzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDtpLS07KXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoYXJyVGVtcFtpXS51bnRpbERhdGUpLmdldFRpbWUoKSA+PSBuZXcgRGF0ZShkYXRlVGltZU5vdykuZ2V0VGltZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFyclRlbXBbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyckFjdHMucHVzaChhcnJUZW1wW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyckFjdGl2aXRpZXMgPSBhcnJBY3RzO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2VBbGwgPSBmdW5jdGlvbiAodG9rZW4sIG5ld1Rva2VuLCBpZ25vcmVDYXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdG9rZW47XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSB0aGlzICsgXCJcIjtcclxuICAgICAgICAgICAgdmFyIGkgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gPT09IFwic3RyaW5nXCIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlQ2FzZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfdG9rZW4gPSB0b2tlbi50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gc3RyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLCBpID49IDAgPyBpICsgbmV3VG9rZW4ubGVuZ3RoIDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApICkgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGkpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rva2VuICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ci5zdWJzdHJpbmcoaSArIHRva2VuLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQodG9rZW4pLmpvaW4obmV3VG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzSW5BcnJheSh2YWx1ZSwgYXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJy4nLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnLCcsICcnKTtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCc/JywgJycpO1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJyEnLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnXCInLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbChcIidcIiwgJycpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdvcmRzID0gZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICB2YXIga2V5V29yZHMgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldE5vaXNlV29yZHMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBub2lzZVdvcmRzID0gcmVzcG9uc2Uubm9pc2V3b3JkcztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gd29yZHMubGVuZ3RoOyBpLS07KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luQXJyYXkod29yZHNbaV0udG9Mb3dlckNhc2UoKSwgbm9pc2VXb3JkcykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5V29yZHMgKz0gd29yZHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVdvcmRzICs9IFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBrZXlXb3JkcztcclxuICAgICAgICAgICAgICAgIGlmICgha2V5V29yZHMuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGtleVdvcmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIGtleXdvcmRzIGZvdW5kLlwiLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gb3V0cHV0LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbnVtYmVyLlwiLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmdWxsRGF0ZShudW1iZXIsIG51bWJlcjIsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKG51bWJlciwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyVG9TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyMiwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyMiA9IG51bWJlclRvU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5ICYmICFudW1iZXIyLmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bWJlciwgbnVtYmVyMik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soXCJObyBudW1iZXIuXCIsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkQWN0aXZpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpdml0eU5hbWUgPSB0aGlzLmFjdGl2aXR5TmFtZTtcclxuICAgICAgICAgICAgdmFyIHN0cmVldCA9IHRoaXMuc3RyZWV0O1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5udW1iZXI7XHJcbiAgICAgICAgICAgIHZhciB6aXBjb2RlID0gdGhpcy56aXBjb2RlO1xyXG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLmNvbW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IHRoaXMuZGF0ZUZyb207XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWwgPSB0aGlzLmRhdGVVbnRpbDtcclxuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lSG91ciA9IHRoaXMuc3RhcnRUaW1lSG91cjtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZU1pbiA9IHRoaXMuc3RhcnRUaW1lTWluO1xyXG4gICAgICAgICAgICB2YXIgZW5kVGltZUhvdXIgPSB0aGlzLmVuZFRpbWVIb3VyO1xyXG4gICAgICAgICAgICB2YXIgZW5kVGltZU1pbiA9IHRoaXMuZW5kVGltZU1pbjtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tRGF5ID0gdGhpcy5kYXRlRnJvbURheTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tTW9udGggPSB0aGlzLmRhdGVGcm9tTW9udGg7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVllYXIgPSB0aGlzLmRhdGVGcm9tWWVhci50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsRGF5ID0gdGhpcy5kYXRlVW50aWxEYXk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxNb250aCA9IHRoaXMuZGF0ZVVudGlsTW9udGg7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxZZWFyID0gdGhpcy5kYXRlVW50aWxZZWFyLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBmdWxsRGF0ZShkYXRlRnJvbURheSwgZGF0ZUZyb21Nb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlRnJvbWRheVN0cmluZywgZGF0ZUZyb21Nb250aFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUZyb21EYXkgPSBkYXRlRnJvbWRheVN0cmluZztcclxuICAgICAgICAgICAgICAgIGRhdGVGcm9tTW9udGggPSBkYXRlRnJvbU1vbnRoU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZnVsbERhdGUoZGF0ZVVudGlsRGF5LCBkYXRlVW50aWxNb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlVW50aWxEYXlTdHJpbmcsIGRhdGVVbnRpbE1vbnRoU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxEYXkgPSBkYXRlVW50aWxEYXlTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxNb250aCA9IGRhdGVVbnRpbE1vbnRoU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYobmV3IERhdGUoZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluKS5nZXRUaW1lKCkgPD0gbmV3IERhdGUoZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4pLmdldFRpbWUoKSl7XHJcbiAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpe1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGF0ZSB1bnRpbCBjYW4ndCBiZSBiZWZvcmUgdG9kYXlcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSBzdGFydGRhdGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoc3RyZWV0ICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAobnVtYmVyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoemlwY29kZSAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAodGltZXN0YW1wICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21ZZWFyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21Nb250aCAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVGcm9tRGF5ICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoc3RhcnRUaW1lSG91ciAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZU1pbiAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbFllYXIgIT09IHVuZGVmaW5lZCkgJiZcclxuICAgICAgICAgICAgICAgIChkYXRlVW50aWxNb250aCAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbERheSAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGVuZFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZW5kVGltZU1pbiAhPT0gdW5kZWZpbmVkKSkge1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbiA8IDYwICYmIHN0YXJ0VGltZUhvdXIgPCAyNSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhzdGFydFRpbWVIb3VyLCBmdW5jdGlvbiAoZXJyb3IsIHN0YXJ0VGltZUhvdXJTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lSG91ciA9IHN0YXJ0VGltZUhvdXJTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoc3RhcnRUaW1lTWluLCBmdW5jdGlvbiAoZXJyb3IsIHN0YXJ0VGltZU1pblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVNaW4gPSBzdGFydFRpbWVNaW5TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbi5sZW5ndGggPT09IDIgJiYgc3RhcnRUaW1lSG91ci5sZW5ndGggPT09IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lTWluIDwgNjAgJiYgZW5kVGltZUhvdXIgPCAyNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoZW5kVGltZUhvdXIsIGZ1bmN0aW9uIChlcnJvciwgZW5kVGltZUhvdXJTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lSG91ciA9IGVuZFRpbWVIb3VyU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKGVuZFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgZW5kVGltZU1pblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVNaW4gPSBlbmRUaW1lTWluU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMiAmJiBlbmRUaW1lSG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVGcm9tWWVhciArIFwiLVwiICsgZGF0ZUZyb21Nb250aCArIFwiLVwiICsgZGF0ZUZyb21EYXkgKyBcIiBcIiArIHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbikuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9hZGRhY3Rpdml0eVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXQ6IHN0cmVldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwY29kZTogemlwY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGcm9tOiBkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVW50aWw6IGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9XCJFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSB0b2RheVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kZGF0ZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kdGltZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9ICdEZSBzdGFydGltZSBsZW5ndGggaXMgbm90IGNvcnJlY3QhISEhICc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTdGFydHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFUlJPUjogQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQuXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0RGV0YWlsQWN0aXZpdHkgPSBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldERldGFpbHNBY3Rpdml0eSgnYWN0aXZpdGllcycsICRyb3V0ZVBhcmFtcy5hY3Rpdml0eU5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5ID0gcmVzcG9uc2UuYWN0aXZpdHk7XHJcbiAgICAgICAgICAgICAgICBpbml0bWFwKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubWF0Y2hlcy5sZW5ndGg7IGktLTspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS5tYXRjaGVzW2ldID09PSBjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ZWRBY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZCA9IGZ1bmN0aW9uIChhY3Rpdml0eU5hbWUsIGludGVyZXN0ZWRVc2VyLCBjcmVhdGVyVXNlcikge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgICAgICAgICAgdmFyIGludGVyZXN0ZWRBY3QgPSAkc2NvcGUuaW50ZXJlc3RlZEFjdDtcclxuICAgICAgICAgICAgaWYgKGludGVyZXN0ZWRBY3QgIT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdXJsID0gXCIvYXBpL2FjdGl2aXRpZXMvaW50ZXJlc3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdGVkVXNlcjogaW50ZXJlc3RlZFVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlclVzZXI6IGNyZWF0ZXJVc2VyXHJcbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIk5vdCBpbnRlcmVzdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHVybCA9IFwiL2FwaS9hY3Rpdml0aWVzL2RlbGV0ZWludGVyZXN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZFVzZXI6IGludGVyZXN0ZWRVc2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZXJVc2VyOiBjcmVhdGVyVXNlclxyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiSW50ZXJlc3RlZFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWNlbnRGaXJzdChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcClcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBvcHVsYXJGaXJzdChhcnIpIHtcclxuICAgICAgICAgICAgdmFyIG1heCA9IGFyclswXTtcclxuICAgICAgICAgICAgdmFyIG1heEluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldLm1hdGNoZXMubGVuZ3RoID4gbWF4Lm1hdGNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4SW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1heEluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dBY3Rpdml0aWVzT25Ib21lUGFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRNb3N0UmVjZW50QWN0aXZpdGllcygpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWxsQWN0aXZpdGllcyA9IFtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYXJyVGVtcC5sZW5ndGg7aS0tOykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMucHVzaChhcnJUZW1wW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zb3J0KHJlY2VudEZpcnN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IG51bWJlck9mQWN0aXZpdGllczsgaWktLTspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5wdXNoKGFyckFsbEFjdGl2aXRpZXNbaWldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLmxlbmd0aDsgaWlpLS07KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnJNb3N0UmVjZW50QWN0aXZpdGllc1tpaWldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMuc3BsaWNlKGlpaSwgMSwgZHVtbXlBY3Rpdml0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RSZWNlbnRBY3Rpdml0aWVzID0gYXJyTW9zdFJlY2VudEFjdGl2aXRpZXM7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWxsQWN0aXZpdGllcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDsgaS0tOykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnB1c2goYXJyVGVtcFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgbnVtYmVyT2ZBY3Rpdml0aWVzOyBqKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhNb3N0UG9wID0gcG9wdWxhckZpcnN0KGFyckFsbEFjdGl2aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcy5wdXNoKGFyckFsbEFjdGl2aXRpZXNbaW5kZXhNb3N0UG9wXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zcGxpY2UoaW5kZXhNb3N0UG9wLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9ICBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMubGVuZ3RoOyBpaWktLTspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR1bW15QWN0aXZpdHkgPSBuZXcgQWN0aXZpdHkoXCJObyBuYW1lXCIsIDg1MDAsIFwiVG9nZXRoZXJcIiwgMiwgXCJubyBkZXNjcmlwdGlvblwiLCBcIjIwMTYtMDEtMDEgMDA6MDFcIiwgXCIyMDE3LTEyLTMxIDIzOjU5XCIsIG5ldyBEYXRlKCksIFwibm8gdXNlcm5hbWVcIiwgbWF0Y2hlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyck1vc3RQb3B1bGFyQWN0aXZpdGllc1tpaWldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuZGVsZXRlQWN0aXZpdHkgPSBmdW5jdGlvbihhY3Rpdml0eUlkKXtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmRlbGV0ZUFjdGl2aXR5KCdhY3Rpdml0aWVzJywgYWN0aXZpdHlJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb2RlbGV0ZWRBY3Rpdml0eSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRtYXAoKXtcclxuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICAgICAgICAgICAgICB6b29tOiA4LFxyXG4gICAgICAgICAgICAgICAgY2VudGVyOiB7bGF0OiA1MC44MTk0ODk0LCBsbmc6IDMuMjU3NzA3Nn1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xyXG5cclxuICAgICAgICAgICAgZ2VvY29kZUFkZHJlc3MoZ2VvY29kZXIsIG1hcCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdlb2NvZGVBZGRyZXNzKGdlb2NvZGVyLCByZXN1bHRzTWFwKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHJlZXQgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5LnN0cmVldDtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubnVtYmVyO1xyXG4gICAgICAgICAgICB2YXIgemlwY29kZSA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkuemlwY29kZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzID0gc3RyZWV0ICsgXCIgXCIgKyBudW1iZXIgKyBcIiwgXCIgKyB6aXBjb2RlOyAvL2hpZXIgYWRkcmVzcyB1aXQgZGIgaW5zdG9wcGVuXHJcblxyXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsnYWRkcmVzcyc6IGFkZHJlc3N9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXAuc2V0Q2VudGVyKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IFwiLi4vLi4vaW1hZ2VzL21hcmtlci5wbmdcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogcmVzdWx0c01hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICAgICAgdmFyIGZybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdBY3Rpdml0eUZvcm0nKVswXTtcclxuICAgICAgICAgICAgZnJtLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQWN0aXZpdGllc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiZGJTZXJ2aWNlXCIsIFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJmaWxlVXBsb2FkXCIsIEFjdGl2aXRpZXNDb250cm9sbGVyXSk7XHJcblxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBOaWtpdGEgb24gNy8wMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q29udHJvbGxlcigkc2NvcGUsJHJvb3RTY29wZSxjaGF0U2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2NoYXRTZXJ2aWNlLmVtaXQoXCJpbml0X3VzZXJzXCIse3VzZXI6JHJvb3RTY29wZS5jdXJyZW50VXNlciwgY29sbGVjdGlvbjpcInVzZXJzXCJ9KTtcclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjaGF0U2VydmljZS5lbWl0KFwiaGFsbG9OaWtpdGFcIik7XHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7dXNlcjogJHJvb3RTY29wZS5jdXJyZW50VXNlcixcclxuICAgICAgICAgICAgICAgIHRleHQ6dGhpcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICByZWNlaXZlcjokcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWV9O1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcclxuICAgICAgICAgICAgY2hhdFNlcnZpY2UuZW1pdChcIm1lc3NhZ2VcIiwgbWVzc2FnZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2hhdFNlcnZpY2Uub24oXCJtZXNzYWdlX3JlY2VpdmVyXCIsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpFIEJFTlQgRVIhXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnNlbmRlcik7XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHt0ZXh0OmRhdGEubWVzc2FnZSwgdXNlcjpkYXRhLnNlbmRlcn0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTb2NrZXQgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgc29ja2V0Lm9uKCdpbml0JywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IGRhdGEudXNlcnM7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldC5vbignc2VuZDptZXNzYWdlJywgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldC5vbignY2hhbmdlOm5hbWUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjaGFuZ2VOYW1lKGRhdGEub2xkTmFtZSwgZGF0YS5uZXdOYW1lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmpvaW4nLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGpvaW5lZC4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMucHVzaChkYXRhLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgYSBtZXNzYWdlIHRvIHRoZSBjb252ZXJzYXRpb24gd2hlbiBhIHVzZXIgZGlzY29ubmVjdHMgb3IgbGVhdmVzIHRoZSByb29tXHJcbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmxlZnQnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGxlZnQuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGksIHVzZXI7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAkc2NvcGUudXNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHVzZXIgPSAkc2NvcGUudXNlcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlciA9PT0gZGF0YS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIGhlbHBlcnNcclxuICAgICAgICAvLyA9PT09PT09PT09PT09PT1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZU5hbWUgPSBmdW5jdGlvbiAob2xkTmFtZSwgbmV3TmFtZSkge1xyXG4gICAgICAgICAgICAvLyByZW5hbWUgdXNlciBpbiBsaXN0IG9mIHVzZXJzXHJcbiAgICAgICAgICAgIHZhciBpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJHNjb3BlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXJzW2ldID09PSBvbGROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzW2ldID0gbmV3TmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdXNlcjogJ2NoYXRyb29tJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBvbGROYW1lICsgJyBpcyBub3cga25vd24gYXMgJyArIG5ld05hbWUgKyAnLidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gTWV0aG9kcyBwdWJsaXNoZWQgdG8gdGhlIHNjb3BlXHJcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgnY2hhbmdlOm5hbWUnLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUubmV3TmFtZVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYW4gZXJyb3IgY2hhbmdpbmcgeW91ciBuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lKCRzY29wZS5uYW1lLCAkc2NvcGUubmV3TmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJHNjb3BlLm5ld05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld05hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ3NlbmQ6bWVzc2FnZScsIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIHRvIG91ciBtb2RlbCBsb2NhbGx5XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJHNjb3BlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBjbGVhciBtZXNzYWdlIGJveFxyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xyXG4gICAgICAgIH07Ki9cclxuICAgIH1cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJDaGF0Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIixcIiRyb290U2NvcGVcIixcImNoYXRTZXJ2aWNlXCIsIENoYXRDb250cm9sbGVyXSk7XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgTWF0Y2hlc0NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIGRiU2VydmljZSkge1xyXG5cclxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcclxuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcclxuXHJcbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xyXG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcclxuICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5maWx0ZXJNYXRjaGVzID0gZnVuY3Rpb24oaSl7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgIGVsc2UgaWYoaS51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PSBpLnNleC50b0xvd2VyQ2FzZSgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vaHR0cDovL3d3dy5mYWxzZXBvc2l0aXZlcy5jb20vaW5kZXgucGhwLzIwMDkvMTIvMDEvamF2YXNjcmlwdC1mdW5jdGlvbi10by1nZXQtdGhlLWludGVyc2VjdC1vZi0yLWFycmF5cy9cclxuICAgICAgICAkc2NvcGUuaW50ZXJzZWN0ID0gZnVuY3Rpb24oYXJyMSwgYXJyMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByID0gW10sIG8gPSB7fSwgbCA9IGFycjIubGVuZ3RoLCBpLCB2O1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvW2FycjJbaV1dID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsID0gYXJyMS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHYgPSBhcnIxW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgaW4gbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dNYXRjaGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgaWYoJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgdXNlcm5hbWUgPSAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lO1xyXG5cclxuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ3VzZXJzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFyclByb2ZpbGVzID0gcmVzcG9uc2UudXNlcmxpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IDA7IGlpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihhcnJQcm9maWxlc1tpaV0udXNlcm5hbWUgPT09IFwiYWRtaW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaWksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZGJTZXJ2aWNlLmdldEl0ZW0odXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaGVzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9YXJyUHJvZmlsZXMubGVuZ3RoOyBpLS07KXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzYW1lSW50ZXJlc3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVJbnRlcmVzdHMgPSAkc2NvcGUuaW50ZXJzZWN0KHVzZXIuaW50ZXJlc3RzLCBhcnJQcm9maWxlc1tpXS5pbnRlcmVzdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2FtZUludGVyZXN0cy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJQcm9maWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyck1hdGNoZXMgPSBhcnJNYXRjaGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIk1hdGNoZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcImRiU2VydmljZVwiLCBNYXRjaGVzQ29udHJvbGxlcl0pO1xyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDIwLzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgUHJvZmlsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbikge1xyXG5cclxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICRzY29wZS5zdGFydENoYXQgPSBmdW5jdGlvbihjdXJyZW50VXNlciwgY29udGFjdGVkVXNlcil7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoXCIvY2hhdFwiLCB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgICAgICBjb250YWN0ZWRVc2VyOmNvbnRhY3RlZFVzZXJcclxuXHJcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gZGF0YS5jdXJyZW50VXNlcjtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuY29udGFjdGVkVXNlciA9IGRhdGEuY29udGFjdGVkVXNlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY29udGFjdGVkdXNlcm5hbWVcIiwgJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyLnVzZXJuYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcclxuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcclxuXHJcbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xyXG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dQcm9maWxlcyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZigkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyUHJvZmlsZXMgPSByZXNwb25zZS51c2VybGlzdDtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IGFyclByb2ZpbGVzLmxlbmd0aDsgaS0tOyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0udXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gYXJyUHJvZmlsZXMubGVuZ3RoOyBpaS0tOyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGlpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyUHJvZmlsZXMgPSBhcnJQcm9maWxlcztcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc29ydFByb3BlcnR5ID0gXCJ0aXRsZVwiO1xyXG4gICAgICAgICRzY29wZS5maWx0ZXJRdWVyeSA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLmZpbHRlclByb2ZpbGVzID0gZnVuY3Rpb24oaSl7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgIGVsc2UgaWYoaS51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PSBpLnNleC50b0xvd2VyQ2FzZSgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJQcm9maWxlc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcImRiU2VydmljZVwiLFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgUHJvZmlsZXNDb250cm9sbGVyXSk7XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
>>>>>>> origin/master
=======
!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,r,i){var n=e(i.fileModel),o=n.assign;r.bind("change",function(){t.$apply(function(){o(t,r[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,r){var i=new FormData;i.append("file",t),e.post(r,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,r,i,n,o,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=r,this.number=i,this.description=n,this.dateFrom=o,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),r=function(r,i){t.on(r,function(){var r=arguments;e.$apply(function(){i.apply(t,r)})})},i=function(r,i,n){t.emit(r,i,function(){var r=arguments;e.$apply(function(){n.apply(t,r)})})};return{on:r,emit:i,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="http://localhost:3000/api/"+t;return e.get(r).then(function(e){return e.data})},r=function(t,r){var i="http://localhost:3000/api/"+t+"/"+r;return e.get(i).then(function(e){return e.data})},i=function(t,r){var i="http://localhost:3000/api/"+t+"/userdetail/"+r;return e.get(i).then(function(e){return e.data})},n=function(t,r){var i="http://localhost:3000/api/"+t+"/userdelete/"+r;return e.get(i).then(function(e){return e.data})},o=function(t){return e.get("/user").then(function(e){return e.data})},s=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydetail/"+r;return e.get(i).then(function(e){return e.data})},a=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydelete/"+r;return e.get(i).then(function(e){return e.data})},c=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:r,getItem:o,getDetailsUser:i,deleteUser:n,getDetailsActivity:s,getNoiseWords:c,deleteActivity:a}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(null),200==r.status){for(var i=JSON.parse(r.responseText),n=[],o=[],s=0;s<i.length;s++){var a={user:i[s].user,matches:i[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&o.push(n[c].matches)}var u=o[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,r,i,n,o,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var i=e.split(" "),n="";r.getNoiseWords().then(function(e){for(var r=e.noisewords,o=i.length;o--;)-1==a(i[o].toLowerCase(),r)&&(n+=i[o],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var r=e+"";r.length<2?(r="0"+r,e=r.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,r){l(e,function(t,r){e=r,t&&console.log(t)}),l(t,function(e,r){t=r,e&&console.log(e)}),e.isEmpty||t.isEmpty?r("No number.",null):r(null,e,t)}function h(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function f(e){for(var t=e[0],r=0,i=1;i<e.length;i++)e[i].matches.length>t.matches.length&&(r=i,t=e[i]);return r}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;m(t,e)}function m(e,r){var i=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,o=t.arrDetailsActivity.zipcode,s=i+" "+n+", "+o;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){r.setCenter(e[0].geometry.location);var i="../../images/marker.png";new google.maps.Marker({map:r,position:e[0].geometry.location,icon:i})}else alert("Geocode was not successful for the following reason: "+t)})}function g(){var e=document.getElementsByName("ActivityForm")[0];e.reset()}t.interestedAct=!0,t.nameButton="Interested",t.getActivities=function(){r.getCollection("activities").then(function(r){for(var i=r.activitielist,n=[],o=i.length;o--;)new Date(i[o].untilDate).getTime()>=new Date(e).getTime()&&(i[o].deleted===!1?(t.deleted=!1,n.push(i[o])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,r){var i,n=this+"",o=-1;if("string"==typeof e){if(!r)return this.split(e).join(t);for(i=e.toLowerCase();-1!==(o=n.toLowerCase().indexOf(e,o>=0?o+t.length:0));)n=n.substring(0,o)+t+n.substring(o+e.length)}return n},t.addActivity=function(){var e=this.activityName,r=this.street,n=this.number,o=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),h=this.startTimeHour,f=this.startTimeMin,d=this.endTimeHour,m=this.endTimeMin,p=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,U=this.dateUntilMonth,A=this.dateUntilYear.toString();u(p,v,function(e,t,r){p=t,v=r,e&&console.log(e)}),u(y,U,function(e,t,r){y=t,U=r,e&&console.log(e)}),new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()?new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==p&&void 0!==h&&void 0!==f&&void 0!==A&&void 0!==U&&void 0!==y&&void 0!==d&&void 0!==m?60>f&&25>h?(l(h,function(e,t){h=t,e&&console.log(e)}),l(f,function(e,t){f=t,e&&console.log(e)}),2===f.length&&2===h.length?60>m&&24>d?(l(d,function(e,r){d=r,e&&(t.error=e)}),l(m,function(e,r){m=r,e&&(t.error=e)}),2===m.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()&&(new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)t.error=c;else{var u="/api/activities/addactivity";i.post(u,{activityName:e,street:r,number:n,zipcode:o,description:s,dateFrom:w+"-"+v+"-"+p+" "+h+":"+f,dateUntil:A+"-"+U+"-"+y+" "+d+":"+m,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),g()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct":t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){r.getDetailsActivity("activities",o.activityName).then(function(r){t.arrDetailsActivity=r.activity,d();for(var i=t.arrDetailsActivity.matches.length;i--;)t.arrDetailsActivity.matches[i]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,r,n){var o="",s=t.interestedAct;s!==!1?(o="/api/activities/interested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!1,t.nameButton="Not interested",t.error=e.error})):(o="/api/activities/deleteinterested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!0,t.nameButton="Interested",t.error=e.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);o.sort(h);for(var a=[],c=i;c--;)a.push(o[c]);for(var l=[],u=a.length;u--;){var f=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",l);void 0===a[u]&&a.splice(u,1,f)}t.arrMostRecentActivities=a})},t.getMostPopularActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);for(var a=[],c=0;i>c;c++){var l=f(o);a.push(o[l]),o.splice(l,1)}for(var u=[],h=a.length;h--;){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===a[h]&&a.splice(h,1,d)}t.arrMostPopularActivities=a})},t.deleteActivity=function(e){r.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";function e(e,t,r){e.init=function(){},r.emit("halloNikita"),e.messages=[],e.message="",e.sendMessage=function(){console.log(this.message);var i={user:t.currentUser,text:this.message,receiver:t.contactedUser.username};e.messages.push(i),r.emit("message",i)},r.on("message_receiver",function(t){console.log("JE BENT ER!"),console.log(t.message),console.log(t.sender),e.messages.push({text:t.message,user:t.sender})})}angular.module("app").controller("ChatController",["$scope","$rootScope","chatService",e])}(),function(){"use strict";var e=function(e,t){var r=0;e.showDiv=function(){e.filter={showFilter:!0},r++,r>1&&(e.filter={showFilter:!1},r=0)},e.hideDiv=function(){r=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.intersect=function(e,t){var r,i,n=[],o={},s=t.length;for(r=0;s>r;r++)o[t[r]]=!0;for(s=e.length,r=0;s>r;r++)i=e[r],i in o&&n.push(i);return n},e.showMatches=function(){var r;r=localStorage.getItem("username"),t.getCollection("users").then(function(i){for(var n=i.userlist,o=0;o<n.length;o++)n[o].username===r&&n.splice(o,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(r).then(function(t){for(var r=t,i=[],o=n.length;o--;){var s=[];s=e.intersect(r.interests,n[o].interests),0!==s.length&&n[o].deleted===!1&&i.push(n[o])}e.arrMatches=i})})}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,r,i,n,o){var s=0;e.startChat=function(r,i){n.post("/chat",{currentUser:r,contactedUser:i}).success(function(r){e.error=r.error,t.currentUser=r.currentUser,t.contactedUser=r.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),o.path(r.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),i.getCollection("users").then(function(r){for(var i=r.userlist,n=i.length;n--;)i[n].username===t&&i.splice(n,1);for(var o=i.length;o--;)"admin"===i[o].username&&i.splice(o,1);e.arrProfiles=i})},e.sortProperty="title",e.filterQuery="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,r,i){e.getUsers=function(){i.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var r=e.arrUsers.length;r--;)e.arrUsers[r].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){i.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){i.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,i=e.user.firstname,n=e.user.lastname,o=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";r.post(l,{username:t,firstname:i,lastname:n,birthdate:o,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t})},e.getUserByID=function(){i.getItem("user").then(function(t){e.userProfile=t})}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,r,i,n,o){t.login=function(){i.post("/login",{username:this.username,password:this.password}).success(function(e){r.user=e.user,t.error=e.error,o.emit("newUser",r.user.username),void 0!==r.user&&localStorage.setItem("username",r.user.username),n.path(e.redirect)})},t.interests=["Jazz","Hiphop","New wave","Traveling","Party"],t.lst=[],t.change=function(){t.lst.push("2")},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude}}function r(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){i.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:this.birthdate,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})}},r=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},i=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(" "!==t)if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location","chatService",t]).controller("signupController",["$scope",r]).controller("editableCheckboxController",["$scope",i])}(),function(){"use strict";var e=function(e,t,r,i){r.get("/user").success(function(r){e.user=r,t.user=r,"admin"==r.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=r.username&&void 0!==r.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===r.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkFjdGl2aXR5LmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwiZ2V0SXRlbSIsIml0ZW0iLCJnZXREZXRhaWxzQWN0aXZpdHkiLCJhY3Rpdml0eW5hbWUiLCJkZWxldGVBY3Rpdml0eSIsImFjdGl2aXR5SWQiLCJnZXROb2lzZVdvcmRzIiwibWF0Y2hlc1NlcnZpY2UiLCJnZXRNYXRjaGVzIiwibmFtZVVzZXIiLCJsb2NhbFVybCIsInhtbEh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYXJyIiwiYXJyTWF0Y2hlcyIsImkiLCJsZW5ndGgiLCJvYmoiLCJwdXNoIiwiaWkiLCJpbmRleCIsImluZGV4T2YiLCJhcnJNYXRjaGVzQnlVc2VyIiwiZGF0ZVRpbWVOb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJBY3Rpdml0aWVzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImlzSW5BcnJheSIsInZhbHVlIiwiYXJyYXkiLCJnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbiIsInJlcGxhY2VBbGwiLCJ3b3JkcyIsInNwbGl0Iiwia2V5V29yZHMiLCJub2lzZVdvcmRzIiwibm9pc2V3b3JkcyIsInRvTG93ZXJDYXNlIiwiaXNFbXB0eSIsInN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzIiwib3V0cHV0IiwidG9TdHJpbmciLCJmdWxsRGF0ZSIsIm51bWJlcjIiLCJudW1iZXJUb1N0cmluZyIsInJlY2VudEZpcnN0IiwiYSIsImIiLCJwb3B1bGFyRmlyc3QiLCJtYXgiLCJtYXhJbmRleCIsImluaXRtYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZUFkZHJlc3MiLCJyZXN1bHRzTWFwIiwiYXJyRGV0YWlsc0FjdGl2aXR5IiwiYWRkcmVzcyIsImdlb2NvZGUiLCJyZXN1bHRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsInNldENlbnRlciIsImdlb21ldHJ5IiwiaW1hZ2UiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhbGVydCIsInJlc2V0Rm9ybSIsImZybSIsImdldEVsZW1lbnRzQnlOYW1lIiwicmVzZXQiLCJpbnRlcmVzdGVkQWN0IiwibmFtZUJ1dHRvbiIsImdldEFjdGl2aXRpZXMiLCJhcnJUZW1wIiwiYWN0aXZpdGllbGlzdCIsImFyckFjdHMiLCJ1bnRpbERhdGUiLCJnZXRUaW1lIiwiZGVsZXRlZCIsImFyckFjdGl2aXRpZXMiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJ0b2tlbiIsIm5ld1Rva2VuIiwiaWdub3JlQ2FzZSIsIl90b2tlbiIsInN0ciIsImpvaW4iLCJhZGRBY3Rpdml0eSIsImNvbW1lbnQiLCJzdGFydFRpbWVIb3VyIiwic3RhcnRUaW1lTWluIiwiZW5kVGltZUhvdXIiLCJlbmRUaW1lTWluIiwiZGF0ZUZyb21EYXkiLCJkYXRlRnJvbU1vbnRoIiwiZGF0ZUZyb21ZZWFyIiwiZGF0ZVVudGlsRGF5IiwiZGF0ZVVudGlsTW9udGgiLCJkYXRlVW50aWxZZWFyIiwiZGF0ZUZyb21kYXlTdHJpbmciLCJkYXRlRnJvbU1vbnRoU3RyaW5nIiwiZGF0ZVVudGlsRGF5U3RyaW5nIiwiZGF0ZVVudGlsTW9udGhTdHJpbmciLCJzdGFydFRpbWVIb3VyU3RyaW5nIiwic3RhcnRUaW1lTWluU3RyaW5nIiwiZW5kVGltZUhvdXJTdHJpbmciLCJlbmRUaW1lTWluU3RyaW5nIiwiZ2V0RGV0YWlsQWN0aXZpdHkiLCJjdXJyZW50VXNlciIsImFjdGl2aXR5IiwiaW50ZXJlc3RlZCIsImludGVyZXN0ZWRVc2VyIiwiY3JlYXRlclVzZXIiLCJzaG93QWN0aXZpdGllc09uSG9tZVBhZ2UiLCJnZXRNb3N0UmVjZW50QWN0aXZpdGllcyIsImdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyIsIm51bWJlck9mQWN0aXZpdGllcyIsImFyckFsbEFjdGl2aXRpZXMiLCJzb3J0IiwiYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMiLCJpaWkiLCJkdW1teUFjdGl2aXR5Iiwic3BsaWNlIiwiYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwiaiIsImluZGV4TW9zdFBvcCIsImluZm9kZWxldGVkQWN0aXZpdHkiLCJDaGF0Q29udHJvbGxlciIsImluaXQiLCJtZXNzYWdlcyIsIm1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsInRleHQiLCJyZWNlaXZlciIsImNvbnRhY3RlZFVzZXIiLCJzZW5kZXIiLCJNYXRjaGVzQ29udHJvbGxlciIsImNsaWNrc09uQnRuIiwic2hvd0RpdiIsImZpbHRlciIsInNob3dGaWx0ZXIiLCJoaWRlRGl2Iiwic29ydFByb3BlcnR5IiwiZmlsdGVyUXVlcnkiLCJmaWx0ZXJNYXRjaGVzIiwic2V4IiwiaW50ZXJzZWN0IiwiYXJyMSIsImFycjIiLCJ2IiwiciIsIm8iLCJsIiwic2hvd01hdGNoZXMiLCJsb2NhbFN0b3JhZ2UiLCJhcnJQcm9maWxlcyIsInVzZXJsaXN0Iiwic2FtZUludGVyZXN0cyIsImludGVyZXN0cyIsIlByb2ZpbGVzQ29udHJvbGxlciIsInN0YXJ0Q2hhdCIsInNldEl0ZW0iLCJwYXRoIiwicmVkaXJlY3QiLCJzaG93UHJvZmlsZXMiLCJmaWx0ZXJQcm9maWxlcyIsIlVzZXJzQ29udHJvbGxlciIsImdldFVzZXJzIiwiYXJyVXNlcnMiLCJnZXREZXRhaWxVc2VyIiwidXNlckRldGFpbHMiLCJjb3JyZWN0dXNlciIsImluZm9kZWxldGVkVXNlciIsInVwZGF0ZVVzZXIiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImJpcnRoZGF0ZSIsImJpb2dyYXBoeSIsImluZm9ybWF0aW9uIiwiZ2V0VXNlckJ5SUQiLCJ1c2VyUHJvZmlsZSIsInNlbGVjdGVkSW50ZXJlc3QiLCJsb2dpbkNvbnRyb2xsZXIiLCJsb2dpbiIsInBhc3N3b3JkIiwibHN0IiwiY2hhbmdlIiwic3RhdGVDaGFuZ2VkIiwicUlkIiwiZ2VvbG9jYXRpb24iLCJnZXRMb2NhdGlvbiIsInN1Y2Nlc3NDYWxsYmFjayIsImxhdGl0dWRlIiwiY29vcmRzIiwibG9uZ2l0dWRlIiwiZXJyb3JDYWxsYmFjayIsImNvZGUiLCJQRVJNSVNTSU9OX0RFTklFRCIsIlBPU0lUSU9OX1VOQVZBSUxBQkxFIiwiVElNRU9VVCIsIlVOS05PV05fRVJST1IiLCJuYXZpZ2F0b3IiLCJnZXRDdXJyZW50UG9zaXRpb24iLCJtYXhpbXVtQWdlIiwicmVnaXN0ZXIiLCJzaWdudXBDb250cm9sbGVyIiwiY2F0ZWdvcmllcyIsIm5ld0NhdGVnb3J5Iiwic2F2ZUNhdGVnb3J5IiwiZWRpdGFibGVDaGVja2JveENvbnRyb2xsZXIiLCJjYXRlZ29yeSIsInNob3dMYWJlbCIsInNob3dUZXh0Ym94IiwiZWRpdCIsImlzQ2hlY2tlZCIsInVzZXJDb250cm9sbGVyIiwiYXV0aCIsImlzQXV0aCIsImlzQWRtaW4iXSwibWFwcGluZ3MiOiJDQUdBLFdBQ0EsR0FBQUEsR0FBQUMsUUFBQUMsT0FBQSxPQUFBLFdBQ0FGLEdBQUFHLFFBQ0EsaUJBQ0EsU0FBQUMsR0FDQUEsRUFBQUMsS0FBQSxLQUFBQyxZQUFBLHNCQUFBRCxLQUFBLFdBQUFDLFlBQUEsc0JBQUFELEtBQUEsU0FBQUMsWUFBQSxzQkFBQUQsS0FBQSxZQUFBQyxZQUFBLHlCQUFBRCxLQUFBLFVBQUFDLFlBQUEsdUJBQUFELEtBQUEsZUFBQUMsWUFBQSw0QkFBQUQsS0FBQSxVQUFBQyxZQUFBLHVCQUFBRCxLQUFBLG1CQUFBQyxZQUFBLGdDQUFBRCxLQUFBLGNBQUFDLFlBQUEsMkJBQUFELEtBQUEsMEJBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsb0JBQ0FGLEtBQUEsZ0JBQUFDLFlBQUEsNkJBQUFELEtBQUEsa0NBQ0FDLFlBQUEsK0JBQ0FDLFdBQUEseUJBQ0FGLEtBQUEsU0FBQUMsWUFBQSx5QkFHQU4sRUFBQVEsS0FDQSxhQUNBLFNBQUFDLEdBQ0FBLEVBQUFDLFdBR0FWLEVBQUFXLFVBQUEsVUFBQSxXQUNBLE1BQUEsVUFBQUMsRUFBQUMsRUFBQUMsR0FDQUQsRUFBQUUsS0FBQSxtQkFBQSxTQUFBQyxHQUNBLEtBQUFBLEVBQUFDLFFBQ0FMLEVBQUFNLE9BQUEsV0FDQU4sRUFBQU8sTUFBQUwsRUFBQU0sV0FFQUosRUFBQUssdUJBS0FyQixFQUFBVyxVQUFBLGFBQ0EsU0FDQSxTQUFBVyxHQUNBLE9BQ0FDLFNBQUEsSUFDQUMsS0FBQSxTQUFBWixFQUFBQyxFQUFBQyxHQUNBLEdBQUFXLEdBQUFILEVBQUFSLEVBQUFZLFdBQ0FDLEVBQUFGLEVBQUFHLE1BQ0FmLEdBQUFFLEtBQUEsU0FBQSxXQUNBSCxFQUFBTSxPQUFBLFdBQ0FTLEVBQUFmLEVBQUFDLEVBQUEsR0FBQWdCLE1BQUEsYUFPQTdCLEVBQUE4QixRQUFBLGNBQ0EsUUFDQSxTQUFBQyxHQUNBQyxLQUFBQyxnQkFBQSxTQUFBQyxFQUFBQyxHQUNBLEdBQUFDLEdBQUEsR0FBQUMsU0FDQUQsR0FBQUUsT0FBQSxPQUFBSixHQUNBSCxFQUFBUSxLQUFBSixFQUFBQyxHQUNBSSxpQkFBQXZDLFFBQUF3QyxTQUNBQyxTQUFBQyxlQUFBQyxVQUNBQyxRQUFBLFdBQ0FDLFFBQUFDLElBQUEsYUFDQUMsTUFBQSxXQUNBRixRQUFBQyxJQUFBLGVBS0EvQyxFQUFBVyxVQUFBLG1CQUFBLFdBQ0EsT0FDQVksU0FBQSxJQUNBakIsWUFBQSxxQ0FPQSxJQUFBMkMsVUFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBM0IsS0FBQTRCLGFBQUFWLEVBQ0FsQixLQUFBbUIsUUFBQUEsRUFDQW5CLEtBQUFvQixPQUFBQSxFQUNBcEIsS0FBQXFCLE9BQUFBLEVBQ0FyQixLQUFBc0IsWUFBQUEsRUFDQXRCLEtBQUF1QixTQUFBQSxFQUNBdkIsS0FBQXdCLFVBQUFBLEVBQ0F4QixLQUFBeUIsVUFBQUEsRUFDQXpCLEtBQUEwQixTQUFBQSxFQUNBMUIsS0FBQTJCLFFBQUFBLElBS0EsV0FDQSxZQUNBLElBQUFFLEdBQUEsU0FBQXBELEdBQ0EsR0FBQXFELEdBQUFDLEdBQUFDLFFBQUFDLE9BQUFDLFNBQUFDLE1BQ0FDLEVBQUEsU0FBQUMsRUFBQUMsR0FDQVIsRUFBQU0sR0FBQUMsRUFBQSxXQUNBLEdBQUFFLEdBQUFDLFNBQ0EvRCxHQUFBUyxPQUFBLFdBQ0FvRCxFQUFBRyxNQUFBWCxFQUFBUyxRQUlBRyxFQUFBLFNBQUFMLEVBQUFNLEVBQUFMLEdBQ0FSLEVBQUFZLEtBQUFMLEVBQUFNLEVBQUEsV0FDQSxHQUFBSixHQUFBQyxTQUNBL0QsR0FBQVMsT0FBQSxXQUNBb0QsRUFBQUcsTUFBQVgsRUFBQVMsT0FJQSxRQUNBSCxHQUFBQSxFQ25IQU0sS0FBQUEsRUFDQVosT0FBQUEsR0FHQTdELFNBQUFDLE9BQUEsT0FBQTBFLFFBQUEsZUFDQSxhQUNBZixPQU1BLFdBQ0EsWUFDQSxJQUFBZ0IsR0FBQSxTQUFBOUMsR0NkQSxHQUFBK0MsR0FBQSxTQUFBQyxHQUNBLEdBQUFDLEdBQUEsNkJBQUFELENBQ0EsT0FBQWhELEdBQUFrRCxJQUFBRCxHQUFBRSxLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVIsUUFHQVMsRUFBQSxTQUFBTCxFQUFBTSxHQUNBLEdBQUFMLEdBQUEsNkJBQUFELEVBQUEsSUFBQU0sQ0FDQSxPQUFBdEQsR0FBQWtELElBQUFELEdBQUFFLEtBQUEsU0FBQUMsR0FDQSxNQUFBQSxHQUFBUixRQUdBVyxFQUFBLFNBQUFQLEVBQUFyQixHQUNBLEdBQUFzQixHQUFBLDZCQUFBRCxFQUFBLGVBQUFyQixDQUNBLE9BQUEzQixHQUFBa0QsSUFBQUQsR0FBQUUsS0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFSLFFBR0FZLEVBQUEsU0FBQVIsRUFBQXJCLEdBQ0EsR0FBQXNCLEdBQUEsNkJBQUFELEVBQUEsZUFBQXJCLENBQ0EsT0FBQTNCLEdBQUFrRCxJQUFBRCxHQUFBRSxLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVIsUUFHQWEsRUFBQSxTQUFBQyxHQUVBLE1BQUExRCxHQUFBa0QsSUFBQSxTQUFBQyxLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVIsUUFHQWUsRUFBQSxTQUFBWCxFQUFBWSxHQUNBLEdBQUFYLEdBQUEsNkJBQUFELEVBQUEsbUJBQUFZLENBQ0EsT0FBQTVELEdBQUFrRCxJQUFBRCxHQUFBRSxLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVIsUUFHQWlCLEVBQUEsU0FBQWIsRUFBQWMsR0FDQSxHQUFBYixHQUFBLDZCQUFBRCxFQUFBLG1CQUFBYyxDQUNBLE9BQUE5RCxHQUFBa0QsSUFBQUQsR0FBQUUsS0FBQSxTQUFBQyxHQUNBLE1BQUFBLEdBQUFSLFFDdENBbUIsRUFBQSxXQUNBLEdBQUFkLEdBQUEsNENBQ0EsT0FBQWpELEdBQUFrRCxJQUFBRCxHQUFBRSxLQUFBLFNBQUFDLEdBQ0EsTUFBQUEsR0FBQVIsT0FJQSxRQUNBRyxjQUFBQSxFQUNBTSxRQUFBQSxFQUNBSSxRQUFBQSxFQUNBRixlQUFBQSxFQUNBQyxXQUFBQSxFQUNBRyxtQkFBQUEsRUFDQUksY0FBQUEsRUFDQUYsZUFBQUEsR0FHQTNGLFNBQUFDLE9BQUEsT0FBQTBFLFFBQUEsYUFDQSxRQUNBQyxPQU1BLFdBQ0EsWUFDQSxJQUFBa0IsR0FBQSxXQUNBLEdBQUFDLEdBQUEsU0FBQUMsR0FDQSxHQUNBQyxHQUFBLDBDQUNBQyxFQUFBLEdBQUFDLGVBR0EsSUFGQUQsRUFBQUUsS0FBQSxNQUFBSCxHQUFBLEdBQ0FDLEVBQUFHLEtBQUEsTUFDQSxLQUFBSCxFQUFBSSxPQUFBLENBTUEsSUFBQSxHQUxBNUIsR0FBQTZCLEtBQUFDLE1BQUFOLEVBQUFPLGNBQ0FDLEtBQ0FDLEtBR0FDLEVBQUEsRUFBQUEsRUFBQWxDLEVBQUFtQyxPQUFBRCxJQUFBLENBQ0EsR0FBQUUsSUFDQXJHLEtBQUFpRSxFQUFBa0MsR0FBQW5HLEtBQ0FpRCxRQUFBZ0IsRUFBQWtDLEdBQUFsRCxRQUVBZ0QsR0FBQUssS0FBQUQsR0FFQSxJQUFBLEdBQUFFLEdBQUEsRUFBQUEsRUFBQU4sRUFBQUcsT0FBQUcsSUFBQSxDQUNBLEdBQUFDLEdBQUFQLEVBQUFNLEdBQUF2RyxLQUFBeUcsUUFBQWxCLEVBQ0EsS0FBQWlCLEdBQ0FOLEVBQUFJLEtBQUFMLEVBQUFNLEdBQUF0RCxTQUtBLEdBQUF5RCxHQUFBUixFQUFBLEVBRUEsT0FBQVEsSUFtQkEsUUFBQXBCLFdBQUFBLEdBRUEvRixTQUFBQyxPQUFBLE9BQUEwRSxRQUFBLGtCQUFBbUIsT0FLQSxXQUNBLFlBQ0EsSUFBQXNCLElBQUEsR0FBQUMsT0FBQUMsY0FBQUMsVUFBQSxFQUFBLElBQUEsS0FBQSxHQUFBRixPQUFBQyxjQUFBQyxVQUFBLEdBQUEsSUFDQUMsRUFBQSxTQUFBQyxFQUFBN0MsRUFBQTlDLEVBQUE0RixFQUFBQyxFQUFBQyxHQzNFQSxRQUFBQyxHQUFBQyxFQUFBQyxHQUNBLE1BQUFBLEdBQUFiLFFBQUFZLEdBRUEsUUFBQUUsR0FBQTNFLEVBQUFnQixHQUNBaEIsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxJQUNBNUUsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxJQUNBNUUsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxJQUNBNUUsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxJQUNBNUUsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxJQUNBNUUsRUFBQUEsRUFBQTRFLFdBQUEsSUFBQSxHQUNBLElBQUFDLEdBQUE3RSxFQUFBOEUsTUFBQSxLQUNBQyxFQUFBLEVBQ0F4RCxHQUFBaUIsZ0JBQUFaLEtBQUEsU0FBQUMsR0FFQSxJQUFBLEdBREFtRCxHQUFBbkQsRUFBQW9ELFdBQ0ExQixFQUFBc0IsRUFBQXJCLE9BQUFELEtBQ0EsSUFBQWlCLEVBQUFLLEVBQUF0QixHQUFBMkIsY0FBQUYsS0FDQUQsR0FBQUYsRUFBQXRCLEdBQ0F3QixHQUFBLElBSUFBLEdBQUFJLFFBR0FuRSxFQUFBLHFCQUFBLE1BRkFBLEVBQUEsS0FBQStELEtBTUEsUUFBQUssR0FBQXJGLEVBQUFpQixHQUNBLEdBQUFxRSxHQUFBdEYsRUFBQSxFQUNBc0YsR0FBQTdCLE9BQUEsR0FDQTZCLEVBQUEsSUFBQUEsRUFDQXRGLEVBQUFzRixFQUFBQyxZQUVBdkYsRUFBQUEsRUFBQXVGLFdBRUF2RixFQUFBb0YsUUFHQW5FLEVBQUEsYUFBQSxNQUZBQSxFQUFBLEtBQUFqQixHQUtBLFFBQUF3RixHQUFBeEYsRUFBQXlGLEVBQUF4RSxHQUNBb0UsRUFBQXJGLEVBQUEsU0FBQUwsRUFBQStGLEdBQ0ExRixFQUFBMEYsRUFDQS9GLEdBQ0FGLFFBQUFDLElBQUFDLEtBR0EwRixFQUFBSSxFQUFBLFNBQUE5RixFQUFBK0YsR0FDQUQsRUFBQUMsRUFDQS9GLEdBQ0FGLFFBQUFDLElBQUFDLEtBR0FLLEVBQUFvRixTQUFBSyxFQUFBTCxRQUdBbkUsRUFBQSxhQUFBLE1BRkFBLEVBQUEsS0FBQWpCLEVBQUF5RixHQ3FFQSxRQUFBRSxHQUFBQyxFQUFBQyxHQUNBLE1BQUFELEdBQUF4RixVQUFBeUYsRUFBQXpGLFVBQ0EsR0FDQXdGLEVBQUF4RixVQUFBeUYsRUFBQXpGLFVBQ0EsRUFDQSxFQUVBLFFBQUEwRixHQUFBeEMsR0FHQSxJQUFBLEdBRkF5QyxHQUFBekMsRUFBQSxHQUNBMEMsRUFBQSxFQUNBeEMsRUFBQSxFQUFBQSxFQUFBRixFQUFBRyxPQUFBRCxJQUNBRixFQUFBRSxHQUFBbEQsUUFBQW1ELE9BQUFzQyxFQUFBekYsUUFBQW1ELFNBQ0F1QyxFQUFBeEMsRUFDQXVDLEVBQUF6QyxFQUFBRSxHQUdBLE9BQUF3QyxHQStEQSxRQUFBQyxLQUNBLEdBQUFDLEdBQUEsR0FBQUMsUUFBQUMsS0FBQUMsSUFBQUMsU0FBQUMsZUFBQSxRQUNBQyxLQUFBLEVBQ0FDLFFBQ0FDLElBQUEsV0FDQUMsSUFBQSxhQUdBQyxFQUFBLEdBQUFULFFBQUFDLEtBQUFTLFFBQ0FDLEdBQUFGLEVBQUFWLEdBRUEsUUFBQVksR0FBQUYsRUFBQUcsR0FDQSxHQUFBaEgsR0FBQXNFLEVBQUEyQyxtQkFBQWpILE9BQ0FDLEVBQUFxRSxFQUFBMkMsbUJBQUFoSCxPQUNBRixFQUFBdUUsRUFBQTJDLG1CQUFBbEgsUUFDQW1ILEVBQUFsSCxFQUFBLElBQUFDLEVBQUEsS0FBQUYsQ0FFQThHLEdBQUFNLFNBQUFELFFBQUFBLEdBQUEsU0FBQUUsRUFBQWpFLEdBQ0EsR0FBQUEsSUFBQWlELE9BQUFDLEtBQUFnQixlQUFBQyxHQUFBLENBQ0FOLEVBQUFPLFVBQUFILEVBQUEsR0FBQUksU0FBQTFHLFNBQ0EsSUFBQTJHLEdBQUEseUJBQ0EsSUFBQXJCLFFBQUFDLEtBQUFxQixRQUNBdkIsSUFBQWEsRUFDQVcsU0FBQVAsRUFBQSxHQUFBSSxTQUFBMUcsU0FDQThHLEtBQUFILFFBR0FJLE9BQUEsd0RBQUExRSxLQUlBLFFBQUEyRSxLQUNBLEdBQUFDLEdBQUF4QixTQUFBeUIsa0JBQUEsZ0JBQUEsRUFDQUQsR0FBQUUsUUZqS0EzRCxFQUFBNEQsZUFBQSxFQUNBNUQsRUFBQTZELFdBQUEsYUFDQTdELEVBQUE4RCxjQUFBLFdBQ0EzRyxFQUFBQyxjQUFBLGNBQUFJLEtBQUEsU0FBQUMsR0FHQSxJQUFBLEdBRkFzRyxHQUFBdEcsRUFBQXVHLGNBQ0FDLEtBQ0E5RSxFQUFBNEUsRUFBQTNFLE9BQUFELEtBQ0EsR0FBQVMsTUFBQW1FLEVBQUE1RSxHQUFBK0UsV0FBQUMsV0FBQSxHQUFBdkUsTUFBQUQsR0FBQXdFLFlBQ0FKLEVBQUE1RSxHQUFBaUYsV0FBQSxHQUNBcEUsRUFBQW9FLFNBQUEsRUFDQUgsRUFBQTNFLEtBQUF5RSxFQUFBNUUsS0FFQWEsRUFBQW9FLFNBQUEsRUFJQXBFLEdBQUFxRSxjQUFBSixLQUdBSyxPQUFBQyxVQUFBL0QsV0FBQSxTQUFBZ0UsRUFBQUMsRUFBQUMsR0FDQSxHQUFBQyxHQUNBQyxFQUFBdEssS0FBQSxHQzlHQTZFLEVBQUEsRUFDQSxJQUFBLGdCQUFBcUYsR0FBQSxDQUNBLElBQUFFLEVBTUEsTUFBQXBLLE1BQUFvRyxNQUFBOEQsR0FBQUssS0FBQUosRUFKQSxLQURBRSxFQUFBSCxFQUFBMUQsY0FDQSxNQUFBM0IsRUFBQXlGLEVBQUE5RCxjQUFBckIsUUFBQStFLEVBQUFyRixHQUFBLEVBQUFBLEVBQUFzRixFQUFBckYsT0FBQSxLQUNBd0YsRUFBQUEsRUFBQTlFLFVBQUEsRUFBQVgsR0FBQXNGLEVBQUFHLEVBQUE5RSxVQUFBWCxFQUFBcUYsRUFBQXBGLFFBTUEsTUFBQXdGLElBK0RBNUUsRUFBQThFLFlBQUEsV0FDQSxHQUFBNUksR0FBQTVCLEtBQUE0QixhQUNBUixFQUFBcEIsS0FBQW9CLE9BQ0FDLEVBQUFyQixLQUFBcUIsT0FDQUYsRUFBQW5CLEtBQUFtQixRQUNBRyxFQUFBdEIsS0FBQXlLLFFBR0FoSixHQUZBekIsS0FBQXVCLFNBQ0F2QixLQUFBd0IsV0FDQSxHQUFBOEQsT0FBQXVFLFdBQ0FhLEVBQUExSyxLQUFBMEssY0FDQUMsRUFBQTNLLEtBQUEySyxhQUNBQyxFQUFBNUssS0FBQTRLLFlBQ0FDLEVBQUE3SyxLQUFBNkssV0FDQUMsRUFBQTlLLEtBQUE4SyxZQUNBQyxFQUFBL0ssS0FBQStLLGNBQ0FDLEVBQUFoTCxLQUFBZ0wsYUFBQXBFLFdDekZBcUUsRUFBQWpMLEtBQUFpTCxhQUNBQyxFQUFBbEwsS0FBQWtMLGVBQ0FDLEVBQUFuTCxLQUFBbUwsY0FBQXZFLFVBQ0FDLEdBQUFpRSxFQUFBQyxFQUFBLFNBQUEvSixFQUFBb0ssRUFBQUMsR0FDQVAsRUFBQU0sRUFDQUwsRUFBQU0sRUFDQXJLLEdBQ0FGLFFBQUFDLElBQUFDLEtBR0E2RixFQUFBb0UsRUFBQUMsRUFBQSxTQUFBbEssRUFBQXNLLEVBQUFDLEdBQ0FOLEVBQUFLLEVBQ0FKLEVBQUFLLEVBQ0F2SyxHQUNBRixRQUFBQyxJQUFBQyxLQUdBLEdBQUFzRSxNQUFBMEYsRUFBQSxJQUFBRCxFQUFBLElBQUFELEVBQUEsSUFBQUosRUFBQSxJQUFBQyxHQUFBZCxXQUFBLEdBQUF2RSxNQUFBNkYsRUFBQSxJQUFBRCxFQUFBLElBQUFELEVBQUEsSUFBQUwsRUFBQSxJQUFBQyxHQUFBaEIsVUFDQSxHQUFBdkUsTUFBQTZGLEVBQUEsSUFBQUQsRUFBQSxJQUFBRCxFQUFBLElBQUFMLEVBQUEsSUFBQUMsR0FBQWhCLFdBQUEsR0FBQXZFLE9BQUF1RSxXQUVBL0ksUUFBQUMsSUFBQSxvQ0FHQUQsUUFBQUMsSUFBQSxzQ0FFQUgsU0FBQVEsR0FBQVIsU0FBQVMsR0FBQVQsU0FBQU8sR0FBQVAsU0FBQVUsR0FBQVYsU0FBQWEsR0FBQWIsU0FBQW9LLEdBQUFwSyxTQUFBbUssR0FBQW5LLFNBQUFrSyxHQUFBbEssU0FBQThKLEdBQUE5SixTQUFBK0osR0FBQS9KLFNBQUF1SyxHQUFBdkssU0FBQXNLLEdBQUF0SyxTQUFBcUssR0FBQXJLLFNBQUFnSyxHQUFBaEssU0FBQWlLLEVBQ0EsR0FBQUYsR0FBQSxHQUFBRCxHQUNBaEUsRUFBQWdFLEVBQUEsU0FBQTFKLEVBQUF3SyxHQUNBZCxFQUFBYyxFQUNBeEssR0FDQUYsUUFBQUMsSUFBQUMsS0FHQTBGLEVBQUFpRSxFQUFBLFNBQUEzSixFQUFBeUssR0FDQWQsRUFBQWMsRUFDQXpLLEdBQ0FGLFFBQUFDLElBQUFDLEtBR0EsSUFBQTJKLEVBQUE3RixRQUFBLElBQUE0RixFQUFBNUYsT0FDQSxHQUFBK0YsR0FBQSxHQUFBRCxHQUNBbEUsRUFBQWtFLEVBQUEsU0FBQTVKLEVBQUEwSyxHQUNBZCxFQUFBYyxFQUNBMUssSUFDQTBFLEVBQUExRSxNQUFBQSxLQUdBMEYsRUFBQW1FLEVBQUEsU0FBQTdKLEVBQUEySyxHQUNBZCxFQUFBYyxFQUNBM0ssSUFDQTBFLEVBQUExRSxNQUFBQSxLQUdBLElBQUE2SixFQUFBakUsV0FBQTlCLFFBQUEsSUFBQThGLEVBQUFoRSxXQUFBOUIsT0FDQSxHQUFBUSxNQUFBMEYsRUFBQSxJQUFBRCxFQUFBLElBQUFELEVBQUEsSUFBQUosRUFBQSxJQUFBQyxHQUFBZCxXQUFBLEdBQUF2RSxNQUFBNkYsRUFBQSxJQUFBRCxFQUFBLElBQUFELEVBQUEsSUFBQUwsRUFBQSxJQUFBQyxHQUFBaEIsWUFDQSxHQUFBdkUsTUFBQTZGLEVBQUEsSUFBQUQsRUFBQSxJQUFBRCxFQUFBLElBQUFMLEVBQUEsSUFBQUMsR0FBQWhCLFdBQUEsR0FBQXZFLE9BQUF1RSxVQUNBNUQsRUFBQTNFLEVBQUEsU0FBQU4sRUFBQTJCLEdBRUEsR0FEQXJCLEVBQUFxQixFQUNBM0IsRUFpQkEwRSxFQUFBMUUsTUFBQUEsTUFqQkEsQ0FDQSxHQUFBZ0MsR0FBQSw2QkFDQWpELEdBQUFRLEtBQUF5QyxHQUNBcEIsYUFBQUEsRUFDQVIsT0FBQUEsRUFDQUMsT0FBQUEsRUFDQUYsUUFBQUEsRUFDQUcsWUFBQUEsRUFDQUMsU0FBQXlKLEVBQUEsSUFBQUQsRUFBQSxJQUFBRCxFQUFBLElBQUFKLEVBQUEsSUFBQUMsRUFDQW5KLFVBQUEySixFQUFBLElBQUFELEVBQUEsSUFBQUQsRUFBQSxJQUFBTCxFQUFBLElBQUFDLEVBQ0FwSixVQUFBQSxJQUNBWixRQUFBLFNBQUE4QixHQUNBK0MsRUFBQTFFLE1BQUEyQixFQUFBM0IsTUFDQTBFLEVBQUE4RCxnQkFDQU4sU0FPQXhELEVBQUExRSxNQUFBLGlDQUlBMEUsRUFBQTFFLE1BQUEsZ0NBR0EwRSxFQUFBMUUsTUFBQSwrQkFHQTBFLEVBQUExRSxNQUFBLDBDQUdBMEUsRUFBQTFFLE1BQUEsaUNBR0EwRSxFQUFBMUUsTUFBQSxtQ0FHQTBFLEVBQUFrRyxrQkFBQSxTQUFBQyxHQUNBaEosRUFBQWEsbUJBQUEsYUFBQWtDLEVBQUFoRSxjQUFBc0IsS0FBQSxTQUFBQyxHQUNBdUMsRUFBQTJDLG1CQUFBbEYsRUFBQTJJLFNBQ0F4RSxHQUNBLEtBQUEsR0FBQXpDLEdBQUFhLEVBQUEyQyxtQkFBQTFHLFFBQUFtRCxPQUFBRCxLQUNBYSxFQUFBMkMsbUJBQUExRyxRQUFBa0QsS0FBQWdILElBQ0FuRyxFQUFBNkQsV0FBQSxpQkFDQTdELEVBQUE0RCxlQUFBLEVBR0EsT0FBQTVELEdBQUEyQyxzQkFHQTNDLEVBQUFxRyxXQUFBLFNBQUFuSyxFQUFBb0ssRUFBQUMsR0FDQSxHQUFBakosR0FBQSxHQUNBc0csRUFBQTVELEVBQUE0RCxhQUNBQSxNQUFBLEdBQ0F0RyxFQUFBLDZCQUNBakQsRUFBQVEsS0FBQXlDLEdBQ0FwQixhQUFBQSxFQUNBb0ssZUFBQUEsRUFDQUMsWUFBQUEsSUFDQXBMLFFBQUEsU0FBQThCLEdBQ0ErQyxFQUFBNEQsZUFBQSxFQUNBNUQsRUFBQTZELFdBQUEsaUJBQ0E3RCxFQUFBMUUsTUFBQTJCLEVBQUEzQixVQUdBZ0MsRUFBQSxtQ0FDQWpELEVBQUFRLEtBQUF5QyxHQUNBcEIsYUFBQUEsRUFDQW9LLGVBQUFBLEVBQ0FDLFlBQUFBLElBQ0FwTCxRQUFBLFNBQUE4QixHQUNBK0MsRUFBQTRELGVBQUEsRUFDQTVELEVBQUE2RCxXQUFBLGFBQ0E3RCxFQUFBMUUsTUFBQTJCLEVBQUEzQixVQXNCQTBFLEVBQUF3Ryx5QkFBQSxXQUNBeEcsRUFBQXlHLDBCQUNBekcsRUFBQTBHLDRCQUVBMUcsRUFBQXlHLHdCQUFBLFdBQ0F0SixFQUFBQyxjQUFBLGNBQUFJLEtBQUEsU0FBQUMsR0FJQSxJQUFBLEdBSEFrSixHQUFBLEVBQ0E1QyxFQUFBdEcsRUFBQXVHLGNBQ0E0QyxLQUNBekgsRUFBQTRFLEVBQUEzRSxPQUFBRCxLQUNBLEdBQUFTLE1BQUFtRSxFQUFBNUUsR0FBQStFLFdBQUFDLFdBQUEsR0FBQXZFLE1BQUFELEdBQUF3RSxXQUNBeUMsRUFBQXRILEtBQUF5RSxFQUFBNUUsR0FHQXlILEdBQUFDLEtBQUF2RixFQUVBLEtBQUEsR0FEQXdGLE1BQ0F2SCxFQUFBb0gsRUFBQXBILEtBQ0F1SCxFQUFBeEgsS0FBQXNILEVBQUFySCxHQUdBLEtBQUEsR0FEQXRELE1BQ0E4SyxFQUFBRCxFQUFBMUgsT0FBQTJILEtBQUEsQ0FDQSxHQUFBQyxHQUFBLEdBQUF6TCxVQUFBLFVBQUEsS0FBQSxXQUFBLEVBQUEsaUJBQUEsbUJBQUEsbUJBQUEsR0FBQXFFLE1BQUEsY0FBQTNELEVBQ0FmLFVBQUE0TCxFQUFBQyxJQUNBRCxFQUFBRyxPQUFBRixFQUFBLEVBQUFDLEdBR0FoSCxFQUFBOEcsd0JBQUFBLEtBR0E5RyxFQUFBMEcseUJBQUEsV0FDQXZKLEVBQUFDLGNBQUEsY0FBQUksS0FBQSxTQUFBQyxHQUlBLElBQUEsR0FIQWtKLEdBQUEsRUFDQTVDLEVBQUF0RyxFQUFBdUcsY0FDQTRDLEtBQ0F6SCxFQUFBNEUsRUFBQTNFLE9BQUFELEtBQ0EsR0FBQVMsTUFBQW1FLEVBQUE1RSxHQUFBK0UsV0FBQUMsV0FBQSxHQUFBdkUsTUFBQUQsR0FBQXdFLFdBQ0F5QyxFQUFBdEgsS0FBQXlFLEVBQUE1RSxHQUlBLEtBQUEsR0FEQStILE1BQ0FDLEVBQUEsRUFBQVIsRUFBQVEsRUFBQUEsSUFBQSxDQUNBLEdBQUFDLEdBQUEzRixFQUFBbUYsRUFDQU0sR0FBQTVILEtBQUFzSCxFQUFBUSxJQUNBUixFQUFBSyxPQUFBRyxFQUFBLEdBR0EsSUFBQSxHQURBbkwsTUFDQThLLEVBQUFHLEVBQUE5SCxPQUFBMkgsS0FBQSxDQUNBLEdBQUFDLEdBQUEsR0FBQXpMLFVBQUEsVUFBQSxLQUFBLFdBQUEsRUFBQSxpQkFBQSxtQkFBQSxtQkFBQSxHQUFBcUUsTUFBQSxjQUFBM0QsRUFDQWYsVUFBQWdNLEVBQUFILElBQ0FHLEVBQUFELE9BQUFGLEVBQUEsRUFBQUMsR0FHQWhILEVBQUFrSCx5QkFBQUEsS0FHQWxILEVBQUE5QixlQUFBLFNBQUFDLEdBQ0FoQixFQUFBZSxlQUFBLGFBQUFDLEdBQUFYLEtBQUEsU0FBQUMsR0FDQXVDLEVBQUFxSCxvQkFBQTVKLEVBQ0F1QyxFQUFBOEQsbUJBdUNBdkwsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLHdCQUNBLFNBQ0EsWUFDQSxRQUNBLFlBQ0EsZUFDQSxhQUNBa0gsT0FNQSxXQUNBLFlBQ0EsU0FBQXVILEdBQUF0SCxFQUFBakgsRUFBQW9ELEdBQ0E2RCxFQUFBdUgsS0FBQSxhQUVBcEwsRUFBQWEsS0FBQSxlQUNBZ0QsRUFBQXdILFlBQ0F4SCxFQUFBeUgsUUFBQSxHQUNBekgsRUFBQTBILFlBQUEsV0FDQXRNLFFBQUFDLElBQUFmLEtBQUFtTixRQUNBLElBQUFBLElBQ0F6TyxLQUFBRCxFQUFBb04sWUFDQXdCLEtBQUFyTixLQUFBbU4sUUFDQUcsU0FBQTdPLEVBQUE4TyxjQUFBN0wsU0FFQWdFLEdBQUF3SCxTQUFBbEksS0FBQW1JLEdBQ0F0TCxFQUFBYSxLQUFBLFVBQUF5SyxJQUVBdEwsRUFBQU8sR0FBQSxtQkFBQSxTQUFBTyxHQUNBN0IsUUFBQUMsSUFBQSxlQUNBRCxRQUFBQyxJQUFBNEIsRUFBQXdLLFNBQ0FyTSxRQUFBQyxJQUFBNEIsRUFBQTZLLFFBQ0E5SCxFQUFBd0gsU0FBQWxJLE1BQ0FxSSxLQUFBMUssRUFBQXdLLFFBQ0F6TyxLQUFBaUUsRUFBQTZLLFdBZ0dBdlAsUUFBQUMsT0FBQSxPQUFBSyxXQUFBLGtCQUNBLFNBQ0EsYUFDQSxjQUNBeU8sT0FNQSxXQUNBLFlBQ0EsSUFBQVMsR0FBQSxTQUFBL0gsRUFBQTdDLEdBQ0EsR0FBQTZLLEdBQUEsQ0FDQWhJLEdBQUFpSSxRQUFBLFdBQ0FqSSxFQUFBa0ksUUFBQUMsWUFBQSxHQUNBSCxJQUNBQSxFQUFBLElBQ0FoSSxFQUFBa0ksUUFBQUMsWUFBQSxHQUNBSCxFQUFBLElBR0FoSSxFQUFBb0ksUUFBQSxXQUNBSixFQUFBLEVBQ0FoSSxFQUFBa0ksUUFBQUMsWUFBQSxJQUVBbkksRUFBQXFJLGFBQUEsUUFDQXJJLEVBQUFzSSxZQUFBLEdBQ0F0SSxFQUFBdUksY0FBQSxTQUFBcEosR0FDQSxNQUFBLEtBQUFhLEVBQUFzSSxhQUNBLEVBS0FwTixTQUFBaUUsRUFBQXFKLEtBQ0EsRUFDQXhJLEVBQUFzSSxZQUFBeEgsZUFBQTNCLEVBQUFxSixJQUFBMUgsZUFDQSxHQUNBLGFBQUFkLEVBQUFzSSxZQUFBeEgsZ0JBQ0FkLEVBQUFzSSxZQUFBLEtBRUEsSUFHQXRJLEVBQUF5SSxVQUFBLFNBQUFDLEVBQUFDLEdBQ0EsR0FBQXhKLEdBQUF5SixFQUFBQyxLQUFBQyxLQUFBQyxFQUFBSixFQUFBdkosTUFDQSxLQUFBRCxFQUFBLEVBQUE0SixFQUFBNUosRUFBQUEsSUFDQTJKLEVBQUFILEVBQUF4SixLQUFBLENBR0EsS0FEQTRKLEVBQUFMLEVBQUF0SixPQUNBRCxFQUFBLEVBQUE0SixFQUFBNUosRUFBQUEsSUFDQXlKLEVBQUFGLEVBQUF2SixHQUNBeUosSUFBQUUsSUFDQUQsRUFBQXZKLEtBQUFzSixFQUdBLE9BQUFDLElBRUE3SSxFQUFBZ0osWUFBQSxXQU9BLEdBQUFoTixFQUNBQSxHQUFBaU4sYUFBQW5MLFFBQUEsWUFDQVgsRUFBQUMsY0FBQSxTQUFBSSxLQUFBLFNBQUFDLEdBRUEsSUFBQSxHQURBeUwsR0FBQXpMLEVBQUEwTCxTQUNBaEssRUFBQSxFQUFBQSxFQUFBK0osRUFBQTlKLE9BQUFELElBQ0ErSixFQUFBL0osR0FBQW5ELFdBQUFBLEdBQ0FrTixFQUFBakMsT0FBQTlILEVBQUEsRUFHQSxLQUFBLEdBQUFJLEdBQUEsRUFBQUEsRUFBQTJKLEVBQUE5SixPQUFBRyxJQUNBLFVBQUEySixFQUFBM0osR0FBQXZELFVBQ0FrTixFQUFBakMsT0FBQTFILEVBQUEsRUFHQXBDLEdBQUFXLFFBQUE5QixHQUFBd0IsS0FBQSxTQUFBQyxHQUdBLElBQUEsR0FGQXpFLEdBQUF5RSxFQUNBeUIsS0FDQUMsRUFBQStKLEVBQUE5SixPQUFBRCxLQUFBLENBQ0EsR0FBQWlLLEtBQ0FBLEdBQUFwSixFQUFBeUksVUFBQXpQLEVBQUFxUSxVQUFBSCxFQUFBL0osR0FBQWtLLFdBQ0EsSUFBQUQsRUFBQWhLLFFBQ0E4SixFQUFBL0osR0FBQWlGLFdBQUEsR0FDQWxGLEVBQUFJLEtBQUE0SixFQUFBL0osSUFJQWEsRUFBQWQsV0FBQUEsT0FLQTNHLFNBQUFDLE9BQUEsT0FBQUssV0FBQSxxQkFDQSxTQUNBLFlBQ0FrUCxPQU1BLFdBQ0EsWUFDQSxJQUFBdUIsR0FBQSxTQUFBdEosRUFBQWpILEVBQUFtSCxFQUFBL0MsRUFBQTlDLEVBQUE0RixHQUNBLEdBQUErSCxHQUFBLENBQ0FoSSxHQUFBdUosVUFBQSxTQUFBcEQsRUFBQTBCLEdBQ0F4TixFQUFBUSxLQUFBLFNBQ0FzTCxZQUFBQSxFQUNBMEIsY0FBQUEsSUFDQTFNLFFBQUEsU0FBQThCLEdBQ0ErQyxFQUFBMUUsTUFBQTJCLEVBQUEzQixNQUNBdkMsRUFBQW9OLFlBQUFsSixFQUFBa0osWUFDQXBOLEVBQUE4TyxjQUFBNUssRUFBQTRLLGNBQ0FvQixhQUFBTyxRQUFBLGtCQUFBelEsRUFBQW9OLFlBQUFuSyxVQUNBaU4sYUFBQU8sUUFBQSxvQkFBQXpRLEVBQUE4TyxjQUFBN0wsVUFDQWlFLEVBQUF3SixLQUFBeE0sRUFBQXlNLGFBR0ExSixFQUFBaUksUUFBQSxXQUNBakksRUFBQWtJLFFBQUFDLFlBQUEsR0FDQUgsSUFDQUEsRUFBQSxJQUNBaEksRUFBQWtJLFFBQUFDLFlBQUEsR0FDQUgsRUFBQSxJQUdBaEksRUFBQW9JLFFBQUEsV0FDQUosRUFBQSxFQUNBaEksRUFBQWtJLFFBQUFDLFlBQUEsSUFFQW5JLEVBQUEySixhQUFBLFdBT0EsR0FBQTNOLEdBQUEsRUFDQUEsR0FBQWlOLGFBQUFuTCxRQUFBLFlBQ0FYLEVBQUFDLGNBQUEsU0FBQUksS0FBQSxTQUFBQyxHQUVBLElBQUEsR0FEQXlMLEdBQUF6TCxFQUFBMEwsU0FDQWhLLEVBQUErSixFQUFBOUosT0FBQUQsS0FDQStKLEVBQUEvSixHQUFBbkQsV0FBQUEsR0FDQWtOLEVBQUFqQyxPQUFBOUgsRUFBQSxFQ3JoQkEsS0FBQSxHQUFBSSxHQUFBMkosRUFBQTlKLE9BQUFHLEtBQ0EsVUFBQTJKLEVBQUEzSixHQUFBdkQsVUFDQWtOLEVBQUFqQyxPQUFBMUgsRUFBQSxFQUdBUyxHQUFBa0osWUFBQUEsS0FHQWxKLEVBQUFxSSxhQUFBLFFBQ0FySSxFQUFBc0ksWUFBQSxHQUNBdEksRUFBQTRKLGVBQUEsU0FBQXpLLEdBQ0EsTUFBQSxLQUFBYSxFQUFBc0ksYUFDQSxFQUtBcE4sU0FBQWlFLEVBQUFxSixLQUNBLEVBQ0F4SSxFQUFBc0ksWUFBQXhILGVBQUEzQixFQUFBcUosSUFBQTFILGVBQ0EsR0FDQSxhQUFBZCxFQUFBc0ksWUFBQXhILGdCQUNBZCxFQUFBc0ksWUFBQSxLQUVBLElBR0EvUCxTQUFBQyxPQUFBLE9BQUFLLFdBQUEsc0JBQ0EsU0FDQSxhQUNBLGVBQ0EsWUFDQSxRQUNBLFlBQ0F5USxPQU1BLFdBQ0EsWUFDQSxJQUFBTyxHQUFBLFNBQUE3SixFQUFBRSxFQUFBN0YsRUFBQThDLEdBQ0E2QyxFQUFBOEosU0FBQSxXQUNBM00sRUFBQUMsY0FBQSxTQUFBSSxLQUFBLFNBQUFDLEdBRUF1QyxFQUFBK0osU0FBQXRNLEVBQUEwTCxRQUNBLEtBQUEsR0FBQWhLLEdBQUFhLEVBQUErSixTQUFBM0ssT0FBQUQsS0FDQWEsRUFBQStKLFNBQUE1SyxHQUFBaUYsV0FBQSxFQUNBcEUsRUFBQW9FLFNBQUEsRUFFQXBFLEVBQUFvRSxTQUFBLEtBS0FwRSxFQUFBZ0ssY0FBQSxXQUNBN00sRUFBQVMsZUFBQSxRQUFBc0MsRUFBQWxFLFVBQUF3QixLQUFBLFNBQUFDLEdBQ0F1QyxFQUFBaUssWUFBQXhNLEVBQUF5TSxlQUdBbEssRUFBQW5DLFdBQUEsU0FBQTdCLEdBQ0FtQixFQUFBVSxXQUFBLFFBQUE3QixHQUFBd0IsS0FBQSxTQUFBQyxHQUNBdUMsRUFBQW1LLGdCQUFBMU0sRUFDQXVDLEVBQUE4SixjQUdBOUosRUFBQW9LLFdBQUEsV0FDQSxHQUFBcE8sR0FBQWdFLEVBQUFoSCxLQUFBZ0QsU0FBQXFPLEVBQUFySyxFQUFBaEgsS0FBQXFSLFVBQUFDLEVBQUF0SyxFQUFBaEgsS0FBQXNSLFNBQUFDLEVBQUF2SyxFQUFBaEgsS0FBQXVSLFVBQUE5TyxFQUFBdUUsRUFBQWhILEtBQUF5QyxRQUFBK00sRUFBQXhJLEVBQUFoSCxLQUFBd1AsSUFBQWdDLEVBQUF4SyxFQUFBaEgsS0FBQXdSLFVBQ0FsTixFQUFBLDBCQUNBakQsR0FBQVEsS0FBQXlDLEdBQ0F0QixTQUFBQSxFQUNBcU8sVUFBQUEsRUFDQUMsU0FBQUEsRUFDQUMsVUFBQUEsRUFDQTlPLFFBQUFBLEVBQ0ErTSxJQUFBQSxFQUNBZ0MsVUFBQUEsSUFDQXJQLFFBQUEsU0FBQThCLEdBQ0ErQyxFQUFBMUUsTUFBQTJCLEVBQUEzQixNQUNBMEUsRUFBQXlLLFlBQUF4TixLQUdBK0MsRUFBQTBLLFlBQUEsV0FDQXZOLEVBQUFXLFFBQUEsUUFBQU4sS0FBQSxTQUFBQyxHQUNBdUMsRUFBQTJLLFlBQUFsTixLQUlBbEYsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLG1CQUNBLFNBQ0EsZUFDQSxRQUNBLFlBQ0FnUixPQU1BLFdBQ0EsWUFDQSxJQUFBZSxNQUNBQyxFQUFBLFNBQUE3SyxFQUFBakgsRUFBQXNCLEVBQUE0RixFQUFBOUQsR0FDQTZELEVBQUE4SyxNQUFBLFdBQ0F6USxFQUFBUSxLQUFBLFVBQ0FtQixTQUFBMUIsS0FBQTBCLFNBQ0ErTyxTQUFBelEsS0FBQXlRLFdBQ0E1UCxRQUFBLFNBQUE4QixHQUNBbEUsRUFBQUMsS0FBQWlFLEVBQUFqRSxLQUNBZ0gsRUFBQTFFLE1BQUEyQixFQUFBM0IsTUFDQWEsRUFBQWEsS0FBQSxVQUFBakUsRUFBQUMsS0FBQWdELFVBQ0FkLFNBQUFuQyxFQUFBQyxNQUNBaVEsYUFBQU8sUUFBQSxXQUFBelEsRUFBQUMsS0FBQWdELFVBRUFpRSxFQUFBd0osS0FBQXhNLEVBQUF5TSxhQUdBMUosRUFBQXFKLFdBQ0EsT0FDQSxTQUNBLFdBQ0EsWUFDQSxTQUVBckosRUFBQWdMLE9BQ0FoTCxFQUFBaUwsT0FBQSxXQy9IQWpMLEVBQUFnTCxJQUFBMUwsS0FBQSxNQUVBVSxFQUFBa0wsYUFBQSxTQUFBQyxHQUNBLEdBQUEsS0FBQVAsRUFBQW5MLFFBQUEwTCxHQUFBLENBQ0EsR0FBQTNMLEdBQUFvTCxFQUFBbkwsUUFBQTBMLEVBQ0EzTCxHQUFBLElBQ0FvTCxFQUFBM0QsT0FBQXpILEVBQUEsT0FHQW9MLEdBQUF0TCxLQUFBNkwsSUFHQW5MLEVBQUFvTCxZQUFBLEdBQ0FwTCxFQUFBcUwsWUFBQSxXQU1BLFFBQUFDLEdBQUFqSSxHQUdBckQsRUFBQW9MLGFBQ0FHLFNBQUFsSSxFQUFBbUksT0FBQUQsU0FDQUUsVUFBQXBJLEVBQUFtSSxPQUFBQyxXQUdBLFFBQUFDLEdBQUFwUSxHQUdBLE9BREEwRSxFQUFBb0wsWUFBQSxLQUNBOVAsRUFBQXFRLE1BQ0EsSUFBQXJRLEdBQUFzUSxrQkFDQTVMLEVBQUExRSxNQUFBLDBDQUNBLE1BQ0EsS0FBQUEsR0FBQXVRLHFCQUNBN0wsRUFBQTFFLE1BQUEsc0NBQ0EsTUFDQSxLQUFBQSxHQUFBd1EsUUFDQTlMLEVBQUExRSxNQUFBLDZDQUNBLE1BQ0EsS0FBQUEsR0FBQXlRLGNBQ0EvTCxFQUFBMUUsTUFBQSw4QkEzQkEwUSxVQUFBWixZQUNBWSxVQUFBWixZQUFBYSxtQkFBQVgsRUFBQUksR0FBQVEsV0FBQSxNQUVBbE0sRUFBQTFFLE1BQUEsaURBNkJBMEUsRUFBQW1NLFNBQUEsV0FDQTlSLEVBQUFRLEtBQUEsYUFDQXdQLFVBQUEvUCxLQUFBK1AsVUFDQUMsU0FBQWhRLEtBQUFnUSxTQUNBdE8sU0FBQTFCLEtBQUEwQixTQUNBK08sU0FBQXpRLEtBQUF5USxTQUNBdFAsUUFBQW5CLEtBQUFtQixRQUNBOE8sVUFBQWpRLEtBQUFpUSxVQUNBL0IsSUFBQWxPLEtBQUFrTyxJQUNBZ0MsVUFBQWxRLEtBQUFrUSxVQUNBWSxZQUFBcEwsRUFBQW9MLFlBQ0EvQixVQUFBdUIsSUFDQXpQLFFBQUEsU0FBQThCLEdBQ0ErQyxFQUFBMUUsTUFBQTJCLEVBQUEzQixNQUNBMkUsRUFBQXdKLEtBQUF4TSxFQUFBeU0sY0FJQTBDLEVBQUEsU0FBQXBNLEdBQ0FBLEVBQUFxTSxZQUFBLElBQ0FyTSxFQUFBc00sWUFBQSxHQUNBdE0sRUFBQXVNLGFBQUEsY0FHQUMsRUFBQSxTQUFBeE0sR0FDQUEsRUFBQXlNLFNBQUEsR0FDQXpNLEVBQUEwTSxXQUFBLEVBQ0ExTSxFQUFBMk0sYUFBQSxFQUNBM00sRUFBQXVNLGFBQUEsV0FDQXZNLEVBQUF5TSxVQUNBek0sRUFBQTBNLFdBQUEsRUFDQTFNLEVBQUEyTSxhQUFBLElBRUEzTSxFQUFBME0sV0FBQSxFQUNBMU0sRUFBQTJNLGFBQUEsSUFHQTNNLEVBQUE0TSxLQUFBLFdBQ0E1TSxFQUFBME0sV0FBQSxFQUNBMU0sRUFBQTJNLGFBQUEsR0FFQTNNLEVBQUE2TSxVQUFBLFNBQUExQixHQUNBLEdBQUEsTUFBQUEsRUFDQSxHQUFBLEtBQUFQLEVBQUFuTCxRQUFBMEwsR0FBQSxDQUNBLEdBQUEzTCxHQUFBb0wsRUFBQW5MLFFBQUEwTCxFQUNBM0wsR0FBQSxJQUNBb0wsRUFBQTNELE9BQUF6SCxFQUFBLE9BR0FvTCxHQUFBdEwsS0FBQTZMLElBSUFuTCxFQUFBa0wsYUFBQSxTQUFBQyxLQUdBNVMsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLG1CQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0EsY0FDQWdTLElBQ0FoUyxXQUFBLG9CQUNBLFNBQ0F1VCxJQUNBdlQsV0FBQSw4QkFDQSxTQUNBMlQsT0FNQSxXQUNBLFlBQ0EsSUFBQU0sR0FBQSxTQUFBOU0sRUFBQWpILEVBQUFzQixFQUFBNEYsR0FDQTVGLEVBQUFrRCxJQUFBLFNBQUFwQyxRQUFBLFNBQUE4QixHQUNBK0MsRUFBQWhILEtBQUFpRSxFQUNBbEUsRUFBQUMsS0FBQWlFLEVBQ0EsU0FBQUEsRUFBQWpCLFNBQ0FnRSxFQUFBK00sTUFDQUMsUUFBQSxFQUNBQyxTQUFBLEdBRUEsU0FBQWhRLEVBQUFqQixVQUFBZCxTQUFBK0IsRUFBQWpCLFNDbklBZ0UsRUFBQStNLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBL1IsU0FBQStCLEVBQUFqQixXQUNBZ0UsRUFBQStNLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxNQVNBMVUsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLGtCQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0FpVSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTWFydGhlIG9uIDEwLzEyLzE1LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbigpe1xyXG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xyXG4gICAgYXBwLmNvbmZpZyhmdW5jdGlvbigkcm91dGVQcm92aWRlcil7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXJcclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob21lLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9zaWdudXBcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCJ2aWV3cy9zaWdudXAuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2hvbWVcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2hvbWUuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL21hdGNoZXNcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL21hdGNoZXMuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2hvd3RvXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob3dUby5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdGllc1wiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvYWN0aXZpdGllcy5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWRtaW5cIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2FkbWluLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9zZWFyY2hwcm9maWxlc1wiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3Mvc2VhcmNoUHJvZmlsZXMuaHRtbFwiXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL215cHJvZmlsZVwiLHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvbXlQcm9maWxlLmh0bWxcIlxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi91c2VyZGV0YWlscy86dXNlcm5hbWVcIix7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNVc2VyLmh0bWxcIixcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc2Vyc0NvbnRyb2xsZXInXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC53aGVuKFwiL2RldGFpbHN1c2VyXCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzVXNlci5odG1sXCJcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdHlkZXRhaWxzLzphY3Rpdml0eU5hbWVcIiwge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzQWN0aXZpdHkuaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBY3Rpdml0aWVzQ29udHJvbGxlclwiXHJcblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAud2hlbihcIi9jaGF0XCIse1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9jaGF0Lmh0bWxcIlxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLnJ1bihmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgICRyb290U2NvcGUudXNlciA9IHt9O1xyXG4gICAgfSk7XHJcblxyXG4gICAgYXBwLmRpcmVjdGl2ZSgnbmdFbnRlcicsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICBlbGVtZW50LmJpbmQoXCJrZXlkb3duIGtleXByZXNzXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRldmFsKGF0dHJzLm5nRW50ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIGFwcC5kaXJlY3RpdmUoJ2ZpbGVNb2RlbCcsIFsnJHBhcnNlJywgZnVuY3Rpb24gKCRwYXJzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZpbGVNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kZWxTZXR0ZXIgPSBtb2RlbC5hc3NpZ247XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFNldHRlcihzY29wZSwgZWxlbWVudFswXS5maWxlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgYXBwLnNlcnZpY2UoJ2ZpbGVVcGxvYWQnLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XHJcbiAgICAgICAgdGhpcy51cGxvYWRGaWxlVG9VcmwgPSBmdW5jdGlvbihmaWxlLCB1cGxvYWRVcmwpe1xyXG4gICAgICAgICAgICB2YXIgZmQgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QodXBsb2FkVXJsLCBmZCwge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtUmVxdWVzdDogYW5ndWxhci5pZGVudGl0eSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG5cclxuICAgIGFwcC5kaXJlY3RpdmUoJ2VkaXRhYmxlQ2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2VkaXRhYmxlY2hlY2tib3guaHRtbCdcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDE1LzEyLzE1LlxyXG4gKi9cclxudmFyIEFjdGl2aXR5ID0gZnVuY3Rpb24obmFtZSwgemlwY29kZSwgc3RyZWV0LCBudW1iZXIsIGRlc2NyaXB0aW9uLCBkYXRlRnJvbSwgZGF0ZVVudGlsLCB0aW1lc3RhbXAsIHVzZXJuYW1lLCBtYXRjaGVzKXtcclxuICAgIHRoaXMuYWN0aXZpdHlOYW1lID0gbmFtZTtcclxuICAgIHRoaXMuemlwY29kZSA9IHppcGNvZGU7XHJcbiAgICB0aGlzLnN0cmVldCA9IHN0cmVldDtcclxuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgdGhpcy5kYXRlRnJvbSA9IGRhdGVGcm9tO1xyXG4gICAgdGhpcy5kYXRlVW50aWwgPSBkYXRlVW50aWw7XHJcbiAgICB0aGlzLnRpbWVzdGFtcCA9IHRpbWVzdGFtcDtcclxuICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcclxuICAgIHRoaXMubWF0Y2hlcyA9IG1hdGNoZXM7XHJcbn07IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgY2hhdFNlcnZpY2UgPSBmdW5jdGlvbiAoJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcclxuXHJcbiAgICAgICAgdmFyIG9uID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgb246IG9uLFxyXG4gICAgICAgICAgICBlbWl0OiBlbWl0LFxyXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJjaGF0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIGNoYXRTZXJ2aWNlXSk7XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gMTUvMTIvMTUuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBkYlNlcnZpY2UgPSBmdW5jdGlvbiAoJGh0dHApIHtcclxuXHJcbiAgICAgICAgdmFyIGdldENvbGxlY3Rpb24gPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xyXG5cclxuXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0QnlJRCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL1wiICsgaWQ7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBnZXREZXRhaWxzVXNlciA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCB1c2VybmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL3VzZXJkZXRhaWwvXCIgKyB1c2VybmFtZTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRlbGV0ZVVzZXIgPSAgZnVuY3Rpb24gKGNvbGxlY3Rpb24sIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvdXNlcmRlbGV0ZS9cIiArIHVzZXJuYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHZhciBnZXRJdGVtID0gZnVuY3Rpb24oaXRlbSl7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgaXRlbTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL3VzZXInKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgZ2V0RGV0YWlsc0FjdGl2aXR5ID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGFjdGl2aXR5bmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL2FjdGl2aXR5ZGV0YWlsL1wiICsgYWN0aXZpdHluYW1lO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIGRlbGV0ZUFjdGl2aXR5ID0gIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBhY3Rpdml0eUlkKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZWxldGUvXCIgKyBhY3Rpdml0eUlkO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIHZhciBnZXROb2lzZVdvcmRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbm9pc2V3b3Jkcy5qc29uXCI7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcclxuICAgICAgICByZXR1cm57XHJcblxyXG4gICAgICAgICAgICBnZXRDb2xsZWN0aW9uOmdldENvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgIGdldEJ5SUQ6Z2V0QnlJRCxcclxuICAgICAgICAgICAgZ2V0SXRlbTpnZXRJdGVtLFxyXG4gICAgICAgICAgICBnZXREZXRhaWxzVXNlcjogZ2V0RGV0YWlsc1VzZXIsXHJcbiAgICAgICAgICAgIGRlbGV0ZVVzZXI6IGRlbGV0ZVVzZXIsXHJcbiAgICAgICAgICAgIGdldERldGFpbHNBY3Rpdml0eTogZ2V0RGV0YWlsc0FjdGl2aXR5LFxyXG4gICAgICAgICAgICBnZXROb2lzZVdvcmRzOiBnZXROb2lzZVdvcmRzLFxyXG4gICAgICAgICAgICBkZWxldGVBY3Rpdml0eTogZGVsZXRlQWN0aXZpdHlcclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJkYlNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgZGJTZXJ2aWNlXSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgbWF0Y2hlc1NlcnZpY2UgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBnZXRNYXRjaGVzID0gZnVuY3Rpb24gKG5hbWVVc2VyKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFiZWxVUkwgPSBcInRvZ2V0aGVyXCI7XHJcbiAgICAgICAgICAgIHZhciBsb2NhbFVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbWF0Y2hlcy5qc29uXCI7XHJcbiAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCBsb2NhbFVybCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7XHJcblxyXG4gICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaFVzZXJzID0gW107XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hJbnRlcmVzdHMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVzZXJcIjogZGF0YVtpXS51c2VyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1hdGNoZXNcIjpkYXRhW2ldLm1hdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmopO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gMDsgaWk8YXJyLmxlbmd0aDsgaWkrKyl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGFycltpaV0udXNlci5pbmRleE9mKG5hbWVVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJbaWldLm1hdGNoZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5kZXg6IFwiK2luZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFycik7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFyck1hdGNoZXNbMF0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlc0J5VXNlciA9IGFyck1hdGNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQWFudGFsIG1hdGNoZXM6IFwiICsgYXJyTWF0Y2hlc0J5VXNlci5sZW5ndGgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJNYXRjaGVzQnlVc2VyO1xyXG5cclxuICAgICAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpaSA9IDA7IGlpaTxhcnJNYXRjaGVzWzBdLmxlbmd0aDsgaWlpKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hVc2VyID0gYXJyTWF0Y2hlc1swXVtpaWldLnVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoSW50ZXJlc3RzID0gYXJyTWF0Y2hlc1swXVtpaWldLmludGVyZXN0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hVc2Vycy5wdXNoKG1hdGNoVXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hJbnRlcmVzdHMucHVzaChtYXRjaEludGVyZXN0cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWF0Y2hVc2VyKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hdGNoSW50ZXJlc3RzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJNYXRjaFVzZXJzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyck1hdGNoSW50ZXJlc3RzKTtcclxuICAgICAgICAgICAgICAgICovXHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcclxuICAgICAgICByZXR1cm57XHJcblxyXG4gICAgICAgICAgICBnZXRNYXRjaGVzOmdldE1hdGNoZXMsXHJcblxyXG4gICAgICAgIH07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwibWF0Y2hlc1NlcnZpY2VcIiwgW21hdGNoZXNTZXJ2aWNlXSk7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIHZhciBkYXRlVGltZU5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApICsgXCIgXCIgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxNik7XHJcblxyXG4gICAgdmFyIEFjdGl2aXRpZXNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSwgZGJTZXJ2aWNlLCAkaHR0cCwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRyb3V0ZSkge1xyXG4gICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiSW50ZXJlc3RlZFwiO1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhcnJUZW1wID0gcmVzcG9uc2UuYWN0aXZpdGllbGlzdDtcclxuICAgICAgICAgICAgICAgIHZhciBhcnJBY3RzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDtpLS07KXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoYXJyVGVtcFtpXS51bnRpbERhdGUpLmdldFRpbWUoKSA+PSBuZXcgRGF0ZShkYXRlVGltZU5vdykuZ2V0VGltZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFyclRlbXBbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyckFjdHMucHVzaChhcnJUZW1wW2ldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyckFjdGl2aXRpZXMgPSBhcnJBY3RzO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2VBbGwgPSBmdW5jdGlvbiAodG9rZW4sIG5ld1Rva2VuLCBpZ25vcmVDYXNlKSB7XHJcbiAgICAgICAgICAgIHZhciBfdG9rZW47XHJcbiAgICAgICAgICAgIHZhciBzdHIgPSB0aGlzICsgXCJcIjtcclxuICAgICAgICAgICAgdmFyIGkgPSAtMTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gPT09IFwic3RyaW5nXCIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlQ2FzZSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfdG9rZW4gPSB0b2tlbi50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gc3RyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLCBpID49IDAgPyBpICsgbmV3VG9rZW4ubGVuZ3RoIDogMFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApICkgIT09IC0xXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGkpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rva2VuICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ci5zdWJzdHJpbmcoaSArIHRva2VuLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQodG9rZW4pLmpvaW4obmV3VG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzSW5BcnJheSh2YWx1ZSwgYXJyYXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5LmluZGV4T2YodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGNhbGxiYWNrKSB7XHJcblxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJy4nLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnLCcsICcnKTtcclxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCc/JywgJycpO1xyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJyEnLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbCgnXCInLCAnJyk7XHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbChcIidcIiwgJycpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHdvcmRzID0gZGVzY3JpcHRpb24uc3BsaXQoXCIgXCIpO1xyXG4gICAgICAgICAgICB2YXIga2V5V29yZHMgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldE5vaXNlV29yZHMoKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBub2lzZVdvcmRzID0gcmVzcG9uc2Uubm9pc2V3b3JkcztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gd29yZHMubGVuZ3RoOyBpLS07KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luQXJyYXkod29yZHNbaV0udG9Mb3dlckNhc2UoKSwgbm9pc2VXb3JkcykgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5V29yZHMgKz0gd29yZHNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVdvcmRzICs9IFwiIFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiBrZXlXb3JkcztcclxuICAgICAgICAgICAgICAgIGlmICgha2V5V29yZHMuaXNFbXB0eSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGtleVdvcmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIGtleXdvcmRzIGZvdW5kLlwiLCBudWxsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyLCBjYWxsYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gJzAnICsgb3V0cHV0O1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gb3V0cHV0LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5KSB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbnVtYmVyLlwiLCBudWxsKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBmdWxsRGF0ZShudW1iZXIsIG51bWJlcjIsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKG51bWJlciwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyVG9TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyMiwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xyXG4gICAgICAgICAgICAgICAgbnVtYmVyMiA9IG51bWJlclRvU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW51bWJlci5pc0VtcHR5ICYmICFudW1iZXIyLmlzRW1wdHkpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bWJlciwgbnVtYmVyMik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soXCJObyBudW1iZXIuXCIsIG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkQWN0aXZpdHkgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpdml0eU5hbWUgPSB0aGlzLmFjdGl2aXR5TmFtZTtcclxuICAgICAgICAgICAgdmFyIHN0cmVldCA9IHRoaXMuc3RyZWV0O1xyXG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5udW1iZXI7XHJcbiAgICAgICAgICAgIHZhciB6aXBjb2RlID0gdGhpcy56aXBjb2RlO1xyXG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLmNvbW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbSA9IHRoaXMuZGF0ZUZyb207XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWwgPSB0aGlzLmRhdGVVbnRpbDtcclxuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lSG91ciA9IHRoaXMuc3RhcnRUaW1lSG91cjtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZU1pbiA9IHRoaXMuc3RhcnRUaW1lTWluO1xyXG4gICAgICAgICAgICB2YXIgZW5kVGltZUhvdXIgPSB0aGlzLmVuZFRpbWVIb3VyO1xyXG4gICAgICAgICAgICB2YXIgZW5kVGltZU1pbiA9IHRoaXMuZW5kVGltZU1pbjtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tRGF5ID0gdGhpcy5kYXRlRnJvbURheTtcclxuICAgICAgICAgICAgdmFyIGRhdGVGcm9tTW9udGggPSB0aGlzLmRhdGVGcm9tTW9udGg7XHJcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbVllYXIgPSB0aGlzLmRhdGVGcm9tWWVhci50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsRGF5ID0gdGhpcy5kYXRlVW50aWxEYXk7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxNb250aCA9IHRoaXMuZGF0ZVVudGlsTW9udGg7XHJcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxZZWFyID0gdGhpcy5kYXRlVW50aWxZZWFyLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgICAgICBmdWxsRGF0ZShkYXRlRnJvbURheSwgZGF0ZUZyb21Nb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlRnJvbWRheVN0cmluZywgZGF0ZUZyb21Nb250aFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgZGF0ZUZyb21EYXkgPSBkYXRlRnJvbWRheVN0cmluZztcclxuICAgICAgICAgICAgICAgIGRhdGVGcm9tTW9udGggPSBkYXRlRnJvbU1vbnRoU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZnVsbERhdGUoZGF0ZVVudGlsRGF5LCBkYXRlVW50aWxNb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlVW50aWxEYXlTdHJpbmcsIGRhdGVVbnRpbE1vbnRoU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxEYXkgPSBkYXRlVW50aWxEYXlTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxNb250aCA9IGRhdGVVbnRpbE1vbnRoU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgaWYobmV3IERhdGUoZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluKS5nZXRUaW1lKCkgPD0gbmV3IERhdGUoZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4pLmdldFRpbWUoKSl7XHJcbiAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpe1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGF0ZSB1bnRpbCBjYW4ndCBiZSBiZWZvcmUgdG9kYXlcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIiBFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSBzdGFydGRhdGVcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgoc3RyZWV0ICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAobnVtYmVyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoemlwY29kZSAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAodGltZXN0YW1wICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21ZZWFyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21Nb250aCAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVGcm9tRGF5ICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoc3RhcnRUaW1lSG91ciAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZU1pbiAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbFllYXIgIT09IHVuZGVmaW5lZCkgJiZcclxuICAgICAgICAgICAgICAgIChkYXRlVW50aWxNb250aCAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbERheSAhPT0gdW5kZWZpbmVkKSAmJlxyXG4gICAgICAgICAgICAgICAgKGVuZFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXHJcbiAgICAgICAgICAgICAgICAoZW5kVGltZU1pbiAhPT0gdW5kZWZpbmVkKSkge1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbiA8IDYwICYmIHN0YXJ0VGltZUhvdXIgPCAyNSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhzdGFydFRpbWVIb3VyLCBmdW5jdGlvbiAoZXJyb3IsIHN0YXJ0VGltZUhvdXJTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lSG91ciA9IHN0YXJ0VGltZUhvdXJTdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoc3RhcnRUaW1lTWluLCBmdW5jdGlvbiAoZXJyb3IsIHN0YXJ0VGltZU1pblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVNaW4gPSBzdGFydFRpbWVNaW5TdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbi5sZW5ndGggPT09IDIgJiYgc3RhcnRUaW1lSG91ci5sZW5ndGggPT09IDIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lTWluIDwgNjAgJiYgZW5kVGltZUhvdXIgPCAyNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoZW5kVGltZUhvdXIsIGZ1bmN0aW9uIChlcnJvciwgZW5kVGltZUhvdXJTdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lSG91ciA9IGVuZFRpbWVIb3VyU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKGVuZFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgZW5kVGltZU1pblN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVNaW4gPSBlbmRUaW1lTWluU3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMiAmJiBlbmRUaW1lSG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVGcm9tWWVhciArIFwiLVwiICsgZGF0ZUZyb21Nb250aCArIFwiLVwiICsgZGF0ZUZyb21EYXkgKyBcIiBcIiArIHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbikuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9hZGRhY3Rpdml0eVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXQ6IHN0cmVldCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogbnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemlwY29kZTogemlwY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGcm9tOiBkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlVW50aWw6IGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzZXRGb3JtKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9XCJFbmRkYXRlIGNhbid0IGJlIGJlZm9yZSB0b2RheVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kZGF0ZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IFwiRW5kdGltZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9ICdEZSBzdGFydGltZSBsZW5ndGggaXMgbm90IGNvcnJlY3QhISEhICc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJTdGFydHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFUlJPUjogQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQuXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0RGV0YWlsQWN0aXZpdHkgPSBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldERldGFpbHNBY3Rpdml0eSgnYWN0aXZpdGllcycsICRyb3V0ZVBhcmFtcy5hY3Rpdml0eU5hbWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5ID0gcmVzcG9uc2UuYWN0aXZpdHk7XHJcbiAgICAgICAgICAgICAgICBpbml0bWFwKCk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubWF0Y2hlcy5sZW5ndGg7IGktLTspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS5tYXRjaGVzW2ldID09PSBjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ZWRBY3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eTtcclxuXHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZCA9IGZ1bmN0aW9uIChhY3Rpdml0eU5hbWUsIGludGVyZXN0ZWRVc2VyLCBjcmVhdGVyVXNlcikge1xyXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJcIjtcclxuICAgICAgICAgICAgdmFyIGludGVyZXN0ZWRBY3QgPSAkc2NvcGUuaW50ZXJlc3RlZEFjdDtcclxuICAgICAgICAgICAgaWYgKGludGVyZXN0ZWRBY3QgIT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdXJsID0gXCIvYXBpL2FjdGl2aXRpZXMvaW50ZXJlc3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdGVkVXNlcjogaW50ZXJlc3RlZFVzZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlclVzZXI6IGNyZWF0ZXJVc2VyXHJcbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIk5vdCBpbnRlcmVzdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHVybCA9IFwiL2FwaS9hY3Rpdml0aWVzL2RlbGV0ZWludGVyZXN0ZWRcIjtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZFVzZXI6IGludGVyZXN0ZWRVc2VyLFxyXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZXJVc2VyOiBjcmVhdGVyVXNlclxyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiSW50ZXJlc3RlZFwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBkYXRhLmVycm9yO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWNlbnRGaXJzdChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcClcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHBvcHVsYXJGaXJzdChhcnIpIHtcclxuICAgICAgICAgICAgdmFyIG1heCA9IGFyclswXTtcclxuICAgICAgICAgICAgdmFyIG1heEluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldLm1hdGNoZXMubGVuZ3RoID4gbWF4Lm1hdGNoZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF4SW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1heEluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dBY3Rpdml0aWVzT25Ib21lUGFnZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5nZXRNb3N0UmVjZW50QWN0aXZpdGllcygpO1xyXG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWxsQWN0aXZpdGllcyA9IFtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gYXJyVGVtcC5sZW5ndGg7aS0tOykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMucHVzaChhcnJUZW1wW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zb3J0KHJlY2VudEZpcnN0KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IG51bWJlck9mQWN0aXZpdGllczsgaWktLTspIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UmVjZW50QWN0aXZpdGllcy5wdXNoKGFyckFsbEFjdGl2aXRpZXNbaWldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLmxlbmd0aDsgaWlpLS07KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnJNb3N0UmVjZW50QWN0aXZpdGllc1tpaWldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMuc3BsaWNlKGlpaSwgMSwgZHVtbXlBY3Rpdml0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RSZWNlbnRBY3Rpdml0aWVzID0gYXJyTW9zdFJlY2VudEFjdGl2aXRpZXM7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWxsQWN0aXZpdGllcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSBhcnJUZW1wLmxlbmd0aDsgaS0tOykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnB1c2goYXJyVGVtcFtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMgPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGogPSAwOyBqIDwgbnVtYmVyT2ZBY3Rpdml0aWVzOyBqKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhNb3N0UG9wID0gcG9wdWxhckZpcnN0KGFyckFsbEFjdGl2aXRpZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcy5wdXNoKGFyckFsbEFjdGl2aXRpZXNbaW5kZXhNb3N0UG9wXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5zcGxpY2UoaW5kZXhNb3N0UG9wLCAxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2hlcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9ICBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMubGVuZ3RoOyBpaWktLTspIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGR1bW15QWN0aXZpdHkgPSBuZXcgQWN0aXZpdHkoXCJObyBuYW1lXCIsIDg1MDAsIFwiVG9nZXRoZXJcIiwgMiwgXCJubyBkZXNjcmlwdGlvblwiLCBcIjIwMTYtMDEtMDEgMDA6MDFcIiwgXCIyMDE3LTEyLTMxIDIzOjU5XCIsIG5ldyBEYXRlKCksIFwibm8gdXNlcm5hbWVcIiwgbWF0Y2hlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyck1vc3RQb3B1bGFyQWN0aXZpdGllc1tpaWldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUuZGVsZXRlQWN0aXZpdHkgPSBmdW5jdGlvbihhY3Rpdml0eUlkKXtcclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmRlbGV0ZUFjdGl2aXR5KCdhY3Rpdml0aWVzJywgYWN0aXZpdHlJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb2RlbGV0ZWRBY3Rpdml0eSA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRtYXAoKXtcclxuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XHJcbiAgICAgICAgICAgICAgICB6b29tOiA4LFxyXG4gICAgICAgICAgICAgICAgY2VudGVyOiB7bGF0OiA1MC44MTk0ODk0LCBsbmc6IDMuMjU3NzA3Nn1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xyXG5cclxuICAgICAgICAgICAgZ2VvY29kZUFkZHJlc3MoZ2VvY29kZXIsIG1hcCk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdlb2NvZGVBZGRyZXNzKGdlb2NvZGVyLCByZXN1bHRzTWFwKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHJlZXQgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5LnN0cmVldDtcclxuICAgICAgICAgICAgdmFyIG51bWJlciA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubnVtYmVyO1xyXG4gICAgICAgICAgICB2YXIgemlwY29kZSA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkuemlwY29kZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzID0gc3RyZWV0ICsgXCIgXCIgKyBudW1iZXIgKyBcIiwgXCIgKyB6aXBjb2RlOyAvL2hpZXIgYWRkcmVzcyB1aXQgZGIgaW5zdG9wcGVuXHJcblxyXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsnYWRkcmVzcyc6IGFkZHJlc3N9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXAuc2V0Q2VudGVyKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IFwiLi4vLi4vaW1hZ2VzL21hcmtlci5wbmdcIjtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogcmVzdWx0c01hcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdHZW9jb2RlIHdhcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZvbGxvd2luZyByZWFzb246ICcgKyBzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlc2V0Rm9ybSgpIHtcclxuICAgICAgICAgICAgdmFyIGZybSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lKCdBY3Rpdml0eUZvcm0nKVswXTtcclxuICAgICAgICAgICAgZnJtLnJlc2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQWN0aXZpdGllc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiZGJTZXJ2aWNlXCIsIFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJmaWxlVXBsb2FkXCIsIEFjdGl2aXRpZXNDb250cm9sbGVyXSk7XHJcblxyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBOaWtpdGEgb24gNy8wMS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBmdW5jdGlvbiBDaGF0Q29udHJvbGxlcigkc2NvcGUsJHJvb3RTY29wZSxjaGF0U2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL2NoYXRTZXJ2aWNlLmVtaXQoXCJpbml0X3VzZXJzXCIse3VzZXI6JHJvb3RTY29wZS5jdXJyZW50VXNlciwgY29sbGVjdGlvbjpcInVzZXJzXCJ9KTtcclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjaGF0U2VydmljZS5lbWl0KFwiaGFsbG9OaWtpdGFcIik7XHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW107XHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5tZXNzYWdlKTtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7dXNlcjogJHJvb3RTY29wZS5jdXJyZW50VXNlcixcclxuICAgICAgICAgICAgICAgIHRleHQ6dGhpcy5tZXNzYWdlLFxyXG4gICAgICAgICAgICByZWNlaXZlcjokcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWV9O1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcclxuICAgICAgICAgICAgY2hhdFNlcnZpY2UuZW1pdChcIm1lc3NhZ2VcIiwgbWVzc2FnZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2hhdFNlcnZpY2Uub24oXCJtZXNzYWdlX3JlY2VpdmVyXCIsIGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkpFIEJFTlQgRVIhXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLnNlbmRlcik7XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHt0ZXh0OmRhdGEubWVzc2FnZSwgdXNlcjpkYXRhLnNlbmRlcn0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTb2NrZXQgbGlzdGVuZXJzXHJcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PVxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgc29ja2V0Lm9uKCdpbml0JywgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgICAgICRzY29wZS51c2VycyA9IGRhdGEudXNlcnM7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldC5vbignc2VuZDptZXNzYWdlJywgZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNvY2tldC5vbignY2hhbmdlOm5hbWUnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjaGFuZ2VOYW1lKGRhdGEub2xkTmFtZSwgZGF0YS5uZXdOYW1lKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmpvaW4nLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGpvaW5lZC4nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkc2NvcGUudXNlcnMucHVzaChkYXRhLm5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhZGQgYSBtZXNzYWdlIHRvIHRoZSBjb252ZXJzYXRpb24gd2hlbiBhIHVzZXIgZGlzY29ubmVjdHMgb3IgbGVhdmVzIHRoZSByb29tXHJcbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmxlZnQnLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB1c2VyOiAnY2hhdHJvb20nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGxlZnQuJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIGksIHVzZXI7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAkc2NvcGUudXNlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHVzZXIgPSAkc2NvcGUudXNlcnNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlciA9PT0gZGF0YS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQcml2YXRlIGhlbHBlcnNcclxuICAgICAgICAvLyA9PT09PT09PT09PT09PT1cclxuXHJcbiAgICAgICAgdmFyIGNoYW5nZU5hbWUgPSBmdW5jdGlvbiAob2xkTmFtZSwgbmV3TmFtZSkge1xyXG4gICAgICAgICAgICAvLyByZW5hbWUgdXNlciBpbiBsaXN0IG9mIHVzZXJzXHJcbiAgICAgICAgICAgIHZhciBpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJHNjb3BlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLnVzZXJzW2ldID09PSBvbGROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzW2ldID0gbmV3TmFtZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdXNlcjogJ2NoYXRyb29tJyxcclxuICAgICAgICAgICAgICAgIHRleHQ6ICdVc2VyICcgKyBvbGROYW1lICsgJyBpcyBub3cga25vd24gYXMgJyArIG5ld05hbWUgKyAnLidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gTWV0aG9kcyBwdWJsaXNoZWQgdG8gdGhlIHNjb3BlXHJcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcblxyXG4gICAgICAgICRzY29wZS5jaGFuZ2VOYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzb2NrZXQuZW1pdCgnY2hhbmdlOm5hbWUnLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUubmV3TmFtZVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYW4gZXJyb3IgY2hhbmdpbmcgeW91ciBuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VOYW1lKCRzY29wZS5uYW1lLCAkc2NvcGUubmV3TmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lID0gJHNjb3BlLm5ld05hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5ld05hbWUgPSAnJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2VzID0gW107XHJcblxyXG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ3NlbmQ6bWVzc2FnZScsIHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICRzY29wZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBtZXNzYWdlIHRvIG91ciBtb2RlbCBsb2NhbGx5XHJcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHVzZXI6ICRzY29wZS5uYW1lLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJHNjb3BlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBjbGVhciBtZXNzYWdlIGJveFxyXG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xyXG4gICAgICAgIH07Ki9cclxuICAgIH1cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJDaGF0Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIixcIiRyb290U2NvcGVcIixcImNoYXRTZXJ2aWNlXCIsIENoYXRDb250cm9sbGVyXSk7XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cclxuICovXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgTWF0Y2hlc0NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsIGRiU2VydmljZSkge1xyXG5cclxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcclxuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcclxuXHJcbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xyXG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNvcnRQcm9wZXJ0eSA9IFwidGl0bGVcIjtcclxuICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xyXG4gICAgICAgICRzY29wZS5maWx0ZXJNYXRjaGVzID0gZnVuY3Rpb24oaSl7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgIGVsc2UgaWYoaS51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PSBpLnNleC50b0xvd2VyQ2FzZSgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vaHR0cDovL3d3dy5mYWxzZXBvc2l0aXZlcy5jb20vaW5kZXgucGhwLzIwMDkvMTIvMDEvamF2YXNjcmlwdC1mdW5jdGlvbi10by1nZXQtdGhlLWludGVyc2VjdC1vZi0yLWFycmF5cy9cclxuICAgICAgICAkc2NvcGUuaW50ZXJzZWN0ID0gZnVuY3Rpb24oYXJyMSwgYXJyMilcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByID0gW10sIG8gPSB7fSwgbCA9IGFycjIubGVuZ3RoLCBpLCB2O1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBvW2FycjJbaV1dID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsID0gYXJyMS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHYgPSBhcnIxW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHYgaW4gbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHIucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dNYXRjaGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICAgaWYoJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lICE9PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICAgdXNlcm5hbWUgPSAkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lO1xyXG5cclxuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xyXG5cclxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ3VzZXJzJykudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGFyclByb2ZpbGVzID0gcmVzcG9uc2UudXNlcmxpc3Q7XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IDA7IGlpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihhcnJQcm9maWxlc1tpaV0udXNlcm5hbWUgPT09IFwiYWRtaW5cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaWksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgZGJTZXJ2aWNlLmdldEl0ZW0odXNlcm5hbWUpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaGVzID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9YXJyUHJvZmlsZXMubGVuZ3RoOyBpLS07KXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzYW1lSW50ZXJlc3RzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVJbnRlcmVzdHMgPSAkc2NvcGUuaW50ZXJzZWN0KHVzZXIuaW50ZXJlc3RzLCBhcnJQcm9maWxlc1tpXS5pbnRlcmVzdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2FtZUludGVyZXN0cy5sZW5ndGggIT09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyck1hdGNoZXMucHVzaChhcnJQcm9maWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyck1hdGNoZXMgPSBhcnJNYXRjaGVzO1xyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIk1hdGNoZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcImRiU2VydmljZVwiLCBNYXRjaGVzQ29udHJvbGxlcl0pO1xyXG5cclxufSkoKTsiLCIvKipcclxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDIwLzEyLzE1LlxyXG4gKi9cclxuXHJcblxyXG4oZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgUHJvZmlsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbikge1xyXG5cclxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICRzY29wZS5zdGFydENoYXQgPSBmdW5jdGlvbihjdXJyZW50VXNlciwgY29udGFjdGVkVXNlcil7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoXCIvY2hhdFwiLCB7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50VXNlcjogY3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgICAgICBjb250YWN0ZWRVc2VyOmNvbnRhY3RlZFVzZXJcclxuXHJcbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gZGF0YS5jdXJyZW50VXNlcjtcclxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuY29udGFjdGVkVXNlciA9IGRhdGEuY29udGFjdGVkVXNlcjtcclxuXHJcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiY29udGFjdGVkdXNlcm5hbWVcIiwgJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyLnVzZXJuYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG5cclxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcclxuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcclxuXHJcbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xyXG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XHJcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHNjb3BlLnNob3dQcm9maWxlcyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZigkcm9vdFNjb3BlLnVzZXIudXNlcm5hbWUgIT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xyXG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcm5hbWVcIik7XHJcblxyXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyUHJvZmlsZXMgPSByZXNwb25zZS51c2VybGlzdDtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IGFyclByb2ZpbGVzLmxlbmd0aDsgaS0tOyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0udXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gYXJyUHJvZmlsZXMubGVuZ3RoOyBpaS0tOyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGlpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyUHJvZmlsZXMgPSBhcnJQcm9maWxlcztcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuc29ydFByb3BlcnR5ID0gXCJ0aXRsZVwiO1xyXG4gICAgICAgICRzY29wZS5maWx0ZXJRdWVyeSA9IFwiXCI7XHJcbiAgICAgICAgJHNjb3BlLmZpbHRlclByb2ZpbGVzID0gZnVuY3Rpb24oaSl7XHJcbiAgICAgICAgICAgIGlmKCRzY29wZS5maWx0ZXJRdWVyeSA9PT0gXCJcIil7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgIGVsc2UgaWYoaS51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAqL1xyXG5cclxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PSBpLnNleC50b0xvd2VyQ2FzZSgpKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIm5vZmlsdGVyXCIpe1xyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJQcm9maWxlc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiJHJvb3RTY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcImRiU2VydmljZVwiLFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgUHJvZmlsZXNDb250cm9sbGVyXSk7XHJcblxyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
>>>>>>> origin/master
