!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,r){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(r.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,r,i){var n=e(i.fileModel),o=n.assign;r.bind("change",function(){t.$apply(function(){o(t,r[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,r){var i=new FormData;i.append("file",t),e.post(r,i,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,r,i,n,o,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=r,this.number=i,this.description=n,this.dateFrom=o,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),r=function(r,i){t.on(r,function(){var r=arguments;e.$apply(function(){i.apply(t,r)})})},i=function(r,i,n){t.emit(r,i,function(){var r=arguments;e.$apply(function(){n.apply(t,r)})})};return{on:r,emit:i,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var r="http://localhost:3000/api/"+t;return e.get(r).then(function(e){return e.data})},r=function(t,r){var i="http://localhost:3000/api/"+t+"/"+r;return e.get(i).then(function(e){return e.data})},i=function(t,r){var i="http://localhost:3000/api/"+t+"/userdetail/"+r;return e.get(i).then(function(e){return e.data})},n=function(t,r){var i="http://localhost:3000/api/"+t+"/userdelete/"+r;return e.get(i).then(function(e){return e.data})},o=function(t){return e.get("/user").then(function(e){return e.data})},s=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydetail/"+r;return e.get(i).then(function(e){return e.data})},a=function(t,r){var i="http://localhost:3000/api/"+t+"/activitydelete/"+r;return e.get(i).then(function(e){return e.data})},c=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:r,getItem:o,getDetailsUser:i,deleteUser:n,getDetailsActivity:s,getNoiseWords:c,deleteActivity:a}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",r=new XMLHttpRequest;if(r.open("GET",t,!1),r.send(null),200==r.status){for(var i=JSON.parse(r.responseText),n=[],o=[],s=0;s<i.length;s++){var a={user:i[s].user,matches:i[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&o.push(n[c].matches)}var u=o[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,r,i,n,o,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var i=e.split(" "),n="";r.getNoiseWords().then(function(e){for(var r=e.noisewords,o=i.length;o--;)-1==a(i[o].toLowerCase(),r)&&(n+=i[o],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var r=e+"";r.length<2?(r="0"+r,e=r.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,r){l(e,function(t,r){e=r,t&&console.log(t)}),l(t,function(e,r){t=r,e&&console.log(e)}),e.isEmpty||t.isEmpty?r("No number.",null):r(null,e,t)}function h(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function f(e){for(var t=e[0],r=0,i=1;i<e.length;i++)e[i].matches.length>t.matches.length&&(r=i,t=e[i]);return r}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;m(t,e)}function m(e,r){var i=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,o=t.arrDetailsActivity.zipcode,s=i+" "+n+", "+o;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){r.setCenter(e[0].geometry.location);var i="../../images/marker.png";new google.maps.Marker({map:r,position:e[0].geometry.location,icon:i})}else alert("Geocode was not successful for the following reason: "+t)})}function p(){var e=document.getElementsByName("ActivityForm")[0];e.reset()}t.interestedAct=!0,t.nameButton="Interested",t.getActivities=function(){r.getCollection("activities").then(function(r){for(var i=r.activitielist,n=[],o=i.length;o--;)new Date(i[o].untilDate).getTime()>=new Date(e).getTime()&&(i[o].deleted===!1?(t.deleted=!1,n.push(i[o])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,r){var i,n=this+"",o=-1;if("string"==typeof e){if(!r)return this.split(e).join(t);for(i=e.toLowerCase();-1!==(o=n.toLowerCase().indexOf(e,o>=0?o+t.length:0));)n=n.substring(0,o)+t+n.substring(o+e.length)}return n},t.addActivity=function(){var e=this.activityName,r=this.street,n=this.number,o=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),h=this.startTimeHour,f=this.startTimeMin,d=this.endTimeHour,m=this.endTimeMin,g=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,U=this.dateUntilMonth,A=this.dateUntilYear.toString();u(g,v,function(e,t,r){g=t,v=r,e&&console.log(e)}),u(y,U,function(e,t,r){y=t,U=r,e&&console.log(e)}),new Date(w+"-"+v+"-"+g+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()?new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==g&&void 0!==h&&void 0!==f&&void 0!==A&&void 0!==U&&void 0!==y&&void 0!==d&&void 0!==m?60>f&&25>h?(l(h,function(e,t){h=t,e&&console.log(e)}),l(f,function(e,t){f=t,e&&console.log(e)}),2===f.length&&2===h.length?60>m&&24>d?(l(d,function(e,r){d=r,e&&(t.error=e)}),l(m,function(e,r){m=r,e&&(t.error=e)}),2===m.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+g+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()&&(new Date(A+"-"+U+"-"+y+" "+d+":"+m).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)t.error=c;else{var u="/api/activities/addactivity";i.post(u,{activityName:e,street:r,number:n,zipcode:o,description:s,dateFrom:w+"-"+v+"-"+g+" "+h+":"+f,dateUntil:A+"-"+U+"-"+y+" "+d+":"+m,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),p()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct":t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){r.getDetailsActivity("activities",o.activityName).then(function(r){t.arrDetailsActivity=r.activity,d();for(var i=t.arrDetailsActivity.matches.length;i--;)t.arrDetailsActivity.matches[i]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,r,n){var o="",s=t.interestedAct;s!==!1?(o="/api/activities/interested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!1,t.nameButton="Not interested",t.error=e.error})):(o="/api/activities/deleteinterested",i.post(o,{activityName:e,interestedUser:r,createrUser:n}).success(function(e){t.interestedAct=!0,t.nameButton="Interested",t.error=e.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);o.sort(h);for(var a=[],c=i;c--;)a.push(o[c]);for(var l=[],u=a.length;u--;){var f=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",l);void 0===a[u]&&a.splice(u,1,f)}t.arrMostRecentActivities=a})},t.getMostPopularActivities=function(){r.getCollection("activities").then(function(r){for(var i=3,n=r.activitielist,o=[],s=n.length;s--;)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&o.push(n[s]);for(var a=[],c=0;i>c;c++){var l=f(o);a.push(o[l]),o.splice(l,1)}for(var u=[],h=a.length;h--;){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===a[h]&&a.splice(h,1,d)}t.arrMostPopularActivities=a})},t.deleteActivity=function(e){r.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";function e(e,t,r){e.init=function(){},r.emit("halloNikita"),e.messages=[],e.message="",e.sendMessage=function(){console.log(this.message);var i={user:t.currentUser,text:this.message,receiver:t.contactedUser.username};e.messages.push(i),r.emit("message",i)},r.on("message_receiver",function(t){console.log("JE BENT ER!"),console.log(t.message),console.log(t.sender),e.messages.push({text:t.message,user:t.sender})})}angular.module("app").controller("ChatController",["$scope","$rootScope","chatService",e])}(),function(){"use strict";var e=function(e,t){var r=0;e.showDiv=function(){e.filter={showFilter:!0},r++,r>1&&(e.filter={showFilter:!1},r=0)},e.hideDiv=function(){r=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.filter2Matches=function(t){return""===e.filter2Query?!0:void 0===t?!1:void 0===t.zipcode?!1:e.filter2Query==t.zipcode?!0:(""===e.filter2Query.toLowerCase()&&(e.filter2Query=""),!1)},e.intersect=function(e,t){var r,i,n=[],o={},s=t.length;for(r=0;s>r;r++)o[t[r]]=!0;for(s=e.length,r=0;s>r;r++)i=e[r],i in o&&n.push(i);return n},e.showMatches=function(){var r;r=localStorage.getItem("username"),t.getCollection("users").then(function(i){for(var n=i.userlist,o=0;o<n.length;o++)n[o].username===r&&n.splice(o,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(r).then(function(t){for(var r=t,i=[],o=n.length;o--;){var s=[];s=e.intersect(r.interests,n[o].interests),0!==s.length&&n[o].deleted===!1&&i.push(n[o])}e.arrMatches=i})})},e.searchInMatches=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrMatches.length;i>r;r++)e.arrMatches[r].zipcode==e.filter2Query&&t.push(e.arrMatches[r]);e.arrMatches=t}else""===e.filter2Query&&e.showMatches()}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,r,i,n,o){var s=0;e.startChat=function(r,i){n.post("/chat",{currentUser:r,contactedUser:i}).success(function(r){e.error=r.error,t.currentUser=r.currentUser,t.contactedUser=r.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),o.path(r.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),i.getCollection("users").then(function(r){for(var i=r.userlist,n=i.length;n--;)i[n].username===t&&i.splice(n,1);for(var o=i.length;o--;)"admin"===i[o].username&&i.splice(o,1);e.arrProfiles=i})},e.sortProperty="title",e.filterQuery="",e.filter2Query="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.searchInProfiles=function(){if(""!==e.filter2Query){for(var t=[],r=0,i=e.arrProfiles.length;i>r;r++)e.arrProfiles[r].zipcode==e.filter2Query&&t.push(e.arrProfiles[r]);e.arrProfiles=t}else""===e.filter2Query&&e.showProfiles()}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,r,i){e.getUsers=function(){i.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var r=e.arrUsers.length;r--;)e.arrUsers[r].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){i.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){i.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,i=e.user.firstname,n=e.user.lastname,o=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";r.post(l,{username:t,firstname:i,lastname:n,birthdate:o,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t})},e.getUserByID=function(){i.getItem("user").then(function(t){e.userProfile=t})}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,r,i,n,o){t.login=function(){i.post("/login",{username:this.username,password:this.password}).success(function(e){r.user=e.user,t.error=e.error,o.emit("newUser",r.user.username),void 0!==r.user&&localStorage.setItem("username",r.user.username),n.path(e.redirect)})},t.interests=["Jazz","Hiphop","New wave","Traveling","Party"],t.lst=[],t.change=function(){t.lst.push("2")},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude}}function r(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,r,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){i.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:this.birthdate,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})}},r=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},i=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(" "!==t)if(-1!==e.indexOf(t)){var r=e.indexOf(t);r>-1&&e.splice(r,1)}else e.push(t)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location","chatService",t]).controller("signupController",["$scope",r]).controller("editableCheckboxController",["$scope",i])}(),function(){"use strict";var e=function(e,t,r,i){r.get("/user").success(function(r){e.user=r,t.user=r,"admin"==r.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=r.username&&void 0!==r.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===r.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkFjdGl2aXR5LmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwiZ2V0SXRlbSIsIml0ZW0iLCJnZXREZXRhaWxzQWN0aXZpdHkiLCJhY3Rpdml0eW5hbWUiLCJkZWxldGVBY3Rpdml0eSIsImFjdGl2aXR5SWQiLCJnZXROb2lzZVdvcmRzIiwibWF0Y2hlc1NlcnZpY2UiLCJnZXRNYXRjaGVzIiwibmFtZVVzZXIiLCJsb2NhbFVybCIsInhtbEh0dHAiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJzZW5kIiwic3RhdHVzIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYXJyIiwiYXJyTWF0Y2hlcyIsImkiLCJsZW5ndGgiLCJvYmoiLCJwdXNoIiwiaWkiLCJpbmRleCIsImluZGV4T2YiLCJhcnJNYXRjaGVzQnlVc2VyIiwiZGF0ZVRpbWVOb3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJzdWJzdHJpbmciLCJBY3Rpdml0aWVzQ29udHJvbGxlciIsIiRzY29wZSIsIiRsb2NhdGlvbiIsIiRyb3V0ZVBhcmFtcyIsIiRyb3V0ZSIsImlzSW5BcnJheSIsInZhbHVlIiwiYXJyYXkiLCJnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbiIsInJlcGxhY2VBbGwiLCJ3b3JkcyIsInNwbGl0Iiwia2V5V29yZHMiLCJub2lzZVdvcmRzIiwibm9pc2V3b3JkcyIsInRvTG93ZXJDYXNlIiwiaXNFbXB0eSIsInN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzIiwib3V0cHV0IiwidG9TdHJpbmciLCJmdWxsRGF0ZSIsIm51bWJlcjIiLCJudW1iZXJUb1N0cmluZyIsInJlY2VudEZpcnN0IiwiYSIsImIiLCJwb3B1bGFyRmlyc3QiLCJtYXgiLCJtYXhJbmRleCIsImluaXRtYXAiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInpvb20iLCJjZW50ZXIiLCJsYXQiLCJsbmciLCJnZW9jb2RlciIsIkdlb2NvZGVyIiwiZ2VvY29kZUFkZHJlc3MiLCJyZXN1bHRzTWFwIiwiYXJyRGV0YWlsc0FjdGl2aXR5IiwiYWRkcmVzcyIsImdlb2NvZGUiLCJyZXN1bHRzIiwiR2VvY29kZXJTdGF0dXMiLCJPSyIsInNldENlbnRlciIsImdlb21ldHJ5IiwiaW1hZ2UiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJhbGVydCIsInJlc2V0Rm9ybSIsImZybSIsImdldEVsZW1lbnRzQnlOYW1lIiwicmVzZXQiLCJpbnRlcmVzdGVkQWN0IiwibmFtZUJ1dHRvbiIsImdldEFjdGl2aXRpZXMiLCJhcnJUZW1wIiwiYWN0aXZpdGllbGlzdCIsImFyckFjdHMiLCJ1bnRpbERhdGUiLCJnZXRUaW1lIiwiZGVsZXRlZCIsImFyckFjdGl2aXRpZXMiLCJTdHJpbmciLCJwcm90b3R5cGUiLCJ0b2tlbiIsIm5ld1Rva2VuIiwiaWdub3JlQ2FzZSIsIl90b2tlbiIsInN0ciIsImpvaW4iLCJhZGRBY3Rpdml0eSIsImNvbW1lbnQiLCJzdGFydFRpbWVIb3VyIiwic3RhcnRUaW1lTWluIiwiZW5kVGltZUhvdXIiLCJlbmRUaW1lTWluIiwiZGF0ZUZyb21EYXkiLCJkYXRlRnJvbU1vbnRoIiwiZGF0ZUZyb21ZZWFyIiwiZGF0ZVVudGlsRGF5IiwiZGF0ZVVudGlsTW9udGgiLCJkYXRlVW50aWxZZWFyIiwiZGF0ZUZyb21kYXlTdHJpbmciLCJkYXRlRnJvbU1vbnRoU3RyaW5nIiwiZGF0ZVVudGlsRGF5U3RyaW5nIiwiZGF0ZVVudGlsTW9udGhTdHJpbmciLCJzdGFydFRpbWVIb3VyU3RyaW5nIiwic3RhcnRUaW1lTWluU3RyaW5nIiwiZW5kVGltZUhvdXJTdHJpbmciLCJlbmRUaW1lTWluU3RyaW5nIiwiZ2V0RGV0YWlsQWN0aXZpdHkiLCJjdXJyZW50VXNlciIsImFjdGl2aXR5IiwiaW50ZXJlc3RlZCIsImludGVyZXN0ZWRVc2VyIiwiY3JlYXRlclVzZXIiLCJzaG93QWN0aXZpdGllc09uSG9tZVBhZ2UiLCJnZXRNb3N0UmVjZW50QWN0aXZpdGllcyIsImdldE1vc3RQb3B1bGFyQWN0aXZpdGllcyIsIm51bWJlck9mQWN0aXZpdGllcyIsImFyckFsbEFjdGl2aXRpZXMiLCJzb3J0IiwiYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMiLCJpaWkiLCJkdW1teUFjdGl2aXR5Iiwic3BsaWNlIiwiYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwiaiIsImluZGV4TW9zdFBvcCIsImluZm9kZWxldGVkQWN0aXZpdHkiLCJDaGF0Q29udHJvbGxlciIsImluaXQiLCJtZXNzYWdlcyIsIm1lc3NhZ2UiLCJzZW5kTWVzc2FnZSIsInRleHQiLCJyZWNlaXZlciIsImNvbnRhY3RlZFVzZXIiLCJzZW5kZXIiLCJNYXRjaGVzQ29udHJvbGxlciIsImNsaWNrc09uQnRuIiwic2hvd0RpdiIsImZpbHRlciIsInNob3dGaWx0ZXIiLCJoaWRlRGl2Iiwic29ydFByb3BlcnR5IiwiZmlsdGVyUXVlcnkiLCJmaWx0ZXIyUXVlcnkiLCJmaWx0ZXJNYXRjaGVzIiwic2V4IiwiZmlsdGVyMk1hdGNoZXMiLCJpbnRlcnNlY3QiLCJhcnIxIiwiYXJyMiIsInYiLCJyIiwibyIsImwiLCJzaG93TWF0Y2hlcyIsImxvY2FsU3RvcmFnZSIsImFyclByb2ZpbGVzIiwidXNlcmxpc3QiLCJzYW1lSW50ZXJlc3RzIiwiaW50ZXJlc3RzIiwic2VhcmNoSW5NYXRjaGVzIiwiYXJyWmlwY29kZVdpdGhNYXRjaGVzIiwiUHJvZmlsZXNDb250cm9sbGVyIiwic3RhcnRDaGF0Iiwic2V0SXRlbSIsInBhdGgiLCJyZWRpcmVjdCIsInNob3dQcm9maWxlcyIsImZpbHRlclByb2ZpbGVzIiwic2VhcmNoSW5Qcm9maWxlcyIsImFyclppcGNvZGVXaXRoUHJvZmlsZXMiLCJVc2Vyc0NvbnRyb2xsZXIiLCJnZXRVc2VycyIsImFyclVzZXJzIiwiZ2V0RGV0YWlsVXNlciIsInVzZXJEZXRhaWxzIiwiY29ycmVjdHVzZXIiLCJpbmZvZGVsZXRlZFVzZXIiLCJ1cGRhdGVVc2VyIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJiaXJ0aGRhdGUiLCJiaW9ncmFwaHkiLCJpbmZvcm1hdGlvbiIsImdldFVzZXJCeUlEIiwidXNlclByb2ZpbGUiLCJzZWxlY3RlZEludGVyZXN0IiwibG9naW5Db250cm9sbGVyIiwibG9naW4iLCJwYXNzd29yZCIsImxzdCIsImNoYW5nZSIsInN0YXRlQ2hhbmdlZCIsInFJZCIsImdlb2xvY2F0aW9uIiwiZ2V0TG9jYXRpb24iLCJzdWNjZXNzQ2FsbGJhY2siLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImVycm9yQ2FsbGJhY2siLCJjb2RlIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJQT1NJVElPTl9VTkFWQUlMQUJMRSIsIlRJTUVPVVQiLCJVTktOT1dOX0VSUk9SIiwibmF2aWdhdG9yIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibWF4aW11bUFnZSIsInJlZ2lzdGVyIiwic2lnbnVwQ29udHJvbGxlciIsImNhdGVnb3JpZXMiLCJuZXdDYXRlZ29yeSIsInNhdmVDYXRlZ29yeSIsImVkaXRhYmxlQ2hlY2tib3hDb250cm9sbGVyIiwiY2F0ZWdvcnkiLCJzaG93TGFiZWwiLCJzaG93VGV4dGJveCIsImVkaXQiLCJpc0NoZWNrZWQiLCJ1c2VyQ29udHJvbGxlciIsImF1dGgiLCJpc0F1dGgiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLEdBQUFBLEdBQUFDLFFBQUFDLE9BQUEsT0FBQSxXQUNBRixHQUFBRyxRQUNBLGlCQUNBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUEsS0FBQUMsWUFBQSxzQkFBQUQsS0FBQSxXQUFBQyxZQUFBLHNCQUFBRCxLQUFBLFNBQUFDLFlBQUEsc0JBQUFELEtBQUEsWUFBQUMsWUFBQSx5QkFBQUQsS0FBQSxVQUFBQyxZQUFBLHVCQUFB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QSxHQUFBLE1BQUFBLEVBQ0EsR0FBQSxLQUFBUCxFQUFBekwsUUFBQWdNLEdBQUEsQ0FDQSxHQUFBak0sR0FBQTBMLEVBQUF6TCxRQUFBZ00sRUFDQWpNLEdBQUEsSUFDQTBMLEVBQUFqRSxPQUFBekgsRUFBQSxPQUdBMEwsR0FBQTVMLEtBQUFtTSxJQUlBekwsRUFBQXdMLGFBQUEsU0FBQUMsS0FHQWxULFNBQUFDLE9BQUEsT0FBQUssV0FBQSxtQkFDQSxTQUNBLGFBQ0EsUUFDQSxZQUNBLGNBQ0FzUyxJQUNBdFMsV0FBQSxvQkFDQSxTQUNBNlQsSUFDQTdULFdBQUEsOEJBQ0EsU0FDQWlVLE9BTUEsV0FDQSxZQUNBLElBQUFNLEdBQUEsU0FBQXBOLEVBQUFqSCxFQUFBc0IsRUFBQTRGLEdBQ0E1RixFQUFBa0QsSUFBQSxTQUFBcEMsUUFBQSxTQUFBOEIsR0FDQStDLEVBQUFoSCxLQUFBaUUsRUFDQWxFLEVBQUFDLEtBQUFpRSxFQUNBLFNBQUFBLEVBQUFqQixTQUNBZ0UsRUFBQXFOLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBLFNBQUF0USxFQUFBakIsVUFBQWQsU0FBQStCLEVBQUFqQixTQUNBZ0UsRUFBQXFOLE1BQ0FDLFFBQUEsRUFDQUMsU0FBQSxHQUVBclMsU0FBQStCLEVBQUFqQixXQUNBZ0UsRUFBQXFOLE1DbkxBQyxRQUFBLEVBQ0FDLFNBQUEsTUFTQWhWLFNBQUFDLE9BQUEsT0FBQUssV0FBQSxrQkFDQSxTQUNBLGFBQ0EsUUFDQSxZQUNBdVUiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBNYXJ0aGUgb24gMTAvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xuICAgIGFwcC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpe1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvaG9tZS5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zaWdudXBcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3Mvc2lnbnVwLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2hvbWVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob21lLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL21hdGNoZXNcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9tYXRjaGVzLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2hvd3RvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvaG93VG8uaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdGllc1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2FjdGl2aXRpZXMuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYWRtaW5cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9hZG1pbi5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zZWFyY2hwcm9maWxlc1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL3NlYXJjaFByb2ZpbGVzLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL215cHJvZmlsZVwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL215UHJvZmlsZS5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi91c2VyZGV0YWlscy86dXNlcm5hbWVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzVXNlci5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9kZXRhaWxzdXNlclwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNVc2VyLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2FjdGl2aXR5ZGV0YWlscy86YWN0aXZpdHlOYW1lXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNBY3Rpdml0eS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBY3Rpdml0aWVzQ29udHJvbGxlclwiXG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9jaGF0XCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvY2hhdC5odG1sXCJcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuICAgIGFwcC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0ge307XG4gICAgfSk7XG5cbiAgICBhcHAuZGlyZWN0aXZlKCduZ0VudGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgZWxlbWVudC5iaW5kKFwia2V5ZG93biBrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZXZhbChhdHRycy5uZ0VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG4gICAgYXBwLmRpcmVjdGl2ZSgnZmlsZU1vZGVsJywgWyckcGFyc2UnLCBmdW5jdGlvbiAoJHBhcnNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZpbGVNb2RlbCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsU2V0dGVyID0gbW9kZWwuYXNzaWduO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGVyKHNjb3BlLCBlbGVtZW50WzBdLmZpbGVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pO1xuXG4gICAgYXBwLnNlcnZpY2UoJ2ZpbGVVcGxvYWQnLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZVRvVXJsID0gZnVuY3Rpb24oZmlsZSwgdXBsb2FkVXJsKXtcbiAgICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KHVwbG9hZFVybCwgZmQsIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5LFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XSk7XG5cblxuICAgIGFwcC5kaXJlY3RpdmUoJ2VkaXRhYmxlQ2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2VkaXRhYmxlY2hlY2tib3guaHRtbCdcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDE1LzEyLzE1LlxuICovXG52YXIgQWN0aXZpdHkgPSBmdW5jdGlvbihuYW1lLCB6aXBjb2RlLCBzdHJlZXQsIG51bWJlciwgZGVzY3JpcHRpb24sIGRhdGVGcm9tLCBkYXRlVW50aWwsIHRpbWVzdGFtcCwgdXNlcm5hbWUsIG1hdGNoZXMpe1xuICAgIHRoaXMuYWN0aXZpdHlOYW1lID0gbmFtZTtcbiAgICB0aGlzLnppcGNvZGUgPSB6aXBjb2RlO1xuICAgIHRoaXMuc3RyZWV0ID0gc3RyZWV0O1xuICAgIHRoaXMubnVtYmVyID0gbnVtYmVyO1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLmRhdGVGcm9tID0gZGF0ZUZyb207XG4gICAgdGhpcy5kYXRlVW50aWwgPSBkYXRlVW50aWw7XG4gICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7XG4gICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgIHRoaXMubWF0Y2hlcyA9IG1hdGNoZXM7XG59OyIsIi8qKlxuICogQ3JlYXRlZCBieSBOaWtpdGEgb24gNy8wMS8yMDE2LlxuICovXG5cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGNoYXRTZXJ2aWNlID0gZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAgICAgdmFyIHNvY2tldCA9IGlvLmNvbm5lY3Qod2luZG93LmxvY2F0aW9uLmhvc3QpO1xuXG4gICAgICAgIHZhciBvbiA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzb2NrZXQub24oZXZlbnROYW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGVtaXQgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBkYXRhLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoZXZlbnROYW1lLCBkYXRhLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5hcHBseShzb2NrZXQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb246IG9uLFxuICAgICAgICAgICAgZW1pdDogZW1pdCxcbiAgICAgICAgICAgIHNvY2tldDogc29ja2V0XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJjaGF0U2VydmljZVwiLCBbXCIkcm9vdFNjb3BlXCIsIGNoYXRTZXJ2aWNlXSk7XG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gMTUvMTIvMTUuXG4gKi9cblxuXG4oZnVuY3Rpb24oKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIGRiU2VydmljZSA9IGZ1bmN0aW9uICgkaHR0cCkge1xuXG4gICAgICAgIHZhciBnZXRDb2xsZWN0aW9uID0gZnVuY3Rpb24gKGNvbGxlY3Rpb24pIHtcblxuXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbjtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZ2V0QnlJRCA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBpZCkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi9cIiArIGlkO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXREZXRhaWxzVXNlciA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCB1c2VybmFtZSkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi91c2VyZGV0YWlsL1wiICsgdXNlcm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGRlbGV0ZVVzZXIgPSAgZnVuY3Rpb24gKGNvbGxlY3Rpb24sIHVzZXJuYW1lKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL3VzZXJkZWxldGUvXCIgKyB1c2VybmFtZTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHZhciBnZXRJdGVtID0gZnVuY3Rpb24oaXRlbSl7XG5cbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBpdGVtO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL3VzZXInKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBnZXREZXRhaWxzQWN0aXZpdHkgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgYWN0aXZpdHluYW1lKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL2FjdGl2aXR5ZGV0YWlsL1wiICsgYWN0aXZpdHluYW1lO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGRlbGV0ZUFjdGl2aXR5ID0gIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBhY3Rpdml0eUlkKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvYXBpL1wiICsgY29sbGVjdGlvbiArIFwiL2FjdGl2aXR5ZGVsZXRlL1wiICsgYWN0aXZpdHlJZDtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHZhciBnZXROb2lzZVdvcmRzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgdXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvZGF0YS9ub2lzZXdvcmRzLmpzb25cIjtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG5cbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcbiAgICAgICAgcmV0dXJue1xuXG4gICAgICAgICAgICBnZXRDb2xsZWN0aW9uOmdldENvbGxlY3Rpb24sXG4gICAgICAgICAgICBnZXRCeUlEOmdldEJ5SUQsXG4gICAgICAgICAgICBnZXRJdGVtOmdldEl0ZW0sXG4gICAgICAgICAgICBnZXREZXRhaWxzVXNlcjogZ2V0RGV0YWlsc1VzZXIsXG4gICAgICAgICAgICBkZWxldGVVc2VyOiBkZWxldGVVc2VyLFxuICAgICAgICAgICAgZ2V0RGV0YWlsc0FjdGl2aXR5OiBnZXREZXRhaWxzQWN0aXZpdHksXG4gICAgICAgICAgICBnZXROb2lzZVdvcmRzOiBnZXROb2lzZVdvcmRzLFxuICAgICAgICAgICAgZGVsZXRlQWN0aXZpdHk6IGRlbGV0ZUFjdGl2aXR5XG5cbiAgICAgICAgfTtcblxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiZGJTZXJ2aWNlXCIsIFtcIiRodHRwXCIsIGRiU2VydmljZV0pO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gZGV6ZSBuYWFtIGJlcGFhbHQgd2Vsa2UgbmFhbSBqZSBub2RpZyBoZWJ0IGluIGplIGNvbnRyb2xsZXIgYWxzIHZlcndpanppbmchXG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBtYXRjaGVzU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZ2V0TWF0Y2hlcyA9IGZ1bmN0aW9uIChuYW1lVXNlcikge1xuXG4gICAgICAgICAgICB2YXIgdmFyaWFiZWxVUkwgPSBcInRvZ2V0aGVyXCI7XG4gICAgICAgICAgICB2YXIgbG9jYWxVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9kYXRhL21hdGNoZXMuanNvblwiO1xuICAgICAgICAgICAgdmFyIHhtbEh0dHAgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgIHhtbEh0dHAub3BlbihcIkdFVFwiLCBsb2NhbFVybCwgZmFsc2UpO1xuICAgICAgICAgICAgeG1sSHR0cC5zZW5kKG51bGwpO1xuXG4gICAgICAgICAgICBpZih4bWxIdHRwLnN0YXR1cyA9PSAyMDApIHtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZSh4bWxIdHRwLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaGVzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoVXNlcnMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hJbnRlcmVzdHMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgZGF0YS5sZW5ndGg7IGkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXNlclwiOiBkYXRhW2ldLnVzZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIm1hdGNoZXNcIjpkYXRhW2ldLm1hdGNoZXNcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChvYmopO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IDA7IGlpPGFyci5sZW5ndGg7IGlpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGFycltpaV0udXNlci5pbmRleE9mKG5hbWVVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoaW5kZXggPT09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hlcy5wdXNoKGFycltpaV0ubWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhcIkluZGV4OiBcIitpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhcnIpO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coYXJyTWF0Y2hlc1swXSk7XG5cblxuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaGVzQnlVc2VyID0gYXJyTWF0Y2hlc1swXTtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiQWFudGFsIG1hdGNoZXM6IFwiICsgYXJyTWF0Y2hlc0J5VXNlci5sZW5ndGgpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFyck1hdGNoZXNCeVVzZXI7XG5cbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWlpID0gMDsgaWlpPGFyck1hdGNoZXNbMF0ubGVuZ3RoOyBpaWkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hdGNoVXNlciA9IGFyck1hdGNoZXNbMF1baWlpXS51c2VyO1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hJbnRlcmVzdHMgPSBhcnJNYXRjaGVzWzBdW2lpaV0uaW50ZXJlc3RzO1xuXG4gICAgICAgICAgICAgICAgICAgIGFyck1hdGNoVXNlcnMucHVzaChtYXRjaFVzZXIpO1xuICAgICAgICAgICAgICAgICAgICBhcnJNYXRjaEludGVyZXN0cy5wdXNoKG1hdGNoSW50ZXJlc3RzKTtcblxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKG1hdGNoVXNlcik7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWF0Y2hJbnRlcmVzdHMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyck1hdGNoVXNlcnMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyck1hdGNoSW50ZXJlc3RzKTtcbiAgICAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgZ2VkZWVsdGVcbiAgICAgICAgcmV0dXJue1xuXG4gICAgICAgICAgICBnZXRNYXRjaGVzOmdldE1hdGNoZXMsXG5cbiAgICAgICAgfTtcblxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwibWF0Y2hlc1NlcnZpY2VcIiwgW21hdGNoZXNTZXJ2aWNlXSk7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXiBkZXplIG5hYW0gYmVwYWFsdCB3ZWxrZSBuYWFtIGplIG5vZGlnIGhlYnQgaW4gamUgY29udHJvbGxlciBhbHMgdmVyd2lqemluZyFcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiA1LzEyLzE1LlxuICovXG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICB2YXIgZGF0ZVRpbWVOb3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKSArIFwiIFwiICsgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnN1YnN0cmluZygxMSwgMTYpO1xuXG4gICAgdmFyIEFjdGl2aXRpZXNDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSwgZGJTZXJ2aWNlLCAkaHR0cCwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsICRyb3V0ZSkge1xuICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IHRydWU7XG4gICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJJbnRlcmVzdGVkXCI7XG5cbiAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGFyckFjdHMgPSBbXTtcblxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFyclRlbXAubGVuZ3RoO2ktLTspe1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3IERhdGUoYXJyVGVtcFtpXS51bnRpbERhdGUpLmdldFRpbWUoKSA+PSBuZXcgRGF0ZShkYXRlVGltZU5vdykuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhcnJUZW1wW2ldLmRlbGV0ZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZGVsZXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyckFjdHMucHVzaChhcnJUZW1wW2ldKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJBY3Rpdml0aWVzID0gYXJyQWN0cztcblxuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICB9O1xuXG4gICAgICAgIFN0cmluZy5wcm90b3R5cGUucmVwbGFjZUFsbCA9IGZ1bmN0aW9uICh0b2tlbiwgbmV3VG9rZW4sIGlnbm9yZUNhc2UpIHtcbiAgICAgICAgICAgIHZhciBfdG9rZW47XG4gICAgICAgICAgICB2YXIgc3RyID0gdGhpcyArIFwiXCI7XG4gICAgICAgICAgICB2YXIgaSA9IC0xO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHRva2VuID09PSBcInN0cmluZ1wiKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoaWdub3JlQ2FzZSkge1xuXG4gICAgICAgICAgICAgICAgICAgIF90b2tlbiA9IHRva2VuLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBzdHIudG9Mb3dlckNhc2UoKS5pbmRleE9mKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRva2VuLCBpID49IDAgPyBpICsgbmV3VG9rZW4ubGVuZ3RoIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgKSApICE9PSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHIgPSBzdHIuc3Vic3RyaW5nKDAsIGkpICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdUb2tlbiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyLnN1YnN0cmluZyhpICsgdG9rZW4ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXQodG9rZW4pLmpvaW4obmV3VG9rZW4pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBpc0luQXJyYXkodmFsdWUsIGFycmF5KSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbihkZXNjcmlwdGlvbiwgY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCcuJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCcsJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCc/JywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCchJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKCdcIicsICcnKTtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24ucmVwbGFjZUFsbChcIidcIiwgJycpO1xuXG4gICAgICAgICAgICB2YXIgd29yZHMgPSBkZXNjcmlwdGlvbi5zcGxpdChcIiBcIik7XG4gICAgICAgICAgICB2YXIga2V5V29yZHMgPSBcIlwiO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Tm9pc2VXb3JkcygpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9pc2VXb3JkcyA9IHJlc3BvbnNlLm5vaXNld29yZHM7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gd29yZHMubGVuZ3RoOyBpLS07KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5BcnJheSh3b3Jkc1tpXS50b0xvd2VyQ2FzZSgpLCBub2lzZVdvcmRzKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5V29yZHMgKz0gd29yZHNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlXb3JkcyArPSBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vcmV0dXJuIGtleVdvcmRzO1xuICAgICAgICAgICAgICAgIGlmICgha2V5V29yZHMuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBrZXlXb3Jkcyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8ga2V5d29yZHMgZm91bmQuXCIsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhudW1iZXIsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0ID0gbnVtYmVyICsgJyc7XG4gICAgICAgICAgICBpZiAob3V0cHV0Lmxlbmd0aCA8IDIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSAnMCcgKyBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgbnVtYmVyID0gb3V0cHV0LnRvU3RyaW5nKCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG51bWJlciA9IG51bWJlci50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGlmICghbnVtYmVyLmlzRW1wdHkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhudWxsLCBudW1iZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhcIk5vIG51bWJlci5cIiwgbnVsbCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZnVsbERhdGUobnVtYmVyLCBudW1iZXIyLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyLCBmdW5jdGlvbiAoZXJyb3IsIG51bWJlclRvU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyVG9TdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMobnVtYmVyMiwgZnVuY3Rpb24gKGVycm9yLCBudW1iZXJUb1N0cmluZykge1xuICAgICAgICAgICAgICAgIG51bWJlcjIgPSBudW1iZXJUb1N0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghbnVtYmVyLmlzRW1wdHkgJiYgIW51bWJlcjIuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bWJlciwgbnVtYmVyMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbnVtYmVyLlwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuXG4gICAgICAgICRzY29wZS5hZGRBY3Rpdml0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBhY3Rpdml0eU5hbWUgPSB0aGlzLmFjdGl2aXR5TmFtZTtcbiAgICAgICAgICAgIHZhciBzdHJlZXQgPSB0aGlzLnN0cmVldDtcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSB0aGlzLm51bWJlcjtcbiAgICAgICAgICAgIHZhciB6aXBjb2RlID0gdGhpcy56aXBjb2RlO1xuICAgICAgICAgICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5jb21tZW50O1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gdGhpcy5kYXRlRnJvbTtcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWwgPSB0aGlzLmRhdGVVbnRpbDtcbiAgICAgICAgICAgIHZhciB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgIHZhciBzdGFydFRpbWVIb3VyID0gdGhpcy5zdGFydFRpbWVIb3VyO1xuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZU1pbiA9IHRoaXMuc3RhcnRUaW1lTWluO1xuICAgICAgICAgICAgdmFyIGVuZFRpbWVIb3VyID0gdGhpcy5lbmRUaW1lSG91cjtcbiAgICAgICAgICAgIHZhciBlbmRUaW1lTWluID0gdGhpcy5lbmRUaW1lTWluO1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tRGF5ID0gdGhpcy5kYXRlRnJvbURheTtcbiAgICAgICAgICAgIHZhciBkYXRlRnJvbU1vbnRoID0gdGhpcy5kYXRlRnJvbU1vbnRoO1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tWWVhciA9IHRoaXMuZGF0ZUZyb21ZZWFyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsRGF5ID0gdGhpcy5kYXRlVW50aWxEYXk7XG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsTW9udGggPSB0aGlzLmRhdGVVbnRpbE1vbnRoO1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbFllYXIgPSB0aGlzLmRhdGVVbnRpbFllYXIudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgZnVsbERhdGUoZGF0ZUZyb21EYXksIGRhdGVGcm9tTW9udGgsIGZ1bmN0aW9uIChlcnJvciwgZGF0ZUZyb21kYXlTdHJpbmcsIGRhdGVGcm9tTW9udGhTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBkYXRlRnJvbURheSA9IGRhdGVGcm9tZGF5U3RyaW5nO1xuICAgICAgICAgICAgICAgIGRhdGVGcm9tTW9udGggPSBkYXRlRnJvbU1vbnRoU3RyaW5nO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmdWxsRGF0ZShkYXRlVW50aWxEYXksIGRhdGVVbnRpbE1vbnRoLCBmdW5jdGlvbiAoZXJyb3IsIGRhdGVVbnRpbERheVN0cmluZywgZGF0ZVVudGlsTW9udGhTdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxEYXkgPSBkYXRlVW50aWxEYXlTdHJpbmc7XG4gICAgICAgICAgICAgICAgZGF0ZVVudGlsTW9udGggPSBkYXRlVW50aWxNb250aFN0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgICAgaWYobmV3IERhdGUoZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluKS5nZXRUaW1lKCkgPD0gbmV3IERhdGUoZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4pLmdldFRpbWUoKSl7XG4gICAgICAgICAgICAgICAgaWYobmV3IERhdGUoZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4pLmdldFRpbWUoKSA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKXtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGF0ZSB1bnRpbCBjYW4ndCBiZSBiZWZvcmUgdG9kYXlcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiIEVuZGRhdGUgY2FuJ3QgYmUgYmVmb3JlIHN0YXJ0ZGF0ZVwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKChzdHJlZXQgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAobnVtYmVyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHppcGNvZGUgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGVzY3JpcHRpb24gIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAodGltZXN0YW1wICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVGcm9tWWVhciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbU1vbnRoICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVGcm9tRGF5ICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZUhvdXIgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoc3RhcnRUaW1lTWluICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbFllYXIgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGF0ZVVudGlsTW9udGggIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGF0ZVVudGlsRGF5ICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGVuZFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGVuZFRpbWVNaW4gIT09IHVuZGVmaW5lZCkpIHtcblxuXG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhcnRUaW1lTWluIDwgNjAgJiYgc3RhcnRUaW1lSG91ciA8IDI1KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nQ29uc2lzdE9mMk51bWJlcnMoc3RhcnRUaW1lSG91ciwgZnVuY3Rpb24gKGVycm9yLCBzdGFydFRpbWVIb3VyU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVIb3VyID0gc3RhcnRUaW1lSG91clN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKHN0YXJ0VGltZU1pbiwgZnVuY3Rpb24gKGVycm9yLCBzdGFydFRpbWVNaW5TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZU1pbiA9IHN0YXJ0VGltZU1pblN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydFRpbWVNaW4ubGVuZ3RoID09PSAyICYmIHN0YXJ0VGltZUhvdXIubGVuZ3RoID09PSAyKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lTWluIDwgNjAgJiYgZW5kVGltZUhvdXIgPCAyNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKGVuZFRpbWVIb3VyLCBmdW5jdGlvbiAoZXJyb3IsIGVuZFRpbWVIb3VyU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVIb3VyID0gZW5kVGltZUhvdXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhlbmRUaW1lTWluLCBmdW5jdGlvbiAoZXJyb3IsIGVuZFRpbWVNaW5TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kVGltZU1pbiA9IGVuZFRpbWVNaW5TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lTWluLnRvU3RyaW5nKCkubGVuZ3RoID09PSAyICYmIGVuZFRpbWVIb3VyLnRvU3RyaW5nKCkubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVGcm9tWWVhciArIFwiLVwiICsgZGF0ZUZyb21Nb250aCArIFwiLVwiICsgZGF0ZUZyb21EYXkgKyBcIiBcIiArIHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbikuZ2V0VGltZSgpIDw9IG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobmV3IERhdGUoZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4pLmdldFRpbWUoKSA+IG5ldyBEYXRlKCkuZ2V0VGltZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRLZXl3b3Jkc0Zyb21EZXNjcmlwdGlvbihkZXNjcmlwdGlvbiwgZnVuY3Rpb24gKGVycm9yLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IFwiL2FwaS9hY3Rpdml0aWVzL2FkZGFjdGl2aXR5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5TmFtZTogYWN0aXZpdHlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVldDogc3RyZWV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bWJlcjogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHppcGNvZGU6IHppcGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVGcm9tOiBkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZVVudGlsOiBkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHRpbWVzdGFtcFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc2V0Rm9ybSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID1cIkVuZGRhdGUgY2FuJ3QgYmUgYmVmb3JlIHRvZGF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFbmRkYXRlIGlucHV0IGlzIG5vdCBjb3JyZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkVuZHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSAnRGUgc3RhcnRpbWUgbGVuZ3RoIGlzIG5vdCBjb3JyZWN0ISEhISAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIlN0YXJ0dGltZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkVSUk9SOiBBbGwgZmllbGRzIGFyZSByZXF1aXJlZC5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZ2V0RGV0YWlsQWN0aXZpdHkgPSBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIGRiU2VydmljZS5nZXREZXRhaWxzQWN0aXZpdHkoJ2FjdGl2aXRpZXMnLCAkcm91dGVQYXJhbXMuYWN0aXZpdHlOYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkgPSByZXNwb25zZS5hY3Rpdml0eTtcbiAgICAgICAgICAgICAgICBpbml0bWFwKCk7XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubWF0Y2hlcy5sZW5ndGg7IGktLTspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkubWF0Y2hlc1tpXSA9PT0gY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJOb3QgaW50ZXJlc3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ZWRBY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eTtcblxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZCA9IGZ1bmN0aW9uIChhY3Rpdml0eU5hbWUsIGludGVyZXN0ZWRVc2VyLCBjcmVhdGVyVXNlcikge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiXCI7XG4gICAgICAgICAgICB2YXIgaW50ZXJlc3RlZEFjdCA9ICRzY29wZS5pbnRlcmVzdGVkQWN0O1xuICAgICAgICAgICAgaWYgKGludGVyZXN0ZWRBY3QgIT09IGZhbHNlKSB7XG5cbiAgICAgICAgICAgICAgICB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9pbnRlcmVzdGVkXCI7XG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlOYW1lOiBhY3Rpdml0eU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVyZXN0ZWRVc2VyOiBpbnRlcmVzdGVkVXNlcixcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlclVzZXI6IGNyZWF0ZXJVc2VyXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJOb3QgaW50ZXJlc3RlZFwiO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBkYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIHVybCA9IFwiL2FwaS9hY3Rpdml0aWVzL2RlbGV0ZWludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZFVzZXI6IGludGVyZXN0ZWRVc2VyLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVyVXNlcjogY3JlYXRlclVzZXJcbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIkludGVyZXN0ZWRcIjtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBkYXRhLmVycm9yO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlY2VudEZpcnN0KGEsIGIpIHtcbiAgICAgICAgICAgIGlmIChhLnRpbWVzdGFtcCA+IGIudGltZXN0YW1wKVxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIGlmIChhLnRpbWVzdGFtcCA8IGIudGltZXN0YW1wKVxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwb3B1bGFyRmlyc3QoYXJyKSB7XG4gICAgICAgICAgICB2YXIgbWF4ID0gYXJyWzBdO1xuICAgICAgICAgICAgdmFyIG1heEluZGV4ID0gMDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldLm1hdGNoZXMubGVuZ3RoID4gbWF4Lm1hdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIG1heEluZGV4ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gYXJyW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIG1heEluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgJHNjb3BlLnNob3dBY3Rpdml0aWVzT25Ib21lUGFnZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFJlY2VudEFjdGl2aXRpZXMoKTtcbiAgICAgICAgICAgICRzY29wZS5nZXRNb3N0UG9wdWxhckFjdGl2aXRpZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZ2V0TW9zdFJlY2VudEFjdGl2aXRpZXMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtYmVyT2ZBY3Rpdml0aWVzID0gMztcbiAgICAgICAgICAgICAgICB2YXIgYXJyVGVtcCA9IHJlc3BvbnNlLmFjdGl2aXRpZWxpc3Q7XG4gICAgICAgICAgICAgICAgdmFyIGFyckFsbEFjdGl2aXRpZXMgPSBbXTtcblxuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFyclRlbXAubGVuZ3RoO2ktLTspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnB1c2goYXJyVGVtcFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnNvcnQocmVjZW50Rmlyc3QpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaSA9IG51bWJlck9mQWN0aXZpdGllczsgaWktLTspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMucHVzaChhcnJBbGxBY3Rpdml0aWVzW2lpXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLmxlbmd0aDsgaWlpLS07KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGR1bW15QWN0aXZpdHkgPSBuZXcgQWN0aXZpdHkoXCJObyBuYW1lXCIsIDg1MDAsIFwiVG9nZXRoZXJcIiwgMiwgXCJubyBkZXNjcmlwdGlvblwiLCBcIjIwMTYtMDEtMDEgMDA6MDFcIiwgXCIyMDE3LTEyLTMxIDIzOjU5XCIsIG5ldyBEYXRlKCksIFwibm8gdXNlcm5hbWVcIiwgbWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnJNb3N0UmVjZW50QWN0aXZpdGllc1tpaWldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJNb3N0UmVjZW50QWN0aXZpdGllcyA9IGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgZGJTZXJ2aWNlLmdldENvbGxlY3Rpb24oJ2FjdGl2aXRpZXMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBudW1iZXJPZkFjdGl2aXRpZXMgPSAzO1xuICAgICAgICAgICAgICAgIHZhciBhcnJUZW1wID0gcmVzcG9uc2UuYWN0aXZpdGllbGlzdDtcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWxsQWN0aXZpdGllcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFyclRlbXAubGVuZ3RoOyBpLS07KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5wdXNoKGFyclRlbXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IG51bWJlck9mQWN0aXZpdGllczsgaisrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhNb3N0UG9wID0gcG9wdWxhckZpcnN0KGFyckFsbEFjdGl2aXRpZXMpO1xuICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMucHVzaChhcnJBbGxBY3Rpdml0aWVzW2luZGV4TW9zdFBvcF0pO1xuICAgICAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnNwbGljZShpbmRleE1vc3RQb3AsIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaWkgPSAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLmxlbmd0aDsgaWlpLS07KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGR1bW15QWN0aXZpdHkgPSBuZXcgQWN0aXZpdHkoXCJObyBuYW1lXCIsIDg1MDAsIFwiVG9nZXRoZXJcIiwgMiwgXCJubyBkZXNjcmlwdGlvblwiLCBcIjIwMTYtMDEtMDEgMDA6MDFcIiwgXCIyMDE3LTEyLTMxIDIzOjU5XCIsIG5ldyBEYXRlKCksIFwibm8gdXNlcm5hbWVcIiwgbWF0Y2hlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXNbaWlpXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMuc3BsaWNlKGlpaSwgMSwgZHVtbXlBY3Rpdml0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzID0gYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmRlbGV0ZUFjdGl2aXR5ID0gZnVuY3Rpb24oYWN0aXZpdHlJZCl7XG4gICAgICAgICAgICBkYlNlcnZpY2UuZGVsZXRlQWN0aXZpdHkoJ2FjdGl2aXRpZXMnLCBhY3Rpdml0eUlkKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW5mb2RlbGV0ZWRBY3Rpdml0eSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICRzY29wZS5nZXRBY3Rpdml0aWVzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXRtYXAoKXtcbiAgICAgICAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICAgICAgICAgIHpvb206IDgsXG4gICAgICAgICAgICAgICAgY2VudGVyOiB7bGF0OiA1MC44MTk0ODk0LCBsbmc6IDMuMjU3NzA3Nn1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIGdlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XG5cbiAgICAgICAgICAgIGdlb2NvZGVBZGRyZXNzKGdlb2NvZGVyLCBtYXApO1xuXG4gICAgICAgIH1cblxuXG4gICAgICAgIGZ1bmN0aW9uIGdlb2NvZGVBZGRyZXNzKGdlb2NvZGVyLCByZXN1bHRzTWFwKSB7XG4gICAgICAgICAgICB2YXIgc3RyZWV0ID0gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS5zdHJlZXQ7XG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS5udW1iZXI7XG4gICAgICAgICAgICB2YXIgemlwY29kZSA9ICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkuemlwY29kZTtcblxuICAgICAgICAgICAgdmFyIGFkZHJlc3MgPSBzdHJlZXQgKyBcIiBcIiArIG51bWJlciArIFwiLCBcIiArIHppcGNvZGU7IC8vaGllciBhZGRyZXNzIHVpdCBkYiBpbnN0b3BwZW5cblxuICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2FkZHJlc3MnOiBhZGRyZXNzfSwgZnVuY3Rpb24gKHJlc3VsdHMsIHN0YXR1cykge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNNYXAuc2V0Q2VudGVyKHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaW1hZ2UgPSBcIi4uLy4uL2ltYWdlcy9tYXJrZXIucG5nXCI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogcmVzdWx0c01hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaW1hZ2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0dlb2NvZGUgd2FzIG5vdCBzdWNjZXNzZnVsIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbjogJyArIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XG4gICAgICAgICAgICB2YXIgZnJtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ0FjdGl2aXR5Rm9ybScpWzBdO1xuICAgICAgICAgICAgZnJtLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIkFjdGl2aXRpZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcImRiU2VydmljZVwiLCBcIiRodHRwXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHJvdXRlUGFyYW1zXCIsIFwiZmlsZVVwbG9hZFwiLCBBY3Rpdml0aWVzQ29udHJvbGxlcl0pO1xuXG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IE5pa2l0YSBvbiA3LzAxLzIwMTYuXG4gKi9cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGZ1bmN0aW9uIENoYXRDb250cm9sbGVyKCRzY29wZSwkcm9vdFNjb3BlLGNoYXRTZXJ2aWNlKSB7XG4gICAgICAgICRzY29wZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy9jaGF0U2VydmljZS5lbWl0KFwiaW5pdF91c2Vyc1wiLHt1c2VyOiRyb290U2NvcGUuY3VycmVudFVzZXIsIGNvbGxlY3Rpb246XCJ1c2Vyc1wifSk7XG5cbiAgICAgICAgfTtcbiAgICAgICAgY2hhdFNlcnZpY2UuZW1pdChcImhhbGxvTmlraXRhXCIpO1xuICAgICAgICAkc2NvcGUubWVzc2FnZXMgPSBbXTtcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBcIlwiO1xuICAgICAgICAkc2NvcGUuc2VuZE1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7dXNlcjogJHJvb3RTY29wZS5jdXJyZW50VXNlcixcbiAgICAgICAgICAgICAgICB0ZXh0OnRoaXMubWVzc2FnZSxcbiAgICAgICAgICAgIHJlY2VpdmVyOiRyb290U2NvcGUuY29udGFjdGVkVXNlci51c2VybmFtZX07XG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgICAgIGNoYXRTZXJ2aWNlLmVtaXQoXCJtZXNzYWdlXCIsIG1lc3NhZ2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGNoYXRTZXJ2aWNlLm9uKFwibWVzc2FnZV9yZWNlaXZlclwiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSkUgQkVOVCBFUiFcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YS5zZW5kZXIpO1xuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe3RleHQ6ZGF0YS5tZXNzYWdlLCB1c2VyOmRhdGEuc2VuZGVyfSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIFNvY2tldCBsaXN0ZW5lcnNcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PVxuICAgICAgICAvKlxuICAgICAgICBzb2NrZXQub24oJ2luaXQnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgICAgICAkc2NvcGUudXNlcnMgPSBkYXRhLnVzZXJzO1xuICAgICAgICB9KTtcblxuICAgICAgICBzb2NrZXQub24oJ3NlbmQ6bWVzc2FnZScsIGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCdjaGFuZ2U6bmFtZScsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBjaGFuZ2VOYW1lKGRhdGEub2xkTmFtZSwgZGF0YS5uZXdOYW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmpvaW4nLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVzZXI6ICdjaGF0cm9vbScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGpvaW5lZC4nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzY29wZS51c2Vycy5wdXNoKGRhdGEubmFtZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGFkZCBhIG1lc3NhZ2UgdG8gdGhlIGNvbnZlcnNhdGlvbiB3aGVuIGEgdXNlciBkaXNjb25uZWN0cyBvciBsZWF2ZXMgdGhlIHJvb21cbiAgICAgICAgc29ja2V0Lm9uKCd1c2VyOmxlZnQnLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVzZXI6ICdjaGF0cm9vbScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIGRhdGEubmFtZSArICcgaGFzIGxlZnQuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgaSwgdXNlcjtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCAkc2NvcGUudXNlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB1c2VyID0gJHNjb3BlLnVzZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmICh1c2VyID09PSBkYXRhLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVzZXJzLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQcml2YXRlIGhlbHBlcnNcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09XG5cbiAgICAgICAgdmFyIGNoYW5nZU5hbWUgPSBmdW5jdGlvbiAob2xkTmFtZSwgbmV3TmFtZSkge1xuICAgICAgICAgICAgLy8gcmVuYW1lIHVzZXIgaW4gbGlzdCBvZiB1c2Vyc1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgJHNjb3BlLnVzZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCRzY29wZS51c2Vyc1tpXSA9PT0gb2xkTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUudXNlcnNbaV0gPSBuZXdOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgIHVzZXI6ICdjaGF0cm9vbScsXG4gICAgICAgICAgICAgICAgdGV4dDogJ1VzZXIgJyArIG9sZE5hbWUgKyAnIGlzIG5vdyBrbm93biBhcyAnICsgbmV3TmFtZSArICcuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gTWV0aG9kcyBwdWJsaXNoZWQgdG8gdGhlIHNjb3BlXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgICRzY29wZS5jaGFuZ2VOYW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ2NoYW5nZTpuYW1lJywge1xuICAgICAgICAgICAgICAgIG5hbWU6ICRzY29wZS5uZXdOYW1lXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoZXJlIHdhcyBhbiBlcnJvciBjaGFuZ2luZyB5b3VyIG5hbWUnKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgIGNoYW5nZU5hbWUoJHNjb3BlLm5hbWUsICRzY29wZS5uZXdOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZSA9ICRzY29wZS5uZXdOYW1lO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmV3TmFtZSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5tZXNzYWdlcyA9IFtdO1xuXG4gICAgICAgICRzY29wZS5zZW5kTWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdzZW5kOm1lc3NhZ2UnLCB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJHNjb3BlLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBhZGQgdGhlIG1lc3NhZ2UgdG8gb3VyIG1vZGVsIGxvY2FsbHlcbiAgICAgICAgICAgICRzY29wZS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB1c2VyOiAkc2NvcGUubmFtZSxcbiAgICAgICAgICAgICAgICB0ZXh0OiAkc2NvcGUubWVzc2FnZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNsZWFyIG1lc3NhZ2UgYm94XG4gICAgICAgICAgICAkc2NvcGUubWVzc2FnZSA9ICcnO1xuICAgICAgICB9OyovXG4gICAgfVxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJDaGF0Q29udHJvbGxlclwiLCBbXCIkc2NvcGVcIixcIiRyb290U2NvcGVcIixcImNoYXRTZXJ2aWNlXCIsIENoYXRDb250cm9sbGVyXSk7XG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIE1hdGNoZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBkYlNlcnZpY2UpIHtcblxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xuXG4gICAgICAgICRzY29wZS5zaG93RGl2ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuKys7XG5cbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOmZhbHNlfTtcbiAgICAgICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOmZhbHNlfTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc29ydFByb3BlcnR5ID0gXCJ0aXRsZVwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyMlF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlck1hdGNoZXMgPSBmdW5jdGlvbihpKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBlbHNlIGlmKGkudXNlcm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT0gaS5zZXgudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09IFwibm9maWx0ZXJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5maWx0ZXIyTWF0Y2hlcyA9IGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSA9PT0gXCJcIil7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoaSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoaS56aXBjb2RlID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ID09IGkuemlwY29kZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeS50b0xvd2VyQ2FzZSgpID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyMlF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vaHR0cDovL3d3dy5mYWxzZXBvc2l0aXZlcy5jb20vaW5kZXgucGhwLzIwMDkvMTIvMDEvamF2YXNjcmlwdC1mdW5jdGlvbi10by1nZXQtdGhlLWludGVyc2VjdC1vZi0yLWFycmF5cy9cbiAgICAgICAgJHNjb3BlLmludGVyc2VjdCA9IGZ1bmN0aW9uKGFycjEsIGFycjIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciByID0gW10sIG8gPSB7fSwgbCA9IGFycjIubGVuZ3RoLCBpLCB2O1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIG9bYXJyMltpXV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbCA9IGFycjEubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHYgPSBhcnIxW2ldO1xuICAgICAgICAgICAgICAgIGlmICh2IGluIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgci5wdXNoKHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dNYXRjaGVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lO1xuXG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcm5hbWVcIik7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCd1c2VycycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclByb2ZpbGVzID0gcmVzcG9uc2UudXNlcmxpc3Q7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFyclByb2ZpbGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0udXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IDA7IGlpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGRiU2VydmljZS5nZXRJdGVtKHVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlcyA9IFtdO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPWFyclByb2ZpbGVzLmxlbmd0aDsgaS0tOyl7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzYW1lSW50ZXJlc3RzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1lSW50ZXJlc3RzID0gJHNjb3BlLmludGVyc2VjdCh1c2VyLmludGVyZXN0cywgYXJyUHJvZmlsZXNbaV0uaW50ZXJlc3RzKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2FtZUludGVyZXN0cy5sZW5ndGggIT09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLmRlbGV0ZWQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hlcy5wdXNoKGFyclByb2ZpbGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFyck1hdGNoZXMgPSBhcnJNYXRjaGVzO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2VhcmNoSW5NYXRjaGVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlcjJRdWVyeSAhPT0gXCJcIil7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyWmlwY29kZVdpdGhNYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gJHNjb3BlLmFyck1hdGNoZXMubGVuZ3RoOyBpPGw7IGkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLmFyck1hdGNoZXNbaV0uemlwY29kZSA9PSAkc2NvcGUuZmlsdGVyMlF1ZXJ5KXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclppcGNvZGVXaXRoTWF0Y2hlcy5wdXNoKCRzY29wZS5hcnJNYXRjaGVzW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1hdGNoZXMgPSBhcnJaaXBjb2RlV2l0aE1hdGNoZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgPT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93TWF0Y2hlcygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIk1hdGNoZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcImRiU2VydmljZVwiLCBNYXRjaGVzQ29udHJvbGxlcl0pO1xuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDIwLzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBQcm9maWxlc0NvbnRyb2xsZXIgPSBmdW5jdGlvbigkc2NvcGUsICRyb290U2NvcGUsICRyb3V0ZVBhcmFtcywgZGJTZXJ2aWNlLCAkaHR0cCwgJGxvY2F0aW9uKSB7XG5cbiAgICAgICAgdmFyIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgJHNjb3BlLnN0YXJ0Q2hhdCA9IGZ1bmN0aW9uKGN1cnJlbnRVc2VyLCBjb250YWN0ZWRVc2VyKXtcbiAgICAgICAgICAgICRodHRwLnBvc3QoXCIvY2hhdFwiLCB7XG4gICAgICAgICAgICAgICAgY3VycmVudFVzZXI6IGN1cnJlbnRVc2VyLFxuICAgICAgICAgICAgICAgIGNvbnRhY3RlZFVzZXI6Y29udGFjdGVkVXNlclxuXG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyID0gZGF0YS5jdXJyZW50VXNlcjtcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIgPSBkYXRhLmNvbnRhY3RlZFVzZXI7XG5cbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImN1cnJlbnR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImNvbnRhY3RlZHVzZXJuYW1lXCIsICRyb290U2NvcGUuY29udGFjdGVkVXNlci51c2VybmFtZSk7XG5cbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aChkYXRhLnJlZGlyZWN0KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cblxuICAgICAgICAkc2NvcGUuc2hvd0RpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6dHJ1ZX07XG4gICAgICAgICAgICBjbGlja3NPbkJ0bisrO1xuXG4gICAgICAgICAgICBpZihjbGlja3NPbkJ0biA+IDEpe1xuICAgICAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5oaWRlRGl2ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjpmYWxzZX07XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dQcm9maWxlcyA9IGZ1bmN0aW9uKCl7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgaWYoJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lICE9PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lID0gJHJvb3RTY29wZS51c2VyLnVzZXJuYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciB1c2VybmFtZSA9IFwiXCI7XG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcm5hbWVcIik7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCd1c2VycycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclByb2ZpbGVzID0gcmVzcG9uc2UudXNlcmxpc3Q7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gYXJyUHJvZmlsZXMubGVuZ3RoOyBpLS07KXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0udXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IGFyclByb2ZpbGVzLmxlbmd0aDsgaWktLTspe1xuICAgICAgICAgICAgICAgICAgICBpZihhcnJQcm9maWxlc1tpaV0udXNlcm5hbWUgPT09IFwiYWRtaW5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGlpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkc2NvcGUuYXJyUHJvZmlsZXMgPSBhcnJQcm9maWxlcztcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc29ydFByb3BlcnR5ID0gXCJ0aXRsZVwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyMlF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgJHNjb3BlLmZpbHRlclByb2ZpbGVzID0gZnVuY3Rpb24oaSl7XG4gICAgICAgICAgICBpZigkc2NvcGUuZmlsdGVyUXVlcnkgPT09IFwiXCIpe1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgIGVsc2UgaWYoaS51c2VybmFtZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG9jYWxlTG93ZXJDYXNlKCkpID49IDApe1xuICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAqL1xuXG4gICAgICAgICAgICBlbHNlIGlmKGkuc2V4ID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PSBpLnNleC50b0xvd2VyQ2FzZSgpKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSBpZigkc2NvcGUuZmlsdGVyUXVlcnkudG9Mb3dlckNhc2UoKSA9PT0gXCJub2ZpbHRlclwiKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaEluUHJvZmlsZXMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBpZigkc2NvcGUuZmlsdGVyMlF1ZXJ5ICE9PSBcIlwiKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJaaXBjb2RlV2l0aFByb2ZpbGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwLCBsID0gJHNjb3BlLmFyclByb2ZpbGVzLmxlbmd0aDsgaTxsOyBpKyspe1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCRzY29wZS5hcnJQcm9maWxlc1tpXS56aXBjb2RlID09ICRzY29wZS5maWx0ZXIyUXVlcnkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyWmlwY29kZVdpdGhQcm9maWxlcy5wdXNoKCRzY29wZS5hcnJQcm9maWxlc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJQcm9maWxlcyA9IGFyclppcGNvZGVXaXRoUHJvZmlsZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKCRzY29wZS5maWx0ZXIyUXVlcnkgPT09IFwiXCIpe1xuICAgICAgICAgICAgICAgICRzY29wZS5zaG93UHJvZmlsZXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiUHJvZmlsZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJkYlNlcnZpY2VcIixcIiRodHRwXCIsIFwiJGxvY2F0aW9uXCIsIFByb2ZpbGVzQ29udHJvbGxlcl0pO1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
