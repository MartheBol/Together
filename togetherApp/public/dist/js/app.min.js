!function(){var e=angular.module("app",["ngRoute"]);e.config(["$routeProvider",function(e){e.when("/",{templateUrl:"./views/home.html"}).when("/signup",{templateUrl:"views/signup.html"}).when("/home",{templateUrl:"./views/home.html"}).when("/matches",{templateUrl:"./views/matches.html"}).when("/howto",{templateUrl:"./views/howTo.html"}).when("/activities",{templateUrl:"./views/activities.html"}).when("/admin",{templateUrl:"./views/admin.html"}).when("/searchprofiles",{templateUrl:"./views/searchProfiles.html"}).when("/myprofile",{templateUrl:"./views/myProfile.html"}).when("/userdetails/:username",{templateUrl:"./views/detailsUser.html",controller:"UsersController"}).when("/detailsuser",{templateUrl:"./views/detailsUser.html"}).when("/activitydetails/:activityName",{templateUrl:"./views/detailsActivity.html",controller:"ActivitiesController"}).when("/chat",{templateUrl:"./views/chat.html"})}]),e.run(["$rootScope",function(e){e.user={}}]),e.directive("ngEnter",function(){return function(e,t,o){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(o.ngEnter)}),t.preventDefault())})}}),e.directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(t,o,r){var n=e(r.fileModel),i=n.assign;o.bind("change",function(){t.$apply(function(){i(t,o[0].files[0])})})}}}]),e.service("fileUpload",["$http",function(e){this.uploadFileToUrl=function(t,o){var r=new FormData;r.append("file",t),e.post(o,r,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(){console.log("success")}).error(function(){console.log("error")})}}]),e.directive("editableCheckbox",function(){return{restrict:"E",templateUrl:"./views/editablecheckbox.html"}})}();var Activity=function(e,t,o,r,n,i,s,a,c,l){this.activityName=e,this.zipcode=t,this.street=o,this.number=r,this.description=n,this.dateFrom=i,this.dateUntil=s,this.timestamp=a,this.username=c,this.matches=l};!function(){"use strict";var e=function(e){var t=io.connect(window.location.host),o=function(o,r){t.on(o,function(){var o=arguments;e.$apply(function(){r.apply(t,o)})})},r=function(o,r,n){t.emit(o,r,function(){var o=arguments;e.$apply(function(){n.apply(t,o)})})};return{on:o,emit:r,socket:t}};angular.module("app").factory("chatService",["$rootScope",e])}(),function(){"use strict";var e=function(e){var t=function(t){var o="http://localhost:3000/api/"+t;return e.get(o).then(function(e){return e.data})},o=function(t,o){var r="http://localhost:3000/api/"+t+"/"+o;return e.get(r).then(function(e){return e.data})},r=function(t,o){var r="http://localhost:3000/api/"+t+"/userdetail/"+o;return e.get(r).then(function(e){return e.data})},n=function(t,o){var r="http://localhost:3000/api/"+t+"/userdelete/"+o;return e.get(r).then(function(e){return e.data})},i=function(t){var o="http://localhost:3000/api/"+t+"/updateprofile";return e.get(o).then(function(e){return e.data})},s=function(t){return e.get("/user").then(function(e){return e.data})},a=function(t,o){var r="http://localhost:3000/api/"+t+"/activitydetail/"+o;return e.get(r).then(function(e){return e.data})},c=function(t,o){var r="http://localhost:3000/api/"+t+"/activitydelete/"+o;return console.log(r),e.get(r).then(function(e){return console.log(e),e.data})},l=function(){var t="http://localhost:3000/data/noisewords.json";return e.get(t).then(function(e){return e.data})};return{getCollection:t,getByID:o,getItem:s,getDetailsUser:r,deleteUser:n,updateUser:i,getDetailsActivity:a,getNoiseWords:l,deleteActivity:c}};angular.module("app").factory("dbService",["$http",e])}(),function(){"use strict";var e=function(){var e=function(e){var t="http://localhost:3000/data/matches.json",o=new XMLHttpRequest;if(o.open("GET",t,!1),o.send(null),200==o.status){for(var r=JSON.parse(o.responseText),n=[],i=[],s=0;s<r.length;s++){var a={user:r[s].user,matches:r[s].matches};n.push(a)}for(var c=0;c<n.length;c++){var l=n[c].user.indexOf(e);0===l&&i.push(n[c].matches)}var u=i[0];return u}};return{getMatches:e}};angular.module("app").factory("matchesService",[e])}(),function(){"use strict";var e=(new Date).toISOString().substring(0,10)+" "+(new Date).toISOString().substring(11,16),t=function(t,o,r,n,i,s){function a(e,t){return t.indexOf(e)}function c(e,t){e=e.replaceAll(".",""),e=e.replaceAll(",",""),e=e.replaceAll("?",""),e=e.replaceAll("!",""),e=e.replaceAll('"',""),e=e.replaceAll("'","");var r=e.split(" "),n="";o.getNoiseWords().then(function(e){for(var o=e.noisewords,i=0;i<r.length;i++)-1==a(r[i].toLowerCase(),o)&&(n+=r[i],n+=" ");n.isEmpty?t("No keywords found.",null):t(null,n)})}function l(e,t){var o=e+"";o.length<2?(o="0"+o,e=o.toString()):e=e.toString(),e.isEmpty?t("No number.",null):t(null,e)}function u(e,t,o){l(e,function(t,o){e=o,t&&console.log(t)}),l(t,function(e,o){t=o,e&&console.log(e)}),e.isEmpty||t.isEmpty?o("No number.",null):o(null,e,t)}function h(e,t){return e.timestamp>t.timestamp?-1:e.timestamp<t.timestamp?1:0}function f(e){for(var t=e[0],o=0,r=1;r<e.length;r++)e[r].matches.length>t.matches.length&&(o=r,t=e[r]);return o}function d(){var e=new google.maps.Map(document.getElementById("map"),{zoom:8,center:{lat:50.8194894,lng:3.2577076}}),t=new google.maps.Geocoder;g(t,e)}function g(e,o){var r=t.arrDetailsActivity.street,n=t.arrDetailsActivity.number,i=t.arrDetailsActivity.zipcode,s=r+" "+n+", "+i;e.geocode({address:s},function(e,t){if(t===google.maps.GeocoderStatus.OK){o.setCenter(e[0].geometry.location);var r="../../images/marker.png",n=new google.maps.Marker({map:o,position:e[0].geometry.location,icon:r});console.log(n)}else alert("Geocode was not successful for the following reason: "+t)})}function m(){var e=document.getElementsByName("ActivityForm")[0];console.log("je komt in de resetform"),e.reset()}t.interestedAct=!0,t.nameButton="Interested",t.getActivities=function(){o.getCollection("activities").then(function(o){for(var r=o.activitielist,n=[],i=0,s=r.length;s>i;i++)new Date(r[i].untilDate).getTime()>=new Date(e).getTime()&&(r[i].deleted===!1?(t.deleted=!1,n.push(r[i])):t.deleted=!0);t.arrActivities=n})},String.prototype.replaceAll=function(e,t,o){var r,n=this+"",i=-1;if("string"==typeof e){if(!o)return this.split(e).join(t);for(r=e.toLowerCase();-1!==(i=n.toLowerCase().indexOf(e,i>=0?i+t.length:0));)n=n.substring(0,i)+t+n.substring(i+e.length)}return n},t.addActivity=function(){var e=this.activityName,o=this.street,n=this.number,i=this.zipcode,s=this.comment,a=(this.dateFrom,this.dateUntil,(new Date).getTime()),h=this.startTimeHour,f=this.startTimeMin,d=this.endTimeHour,g=this.endTimeMin,p=this.dateFromDay,v=this.dateFromMonth,w=this.dateFromYear.toString(),y=this.dateUntilDay,U=this.dateUntilMonth,A=this.dateUntilYear.toString();u(p,v,function(e,t,o){p=t,v=o,e&&console.log(e)}),u(y,U,function(e,t,o){y=t,U=o,e&&console.log(e)}),new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+g).getTime()?new Date(A+"-"+U+"-"+y+" "+d+":"+g).getTime()>(new Date).getTime()||console.log("Date until can't be before today"):console.log(" Enddate can't be before startdate"),void 0!==o&&void 0!==n&&void 0!==i&&void 0!==s&&void 0!==a&&void 0!==w&&void 0!==v&&void 0!==p&&void 0!==h&&void 0!==f&&void 0!==A&&void 0!==U&&void 0!==y&&void 0!==d&&void 0!==g?60>f&&25>h?(l(h,function(e,t){h=t,e&&console.log(e)}),l(f,function(e,t){f=t,e&&console.log(e)}),console.log(h),console.log(f),2===f.length&&2===h.length?(console.log("je komt hier terecht"),60>g&&24>d?(l(d,function(e,o){d=o,e&&(t.error=e)}),l(g,function(e,o){g=o,e&&(t.error=e)}),2===g.toString().length&&2===d.toString().length?new Date(w+"-"+v+"-"+p+" "+h+":"+f).getTime()<=new Date(A+"-"+U+"-"+y+" "+d+":"+g).getTime()&&(new Date(A+"-"+U+"-"+y+" "+d+":"+g).getTime()>(new Date).getTime()?c(s,function(c,l){if(s=l,c)console.log(c);else{console.log(h+":"+f);var u="/api/activities/addactivity";r.post(u,{activityName:e,street:o,number:n,zipcode:i,description:s,dateFrom:w+"-"+v+"-"+p+" "+h+":"+f,dateUntil:A+"-"+U+"-"+y+" "+d+":"+g,timestamp:a}).success(function(e){t.error=e.error,t.getActivities(),m()})}}):t.error="Enddate can't be before today"):t.error="Enddate input is not correct"):t.error="Endtime input is not correct"):t.error="De startime length is not correct!!!! "):t.error="Starttime input is not correct":t.error="ERROR: All fields are required."},t.getDetailActivity=function(e){o.getDetailsActivity("activities",i.activityName).then(function(o){t.arrDetailsActivity=o.activity,d(),console.log(t.arrDetailsActivity.matches);for(var r=0;r<t.arrDetailsActivity.matches.length;r++)t.arrDetailsActivity.matches[r]===e&&(t.nameButton="Not interested",t.interestedAct=!1);return t.arrDetailsActivity})},t.interested=function(e,o,n){var i="",s=t.interestedAct;s!==!1?(i="/api/activities/interested",r.post(i,{activityName:e,interestedUser:o,createrUser:n}).success(function(r){console.log(r),console.log(o+" is geïnteresseerd in "+e+" door "+n),t.interestedAct=!1,t.nameButton="Not interested",t.error=r.error})):(console.log(s),i="/api/activities/deleteinterested",r.post(i,{activityName:e,interestedUser:o,createrUser:n}).success(function(r){console.log(r),console.log(o+" is niet meer geïnteresseerd in "+e+" door "+n),t.interestedAct=!0,t.nameButton="Interested",t.error=r.error}))},t.showActivitiesOnHomePage=function(){t.getMostRecentActivities(),t.getMostPopularActivities()},t.getMostRecentActivities=function(){o.getCollection("activities").then(function(o){for(var r=3,n=o.activitielist,i=[],s=0,a=n.length;a>s;s++)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&(console.log(new Date(n[s].untilDate)),i.push(n[s]));i.sort(h);for(var c=[],l=0;r>l;l++)c.push(i[l]);for(var u=[],f=0;f<c.length;f++){var d=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",u);void 0===c[f]&&c.splice(f,1,d)}t.arrMostRecentActivities=c})},t.getMostPopularActivities=function(){o.getCollection("activities").then(function(o){for(var r=3,n=o.activitielist,i=[],s=0,a=n.length;a>s;s++)new Date(n[s].untilDate).getTime()>=new Date(e).getTime()&&i.push(n[s]);for(var c=[],l=0;r>l;l++){var u=f(i);c.push(i[u]),i.splice(u,1)}for(var h=[],d=0;d<c.length;d++){var g=new Activity("No name",8500,"Together",2,"no description","2016-01-01 00:01","2017-12-31 23:59",new Date,"no username",h);void 0===c[d]&&c.splice(d,1,g)}t.arrMostPopularActivities=c})},t.deleteActivity=function(e){o.deleteActivity("activities",e).then(function(e){t.infodeletedActivity=e,console.log(e),t.getActivities()})}};angular.module("app").controller("ActivitiesController",["$scope","dbService","$http","$location","$routeParams","fileUpload",t])}(),function(){"use strict";var e=function(e,t,o,r,n){console.log(t.currentUser.username),console.log(t.contactedUser.username),e.init=function(){chatService.emit("init_users",{user:t.currentUser,collection:"users"})}};angular.module("app").controller("ChatController",["$scope","$rootScope","$routeParams","dbService","$http",e])}(),function(){"use strict";var e=function(e,t){var o=0;e.showDiv=function(){e.filter={showFilter:!0},o++,o>1&&(e.filter={showFilter:!1},o=0)},e.hideDiv=function(){o=0,e.filter={showFilter:!1}},e.sortProperty="title",e.filterQuery="",e.filterMatches=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)},e.intersect=function(e,t){var o,r,n=[],i={},s=t.length;for(o=0;s>o;o++)i[t[o]]=!0;for(s=e.length,o=0;s>o;o++)r=e[o],r in i&&n.push(r);return n},e.showMatches=function(){var o;o=localStorage.getItem("username"),t.getCollection("users").then(function(r){for(var n=r.userlist,i=0;i<n.length;i++)n[i].username===o&&n.splice(i,1);for(var s=0;s<n.length;s++)"admin"===n[s].username&&n.splice(s,1);t.getItem(o).then(function(t){var o=t,r=[];console.log(o.interests);for(var i=0,s=n.length;s>i;i++){var a=[];a=e.intersect(o.interests,n[i].interests),0!==a.length&&n[i].deleted===!1&&r.push(n[i])}e.arrMatches=r})})}};angular.module("app").controller("MatchesController",["$scope","dbService",e])}(),function(){"use strict";var e=function(e,t,o,r,n,i){var s=0;e.startChat=function(o,r){n.post("/chat",{currentUser:o,contactedUser:r}).success(function(o){e.error=o.error,t.currentUser=o.currentUser,t.contactedUser=o.contactedUser,localStorage.setItem("currentusername",t.currentUser.username),localStorage.setItem("contactedusername",t.contactedUser.username),i.path(o.redirect)})},e.showDiv=function(){e.filter={showFilter:!0},s++,s>1&&(e.filter={showFilter:!1},s=0)},e.hideDiv=function(){s=0,e.filter={showFilter:!1}},e.showProfiles=function(){var t="";t=localStorage.getItem("username"),r.getCollection("users").then(function(o){for(var r=o.userlist,n=0;n<r.length;n++)r[n].username===t&&r.splice(n,1);for(var i=0;i<r.length;i++)"admin"===r[i].username&&r.splice(i,1);e.arrProfiles=r})},e.sortProperty="title",e.filterQuery="",e.filterProfiles=function(t){return""===e.filterQuery?!0:void 0===t.sex?!1:e.filterQuery.toLowerCase()==t.sex.toLowerCase()?!0:("nofilter"===e.filterQuery.toLowerCase()&&(e.filterQuery=""),!1)}};angular.module("app").controller("ProfilesController",["$scope","$rootScope","$routeParams","dbService","$http","$location",e])}(),function(){"use strict";var e=function(e,t,o,r){e.getUsers=function(){r.getCollection("users").then(function(t){e.arrUsers=t.userlist;for(var o=0;o<e.arrUsers.length;o++)e.arrUsers[o].deleted===!1?e.deleted=!1:e.deleted=!0})},e.getDetailUser=function(){r.getDetailsUser("users",t.username).then(function(t){e.userDetails=t.correctuser})},e.deleteUser=function(t){r.deleteUser("users",t).then(function(t){e.infodeletedUser=t,e.getUsers()})},e.updateUser=function(){var t=e.user.username,r=e.user.firstname,n=e.user.lastname,i=e.user.birthdate,s=e.user.zipcode,a=e.user.sex,c=e.user.biography,l="/api/users/updateprofile";console.log(l),o.post(l,{username:t,firstname:r,lastname:n,birthdate:i,zipcode:s,sex:a,biography:c}).success(function(t){e.error=t.error,e.information=t,console.log(e.information)})},e.getUserByID=function(){r.getItem("user").then(function(t){console.log(t),e.userProfile=t})}};angular.module("app").controller("UsersController",["$scope","$routeParams","$http","dbService",e])}(),function(){"use strict";var e=[],t=function(t,o,r,n){t.login=function(){r.post("/login",{username:this.username,password:this.password}).success(function(e){console.log(e),o.user=e.user,t.error=e.error,void 0!==o.user&&localStorage.setItem("username",o.user.username),n.path(e.redirect)})},t.interests=["Jazz","Hiphop","New wave","Traveling","Party"],t.lst=[],t.change=function(){t.lst.push("2"),console.log(t.lst)},t.stateChanged=function(t){if(-1!==e.indexOf(t)){var o=e.indexOf(t);o>-1&&e.splice(o,1)}else e.push(t),console.log(e)},t.geolocation="",t.getLocation=function(){function e(e){t.geolocation={latitude:e.coords.latitude,longitude:e.coords.longitude},console.log(t.geolocation)}function o(e){switch(t.geolocation=null,e.code){case e.PERMISSION_DENIED:t.error="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t.error="Location information is unavailable.";break;case e.TIMEOUT:t.error="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t.error="An unknown error occurred."}}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,o,{maximumAge:6e5}):t.error="Geolocation is not supported by this browser."},t.register=function(){console.log("REGISTER"),r.post("/register",{firstname:this.firstname,lastname:this.lastname,username:this.username,password:this.password,zipcode:this.zipcode,birthdate:this.birthdate,sex:this.sex,biography:this.biography,geolocation:t.geolocation,interests:e}).success(function(e){t.error=e.error,n.path(e.redirect)})}},o=function(e){e.categories=[""],e.newCategory="",e.saveCategory=function(){}},r=function(t){t.category="",t.showLabel=!1,t.showTextbox=!0,t.saveCategory=function(){t.category?(t.showLabel=!0,t.showTextbox=!1):(t.showLabel=!1,t.showTextbox=!0)},t.edit=function(){t.showLabel=!1,t.showTextbox=!0},t.isChecked=function(t){if(console.log(t)," "!==t)if(-1!==e.indexOf(t)){var o=e.indexOf(t);o>-1&&(e.splice(o,1),console.log(e))}else e.push(t),console.log(e)},t.stateChanged=function(e){}};angular.module("app").controller("loginController",["$scope","$rootScope","$http","$location",t]).controller("signupController",["$scope",o]).controller("editableCheckboxController",["$scope",r])}(),function(){"use strict"}(),function(){"use strict";var e=function(e,t,o,r){o.get("/user").success(function(o){e.user=o,t.user=o,"admin"==o.username?e.auth={isAuth:!0,isAdmin:!0}:"admin"!=o.username&&void 0!==o.username?e.auth={isAuth:!0,isAdmin:!1}:void 0===o.username&&(e.auth={isAuth:!1,isAdmin:!1})})};angular.module("app").controller("userController",["$scope","$rootScope","$http","$location",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFjdGl2aXRpZXNTZXJ2aWNlLmpzIiwiY2hhdFNlcnZpY2UuanMiLCJkYlNlcnZpY2UuanMiLCJtYXRjaGVzU2VydmljZS5qcyIsIkFjdGl2aXRpZXNDb250cm9sbGVyLmpzIiwiQ2hhdENvbnRyb2xsZXIuanMiLCJNYXRjaGVzQ29udHJvbGxlci5qcyIsIlByb2ZpbGVzQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJhcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCJ3aGVuIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwicnVuIiwiJHJvb3RTY29wZSIsInVzZXIiLCJkaXJlY3RpdmUiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsImJpbmQiLCJldmVudCIsIndoaWNoIiwiJGFwcGx5IiwiJGV2YWwiLCJuZ0VudGVyIiwicHJldmVudERlZmF1bHQiLCIkcGFyc2UiLCJyZXN0cmljdCIsImxpbmsiLCJtb2RlbCIsImZpbGVNb2RlbCIsIm1vZGVsU2V0dGVyIiwiYXNzaWduIiwiZmlsZXMiLCJzZXJ2aWNlIiwiJGh0dHAiLCJ0aGlzIiwidXBsb2FkRmlsZVRvVXJsIiwiZmlsZSIsInVwbG9hZFVybCIsImZkIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwb3N0IiwidHJhbnNmb3JtUmVxdWVzdCIsImlkZW50aXR5IiwiaGVhZGVycyIsIkNvbnRlbnQtVHlwZSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJBY3Rpdml0eSIsIm5hbWUiLCJ6aXBjb2RlIiwic3RyZWV0IiwibnVtYmVyIiwiZGVzY3JpcHRpb24iLCJkYXRlRnJvbSIsImRhdGVVbnRpbCIsInRpbWVzdGFtcCIsInVzZXJuYW1lIiwibWF0Y2hlcyIsImFjdGl2aXR5TmFtZSIsImNoYXRTZXJ2aWNlIiwic29ja2V0IiwiaW8iLCJjb25uZWN0Iiwid2luZG93IiwibG9jYXRpb24iLCJob3N0Iiwib24iLCJldmVudE5hbWUiLCJjYWxsYmFjayIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsImVtaXQiLCJkYXRhIiwiZmFjdG9yeSIsImRiU2VydmljZSIsImdldENvbGxlY3Rpb24iLCJjb2xsZWN0aW9uIiwidXJsIiwiZ2V0IiwidGhlbiIsInJlc3BvbnNlIiwiZ2V0QnlJRCIsImlkIiwiZ2V0RGV0YWlsc1VzZXIiLCJkZWxldGVVc2VyIiwidXBkYXRlVXNlciIsImdldEl0ZW0iLCJpdGVtIiwiZ2V0RGV0YWlsc0FjdGl2aXR5IiwiYWN0aXZpdHluYW1lIiwiZGVsZXRlQWN0aXZpdHkiLCJhY3Rpdml0eUlkIiwiZ2V0Tm9pc2VXb3JkcyIsIm1hdGNoZXNTZXJ2aWNlIiwiZ2V0TWF0Y2hlcyIsIm5hbWVVc2VyIiwibG9jYWxVcmwiLCJ4bWxIdHRwIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwic2VuZCIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImFyciIsImFyck1hdGNoZXMiLCJpIiwibGVuZ3RoIiwib2JqIiwicHVzaCIsImlpIiwiaW5kZXgiLCJpbmRleE9mIiwiYXJyTWF0Y2hlc0J5VXNlciIsImRhdGVUaW1lTm93IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3Vic3RyaW5nIiwiQWN0aXZpdGllc0NvbnRyb2xsZXIiLCIkc2NvcGUiLCIkbG9jYXRpb24iLCIkcm91dGVQYXJhbXMiLCIkcm91dGUiLCJpc0luQXJyYXkiLCJ2YWx1ZSIsImFycmF5IiwiZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24iLCJyZXBsYWNlQWxsIiwid29yZHMiLCJzcGxpdCIsImtleVdvcmRzIiwibm9pc2VXb3JkcyIsIm5vaXNld29yZHMiLCJ0b0xvd2VyQ2FzZSIsImlzRW1wdHkiLCJzdHJpbmdDb25zaXN0T2YyTnVtYmVycyIsIm91dHB1dCIsInRvU3RyaW5nIiwiZnVsbERhdGUiLCJudW1iZXIyIiwibnVtYmVyVG9TdHJpbmciLCJyZWNlbnRGaXJzdCIsImEiLCJiIiwicG9wdWxhckZpcnN0IiwibWF4IiwibWF4SW5kZXgiLCJpbml0bWFwIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ6b29tIiwiY2VudGVyIiwibGF0IiwibG5nIiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsImdlb2NvZGVBZGRyZXNzIiwicmVzdWx0c01hcCIsImFyckRldGFpbHNBY3Rpdml0eSIsImFkZHJlc3MiLCJnZW9jb2RlIiwicmVzdWx0cyIsIkdlb2NvZGVyU3RhdHVzIiwiT0siLCJzZXRDZW50ZXIiLCJnZW9tZXRyeSIsImltYWdlIiwibWFya2VyIiwiTWFya2VyIiwicG9zaXRpb24iLCJpY29uIiwiYWxlcnQiLCJyZXNldEZvcm0iLCJmcm0iLCJnZXRFbGVtZW50c0J5TmFtZSIsInJlc2V0IiwiaW50ZXJlc3RlZEFjdCIsIm5hbWVCdXR0b24iLCJnZXRBY3Rpdml0aWVzIiwiYXJyVGVtcCIsImFjdGl2aXRpZWxpc3QiLCJhcnJBY3RzIiwibCIsInVudGlsRGF0ZSIsImdldFRpbWUiLCJkZWxldGVkIiwiYXJyQWN0aXZpdGllcyIsIlN0cmluZyIsInByb3RvdHlwZSIsInRva2VuIiwibmV3VG9rZW4iLCJpZ25vcmVDYXNlIiwiX3Rva2VuIiwic3RyIiwiam9pbiIsImFkZEFjdGl2aXR5IiwiY29tbWVudCIsInN0YXJ0VGltZUhvdXIiLCJzdGFydFRpbWVNaW4iLCJlbmRUaW1lSG91ciIsImVuZFRpbWVNaW4iLCJkYXRlRnJvbURheSIsImRhdGVGcm9tTW9udGgiLCJkYXRlRnJvbVllYXIiLCJkYXRlVW50aWxEYXkiLCJkYXRlVW50aWxNb250aCIsImRhdGVVbnRpbFllYXIiLCJkYXRlRnJvbWRheVN0cmluZyIsImRhdGVGcm9tTW9udGhTdHJpbmciLCJkYXRlVW50aWxEYXlTdHJpbmciLCJkYXRlVW50aWxNb250aFN0cmluZyIsInN0YXJ0VGltZUhvdXJTdHJpbmciLCJzdGFydFRpbWVNaW5TdHJpbmciLCJlbmRUaW1lSG91clN0cmluZyIsImVuZFRpbWVNaW5TdHJpbmciLCJnZXREZXRhaWxBY3Rpdml0eSIsImN1cnJlbnRVc2VyIiwiYWN0aXZpdHkiLCJpbnRlcmVzdGVkIiwiaW50ZXJlc3RlZFVzZXIiLCJjcmVhdGVyVXNlciIsInNob3dBY3Rpdml0aWVzT25Ib21lUGFnZSIsImdldE1vc3RSZWNlbnRBY3Rpdml0aWVzIiwiZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzIiwibnVtYmVyT2ZBY3Rpdml0aWVzIiwiYXJyQWxsQWN0aXZpdGllcyIsInNvcnQiLCJhcnJNb3N0UmVjZW50QWN0aXZpdGllcyIsImlpaSIsImR1bW15QWN0aXZpdHkiLCJzcGxpY2UiLCJhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMiLCJqIiwiaW5kZXhNb3N0UG9wIiwiaW5mb2RlbGV0ZWRBY3Rpdml0eSIsIkNoYXRDb250cm9sbGVyIiwiY29udGFjdGVkVXNlciIsImluaXQiLCJNYXRjaGVzQ29udHJvbGxlciIsImNsaWNrc09uQnRuIiwic2hvd0RpdiIsImZpbHRlciIsInNob3dGaWx0ZXIiLCJoaWRlRGl2Iiwic29ydFByb3BlcnR5IiwiZmlsdGVyUXVlcnkiLCJmaWx0ZXJNYXRjaGVzIiwic2V4IiwiaW50ZXJzZWN0IiwiYXJyMSIsImFycjIiLCJ2IiwiciIsIm8iLCJzaG93TWF0Y2hlcyIsImxvY2FsU3RvcmFnZSIsImFyclByb2ZpbGVzIiwidXNlcmxpc3QiLCJpbnRlcmVzdHMiLCJzYW1lSW50ZXJlc3RzIiwiUHJvZmlsZXNDb250cm9sbGVyIiwic3RhcnRDaGF0Iiwic2V0SXRlbSIsInBhdGgiLCJyZWRpcmVjdCIsInNob3dQcm9maWxlcyIsImZpbHRlclByb2ZpbGVzIiwiVXNlcnNDb250cm9sbGVyIiwiZ2V0VXNlcnMiLCJhcnJVc2VycyIsImdldERldGFpbFVzZXIiLCJ1c2VyRGV0YWlscyIsImNvcnJlY3R1c2VyIiwiaW5mb2RlbGV0ZWRVc2VyIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJiaXJ0aGRhdGUiLCJiaW9ncmFwaHkiLCJpbmZvcm1hdGlvbiIsImdldFVzZXJCeUlEIiwidXNlclByb2ZpbGUiLCJzZWxlY3RlZEludGVyZXN0IiwibG9naW5Db250cm9sbGVyIiwibG9naW4iLCJwYXNzd29yZCIsImxzdCIsImNoYW5nZSIsInN0YXRlQ2hhbmdlZCIsInFJZCIsImdlb2xvY2F0aW9uIiwiZ2V0TG9jYXRpb24iLCJzdWNjZXNzQ2FsbGJhY2siLCJsYXRpdHVkZSIsImNvb3JkcyIsImxvbmdpdHVkZSIsImVycm9yQ2FsbGJhY2siLCJjb2RlIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJQT1NJVElPTl9VTkFWQUlMQUJMRSIsIlRJTUVPVVQiLCJVTktOT1dOX0VSUk9SIiwibmF2aWdhdG9yIiwiZ2V0Q3VycmVudFBvc2l0aW9uIiwibWF4aW11bUFnZSIsInJlZ2lzdGVyIiwic2lnbnVwQ29udHJvbGxlciIsImNhdGVnb3JpZXMiLCJuZXdDYXRlZ29yeSIsInNhdmVDYXRlZ29yeSIsImVkaXRhYmxlQ2hlY2tib3hDb250cm9sbGVyIiwiY2F0ZWdvcnkiLCJzaG93TGFiZWwiLCJzaG93VGV4dGJveCIsImVkaXQiLCJpc0NoZWNrZWQiLCJ1c2VyQ29udHJvbGxlciIsImF1dGgiLCJpc0F1dGgiLCJpc0FkbWluIl0sIm1hcHBpbmdzIjoiQ0FHQSxXQUNBLEdBQUFBLEdBQUFDLFFBQUFDLE9BQUEsT0FBQSxXQUNBRixHQUFBRyxRQUNBLGlCQUNBLFNBQUFDLEdBQ0FBLEVBQUFDLEtBQUEsS0FBQUMsWUFBQSxzQkFBQUQsS0FBQSxXQUFBQyxZQUFBLHNCQUFBRCxLQUFBLFNBQUFDLFlBQUEsc0JBQUFELEtBQUEsWUFBQUMsWUFBQSx5QkFBQUQsS0FBQSxVQUFBQyxZQUFBLHVCQUFBRCxLQUFBLGVBQUFDLFlBQUEsNEJBQUFELEtBQUEsVUFBQUMsWUFBQSx1QkFBQUQsS0FBQSxtQkFBQUMsWUFBQSxnQ0FBQUQsS0FBQSxjQUFBQyxZQUFBLDJCQUFBRCxLQUFBLDBCQUNBQyxZQUFBLDJCQUNBQyxXQUFBLG9CQUNBRixLQUFBLGdCQUFBQyxZQUFBLDZCQUFBRCxLQUFBLGtD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dlMsU0FBQUMsT0FBQSxPQUFBSyxXQUFBLG1CQUNBLFNBQ0EsYUFDQSxRQUNBLFlBQ0EyUixJQUNBM1IsV0FBQSxvQkNwSUEsU0FDQWtULElBQ0FsVCxXQUFBLDhCQUNBLFNBQ0FzVCxPQU1BLFdBQ0EsZ0JBb0NBLFdBQ0EsWUFDQSxJQUFBTSxHQUFBLFNBQUF4TSxFQUFBbEgsRUFBQXNCLEVBQUE2RixHQUNBN0YsRUFBQWtELElBQUEsU0FBQXBDLFFBQUEsU0FBQThCLEdBQ0FnRCxFQUFBakgsS0FBQWlFLEVBQ0FsRSxFQUFBQyxLQUFBaUUsRUFDQSxTQUFBQSxFQUFBakIsU0FDQWlFLEVBQUF5TSxNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsR0FFQSxTQUFBM1AsRUFBQWpCLFVBQUFkLFNBQUErQixFQUFBakIsU0FDQWlFLEVBQUF5TSxNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsR0FFQTFSLFNBQUErQixFQUFBakIsV0FDQWlFLEVBQUF5TSxNQUNBQyxRQUFBLEVBQ0FDLFNBQUEsTUFTQXJVLFNBQUFDLE9BQUEsT0FBQUssV0FBQSxrQkFDQSxTQUNBLGFBQ0EsUUFDQSxZQUNBNFQiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBNYXJ0aGUgb24gMTAvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIsIFtcIm5nUm91dGVcIl0pO1xuICAgIGFwcC5jb25maWcoZnVuY3Rpb24oJHJvdXRlUHJvdmlkZXIpe1xuICAgICAgICAkcm91dGVQcm92aWRlclxuICAgICAgICAgICAgLndoZW4oXCIvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvaG9tZS5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zaWdudXBcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwidmlld3Mvc2lnbnVwLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2hvbWVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9ob21lLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL21hdGNoZXNcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9tYXRjaGVzLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2hvd3RvXCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvaG93VG8uaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYWN0aXZpdGllc1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2FjdGl2aXRpZXMuaHRtbFwiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvYWRtaW5cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9hZG1pbi5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zZWFyY2hwcm9maWxlc1wiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL3NlYXJjaFByb2ZpbGVzLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL215cHJvZmlsZVwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL215UHJvZmlsZS5odG1sXCJcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi91c2VyZGV0YWlscy86dXNlcm5hbWVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi92aWV3cy9kZXRhaWxzVXNlci5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ1VzZXJzQ29udHJvbGxlcidcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9kZXRhaWxzdXNlclwiLHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNVc2VyLmh0bWxcIlxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC53aGVuKFwiL2FjdGl2aXR5ZGV0YWlscy86YWN0aXZpdHlOYW1lXCIsIHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogXCIuL3ZpZXdzL2RldGFpbHNBY3Rpdml0eS5odG1sXCIsXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogXCJBY3Rpdml0aWVzQ29udHJvbGxlclwiXG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9jaGF0XCIse1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBcIi4vdmlld3MvY2hhdC5odG1sXCJcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICB9KTtcblxuICAgIGFwcC5ydW4oZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAgICAgJHJvb3RTY29wZS51c2VyID0ge307XG4gICAgfSk7XG5cbiAgICBhcHAuZGlyZWN0aXZlKCduZ0VudGVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgZWxlbWVudC5iaW5kKFwia2V5ZG93biBrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS4kZXZhbChhdHRycy5uZ0VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG4gICAgYXBwLmRpcmVjdGl2ZSgnZmlsZU1vZGVsJywgWyckcGFyc2UnLCBmdW5jdGlvbiAoJHBhcnNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gJHBhcnNlKGF0dHJzLmZpbGVNb2RlbCk7XG4gICAgICAgICAgICAgICAgdmFyIG1vZGVsU2V0dGVyID0gbW9kZWwuYXNzaWduO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5iaW5kKCdjaGFuZ2UnLCBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsU2V0dGVyKHNjb3BlLCBlbGVtZW50WzBdLmZpbGVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfV0pO1xuXG4gICAgYXBwLnNlcnZpY2UoJ2ZpbGVVcGxvYWQnLCBbJyRodHRwJywgZnVuY3Rpb24gKCRodHRwKSB7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZVRvVXJsID0gZnVuY3Rpb24oZmlsZSwgdXBsb2FkVXJsKXtcbiAgICAgICAgICAgIHZhciBmZCA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICAgICAgZmQuYXBwZW5kKCdmaWxlJywgZmlsZSk7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KHVwbG9hZFVybCwgZmQsIHtcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1SZXF1ZXN0OiBhbmd1bGFyLmlkZW50aXR5LFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsnQ29udGVudC1UeXBlJzogdW5kZWZpbmVkfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZXJyb3IoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJlcnJvclwiKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XSk7XG5cblxuICAgIGFwcC5kaXJlY3RpdmUoJ2VkaXRhYmxlQ2hlY2tib3gnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcuL3ZpZXdzL2VkaXRhYmxlY2hlY2tib3guaHRtbCdcbiAgICAgICAgfTtcbiAgICB9KTtcblxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cbi8qKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBhY3Rpdml0aWVzU2VydmljZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgZ2V0QWN0aXZpdGllcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIGxvY2FsVXJsID0gXCJodHRwOi8vbG9jYWxob3N0OjMwMDAvZGF0YS9hY3Rpdml0aWVzLmpzb25cIjtcbiAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4bWxIdHRwLm9wZW4oXCJHRVRcIiwgbG9jYWxVcmwsIGZhbHNlKTtcbiAgICAgICAgICAgIHhtbEh0dHAuc2VuZChudWxsKTtcblxuICAgICAgICAgICAgaWYoeG1sSHR0cC5zdGF0dXMgPT0gMjAwKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IEpTT04ucGFyc2UoeG1sSHR0cC5yZXNwb25zZVRleHQpO1xuXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJBY3Rpdml0aWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGRhdGFbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0FjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KCk7XG4gICAgICAgICAgICAgICAgICAgIG5ld0FjdGl2aXR5LmltZyA9IGQuaW1nO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3Rpdml0eS5uYW1lID0gZC5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3Rpdml0eS5wbGFjZSA9IGQucGxhY2U7XG4gICAgICAgICAgICAgICAgICAgIG5ld0FjdGl2aXR5LnBhcnRpY2lwYW50cyA9IGQucGFydGljaXBhbnRzO1xuICAgICAgICAgICAgICAgICAgICBuZXdBY3Rpdml0eS5teUV2ZW50ID0gZC5teUV2ZW50O1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGlpPTA7IGlpPCBkLmtleXdvcmRzLmxlbmd0aDsgaWkrKyl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpaSA9PSBkLmtleXdvcmRzLmxlbmd0aC0xKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGQua2V5d29yZHNbaWldO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IGQua2V5d29yZHNbaWldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gXCIsIFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbmV3QWN0aXZpdHkua2V5d29yZHMgPSB0ZXh0O1xuICAgICAgICAgICAgICAgICAgICBhcnJBY3Rpdml0aWVzLnB1c2gobmV3QWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBhcnJBY3Rpdml0aWVzO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBnZWRlZWx0ZVxuICAgICAgICByZXR1cm57XG5cbiAgICAgICAgICAgIGdldEFjdGl2aXRpZXM6Z2V0QWN0aXZpdGllc1xuXG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuZmFjdG9yeShcImFjdGl2aXRpZXNTZXJ2aWNlXCIsIFthY3Rpdml0aWVzU2VydmljZV0pO1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF4gZGV6ZSBuYWFtIGJlcGFhbHQgd2Vsa2UgbmFhbSBqZSBub2RpZyBoZWJ0IGluIGplIGNvbnRyb2xsZXIgYWxzIHZlcndpanppbmchXG5cbn0pKCk7Ki8iLCIvKipcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cbiAqL1xuXG5cbihmdW5jdGlvbiAoKSB7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBjaGF0U2VydmljZSA9IGZ1bmN0aW9uICgkcm9vdFNjb3BlKSB7XG4gICAgICAgIHZhciBzb2NrZXQgPSBpby5jb25uZWN0KHdpbmRvdy5sb2NhdGlvbi5ob3N0KTtcblxuICAgICAgICB2YXIgb24gPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgICAgICAgc29ja2V0Lm9uKGV2ZW50TmFtZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBlbWl0ID0gZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KGV2ZW50TmFtZSwgZGF0YSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc29ja2V0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uOiBvbixcbiAgICAgICAgICAgIGVtaXQ6IGVtaXQsXG4gICAgICAgICAgICBzb2NrZXQ6IHNvY2tldFxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5mYWN0b3J5KFwiY2hhdFNlcnZpY2VcIiwgW1wiJHJvb3RTY29wZVwiLCBjaGF0U2VydmljZV0pO1xuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDE1LzEyLzE1LlxuICovXG5cblxuKGZ1bmN0aW9uKCl7XG5cbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBkYlNlcnZpY2UgPSBmdW5jdGlvbiAoJGh0dHApIHtcblxuICAgICAgICB2YXIgZ2V0Q29sbGVjdGlvbiA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uKSB7XG5cblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb247XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldEJ5SUQgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgaWQpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvXCIgKyBpZDtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZ2V0RGV0YWlsc1VzZXIgPSBmdW5jdGlvbiAoY29sbGVjdGlvbiwgdXNlcm5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvdXNlcmRldGFpbC9cIiArIHVzZXJuYW1lO1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCh1cmwpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBkZWxldGVVc2VyID0gIGZ1bmN0aW9uIChjb2xsZWN0aW9uLCB1c2VybmFtZSkge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi91c2VyZGVsZXRlL1wiICsgdXNlcm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHVwZGF0ZVVzZXIgPSBmdW5jdGlvbiAoY29sbGVjdGlvbikge1xuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGNvbGxlY3Rpb24gKyBcIi91cGRhdGVwcm9maWxlXCI7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldEl0ZW0gPSBmdW5jdGlvbihpdGVtKXtcblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2FwaS9cIiArIGl0ZW07XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvdXNlcicpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldERldGFpbHNBY3Rpdml0eSA9IGZ1bmN0aW9uIChjb2xsZWN0aW9uLCBhY3Rpdml0eW5hbWUpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZXRhaWwvXCIgKyBhY3Rpdml0eW5hbWU7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG5cblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZGVsZXRlQWN0aXZpdHkgPSAgZnVuY3Rpb24gKGNvbGxlY3Rpb24sIGFjdGl2aXR5SWQpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9hcGkvXCIgKyBjb2xsZWN0aW9uICsgXCIvYWN0aXZpdHlkZWxldGUvXCIgKyBhY3Rpdml0eUlkO1xuICAgICAgICAgICAgY29uc29sZS5sb2codXJsKTtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cblxuICAgICAgICB2YXIgZ2V0Tm9pc2VXb3JkcyA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgdmFyIHVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbm9pc2V3b3Jkcy5qc29uXCI7XG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KHVybCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuXG4gICAgICAgIC8vcHVibGljIGdlZGVlbHRlXG4gICAgICAgIHJldHVybntcblxuICAgICAgICAgICAgZ2V0Q29sbGVjdGlvbjpnZXRDb2xsZWN0aW9uLFxuICAgICAgICAgICAgZ2V0QnlJRDpnZXRCeUlELFxuICAgICAgICAgICAgZ2V0SXRlbTpnZXRJdGVtLFxuICAgICAgICAgICAgZ2V0RGV0YWlsc1VzZXI6IGdldERldGFpbHNVc2VyLFxuICAgICAgICAgICAgZGVsZXRlVXNlcjogZGVsZXRlVXNlcixcbiAgICAgICAgICAgIHVwZGF0ZVVzZXI6IHVwZGF0ZVVzZXIsXG4gICAgICAgICAgICBnZXREZXRhaWxzQWN0aXZpdHk6IGdldERldGFpbHNBY3Rpdml0eSxcbiAgICAgICAgICAgIGdldE5vaXNlV29yZHM6IGdldE5vaXNlV29yZHMsXG4gICAgICAgICAgICBkZWxldGVBY3Rpdml0eTogZGVsZXRlQWN0aXZpdHlcblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJkYlNlcnZpY2VcIiwgW1wiJGh0dHBcIiwgZGJTZXJ2aWNlXSk7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXiBkZXplIG5hYW0gYmVwYWFsdCB3ZWxrZSBuYWFtIGplIG5vZGlnIGhlYnQgaW4gamUgY29udHJvbGxlciBhbHMgdmVyd2lqemluZyFcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiA1LzEyLzE1LlxuICovXG4oZnVuY3Rpb24oKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG1hdGNoZXNTZXJ2aWNlID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBnZXRNYXRjaGVzID0gZnVuY3Rpb24gKG5hbWVVc2VyKSB7XG5cbiAgICAgICAgICAgIHZhciB2YXJpYWJlbFVSTCA9IFwidG9nZXRoZXJcIjtcbiAgICAgICAgICAgIHZhciBsb2NhbFVybCA9IFwiaHR0cDovL2xvY2FsaG9zdDozMDAwL2RhdGEvbWF0Y2hlcy5qc29uXCI7XG4gICAgICAgICAgICB2YXIgeG1sSHR0cCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiR0VUXCIsIGxvY2FsVXJsLCBmYWxzZSk7XG4gICAgICAgICAgICB4bWxIdHRwLnNlbmQobnVsbCk7XG5cbiAgICAgICAgICAgIGlmKHhtbEh0dHAuc3RhdHVzID09IDIwMCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHhtbEh0dHAucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hVc2VycyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBhcnJNYXRjaEludGVyZXN0cyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJ1c2VyXCI6IGRhdGFbaV0udXNlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwibWF0Y2hlc1wiOmRhdGFbaV0ubWF0Y2hlc1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKG9iaik7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBmb3IodmFyIGlpID0gMDsgaWk8YXJyLmxlbmd0aDsgaWkrKyl7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gYXJyW2lpXS51c2VyLmluZGV4T2YobmFtZVVzZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZihpbmRleCA9PT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJNYXRjaGVzLnB1c2goYXJyW2lpXS5tYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwiSW5kZXg6IFwiK2luZGV4KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGFycik7XG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhhcnJNYXRjaGVzWzBdKTtcblxuXG4gICAgICAgICAgICAgICAgdmFyIGFyck1hdGNoZXNCeVVzZXIgPSBhcnJNYXRjaGVzWzBdO1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJBYW50YWwgbWF0Y2hlczogXCIgKyBhcnJNYXRjaGVzQnlVc2VyLmxlbmd0aCk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyTWF0Y2hlc0J5VXNlcjtcblxuICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaWkgPSAwOyBpaWk8YXJyTWF0Y2hlc1swXS5sZW5ndGg7IGlpaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgbWF0Y2hVc2VyID0gYXJyTWF0Y2hlc1swXVtpaWldLnVzZXI7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRjaEludGVyZXN0cyA9IGFyck1hdGNoZXNbMF1baWlpXS5pbnRlcmVzdHM7XG5cbiAgICAgICAgICAgICAgICAgICAgYXJyTWF0Y2hVc2Vycy5wdXNoKG1hdGNoVXNlcik7XG4gICAgICAgICAgICAgICAgICAgIGFyck1hdGNoSW50ZXJlc3RzLnB1c2gobWF0Y2hJbnRlcmVzdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cobWF0Y2hVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhtYXRjaEludGVyZXN0cyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyTWF0Y2hVc2Vycyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYXJyTWF0Y2hJbnRlcmVzdHMpO1xuICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgIH1cblxuXG5cbiAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBnZWRlZWx0ZVxuICAgICAgICByZXR1cm57XG5cbiAgICAgICAgICAgIGdldE1hdGNoZXM6Z2V0TWF0Y2hlcyxcblxuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmZhY3RvcnkoXCJtYXRjaGVzU2VydmljZVwiLCBbbWF0Y2hlc1NlcnZpY2VdKTtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBeIGRlemUgbmFhbSBiZXBhYWx0IHdlbGtlIG5hYW0gamUgbm9kaWcgaGVidCBpbiBqZSBjb250cm9sbGVyIGFscyB2ZXJ3aWp6aW5nIVxuXG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBpbWFuIG9uIDUvMTIvMTUuXG4gKi9cblxuKGZ1bmN0aW9uICgpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIHZhciBkYXRlVGltZU5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zdWJzdHJpbmcoMCwgMTApICsgXCIgXCIgKyBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDExLCAxNik7XG5cbiAgICB2YXIgQWN0aXZpdGllc0NvbnRyb2xsZXIgPSBmdW5jdGlvbiAoJHNjb3BlLCBkYlNlcnZpY2UsICRodHRwLCAkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgJHJvdXRlKSB7XG4gICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gdHJ1ZTtcbiAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIkludGVyZXN0ZWRcIjtcblxuICAgICAgICAkc2NvcGUuZ2V0QWN0aXZpdGllcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCdhY3Rpdml0aWVzJykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJUZW1wID0gcmVzcG9uc2UuYWN0aXZpdGllbGlzdDtcbiAgICAgICAgICAgICAgICB2YXIgYXJyQWN0cyA9IFtdO1xuXG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyclRlbXAubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkuZ2V0VGltZSgpID49IG5ldyBEYXRlKGRhdGVUaW1lTm93KS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGFyclRlbXBbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5kZWxldGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyQWN0cy5wdXNoKGFyclRlbXBbaV0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmRlbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyckFjdGl2aXRpZXMgPSBhcnJBY3RzO1xuXG4gICAgICAgICAgICB9KTtcblxuXG4gICAgICAgIH07XG5cbiAgICAgICAgU3RyaW5nLnByb3RvdHlwZS5yZXBsYWNlQWxsID0gZnVuY3Rpb24gKHRva2VuLCBuZXdUb2tlbiwgaWdub3JlQ2FzZSkge1xuICAgICAgICAgICAgdmFyIF90b2tlbjtcbiAgICAgICAgICAgIHZhciBzdHIgPSB0aGlzICsgXCJcIjtcbiAgICAgICAgICAgIHZhciBpID0gLTE7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgdG9rZW4gPT09IFwic3RyaW5nXCIpIHtcblxuICAgICAgICAgICAgICAgIGlmIChpZ25vcmVDYXNlKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgX3Rva2VuID0gdG9rZW4udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoKFxuICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHN0ci50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW4sIGkgPj0gMCA/IGkgKyBuZXdUb2tlbi5sZW5ndGggOiAwXG4gICAgICAgICAgICAgICAgICAgICAgICApICkgIT09IC0xXG4gICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5zdWJzdHJpbmcoMCwgaSkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld1Rva2VuICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHIuc3Vic3RyaW5nKGkgKyB0b2tlbi5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zcGxpdCh0b2tlbikuam9pbihuZXdUb2tlbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RyO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGlzSW5BcnJheSh2YWx1ZSwgYXJyYXkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheS5pbmRleE9mKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGdldEtleXdvcmRzRnJvbURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uLCBjYWxsYmFjaykge1xuXG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJy4nLCAnJyk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJywnLCAnJyk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJz8nLCAnJyk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJyEnLCAnJyk7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uLnJlcGxhY2VBbGwoJ1wiJywgJycpO1xuICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi5yZXBsYWNlQWxsKFwiJ1wiLCAnJyk7XG5cbiAgICAgICAgICAgIHZhciB3b3JkcyA9IGRlc2NyaXB0aW9uLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgICAgIHZhciBrZXlXb3JkcyA9IFwiXCI7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXROb2lzZVdvcmRzKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcblxuICAgICAgICAgICAgICAgIHZhciBub2lzZVdvcmRzID0gcmVzcG9uc2Uubm9pc2V3b3JkcztcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd29yZHMubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNJbkFycmF5KHdvcmRzW2ldLnRvTG93ZXJDYXNlKCksIG5vaXNlV29yZHMpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlXb3JkcyArPSB3b3Jkc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleVdvcmRzICs9IFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9yZXR1cm4ga2V5V29yZHM7XG4gICAgICAgICAgICAgICAgaWYgKCFrZXlXb3Jkcy5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGtleVdvcmRzKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soXCJObyBrZXl3b3JkcyBmb3VuZC5cIiwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKG51bWJlciwgY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXQgPSBudW1iZXIgKyAnJztcbiAgICAgICAgICAgIGlmIChvdXRwdXQubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9ICcwJyArIG91dHB1dDtcbiAgICAgICAgICAgICAgICBudW1iZXIgPSBvdXRwdXQudG9TdHJpbmcoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyID0gbnVtYmVyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgaWYgKCFudW1iZXIuaXNFbXB0eSkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIG51bWJlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKFwiTm8gbnVtYmVyLlwiLCBudWxsKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBmdWxsRGF0ZShudW1iZXIsIG51bWJlcjIsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhudW1iZXIsIGZ1bmN0aW9uIChlcnJvciwgbnVtYmVyVG9TdHJpbmcpIHtcbiAgICAgICAgICAgICAgICBudW1iZXIgPSBudW1iZXJUb1N0cmluZztcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhudW1iZXIyLCBmdW5jdGlvbiAoZXJyb3IsIG51bWJlclRvU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgbnVtYmVyMiA9IG51bWJlclRvU3RyaW5nO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKCFudW1iZXIuaXNFbXB0eSAmJiAhbnVtYmVyMi5pc0VtcHR5KSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgbnVtYmVyLCBudW1iZXIyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2soXCJObyBudW1iZXIuXCIsIG51bGwpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgJHNjb3BlLmFkZEFjdGl2aXR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGFjdGl2aXR5TmFtZSA9IHRoaXMuYWN0aXZpdHlOYW1lO1xuICAgICAgICAgICAgdmFyIHN0cmVldCA9IHRoaXMuc3RyZWV0O1xuICAgICAgICAgICAgdmFyIG51bWJlciA9IHRoaXMubnVtYmVyO1xuICAgICAgICAgICAgdmFyIHppcGNvZGUgPSB0aGlzLnppcGNvZGU7XG4gICAgICAgICAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLmNvbW1lbnQ7XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb20gPSB0aGlzLmRhdGVGcm9tO1xuICAgICAgICAgICAgdmFyIGRhdGVVbnRpbCA9IHRoaXMuZGF0ZVVudGlsO1xuICAgICAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0VGltZUhvdXIgPSB0aGlzLnN0YXJ0VGltZUhvdXI7XG4gICAgICAgICAgICB2YXIgc3RhcnRUaW1lTWluID0gdGhpcy5zdGFydFRpbWVNaW47XG4gICAgICAgICAgICB2YXIgZW5kVGltZUhvdXIgPSB0aGlzLmVuZFRpbWVIb3VyO1xuICAgICAgICAgICAgdmFyIGVuZFRpbWVNaW4gPSB0aGlzLmVuZFRpbWVNaW47XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21EYXkgPSB0aGlzLmRhdGVGcm9tRGF5O1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tTW9udGggPSB0aGlzLmRhdGVGcm9tTW9udGg7XG4gICAgICAgICAgICB2YXIgZGF0ZUZyb21ZZWFyID0gdGhpcy5kYXRlRnJvbVllYXIudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxEYXkgPSB0aGlzLmRhdGVVbnRpbERheTtcbiAgICAgICAgICAgIHZhciBkYXRlVW50aWxNb250aCA9IHRoaXMuZGF0ZVVudGlsTW9udGg7XG4gICAgICAgICAgICB2YXIgZGF0ZVVudGlsWWVhciA9IHRoaXMuZGF0ZVVudGlsWWVhci50b1N0cmluZygpO1xuXG4gICAgICAgICAgICBmdWxsRGF0ZShkYXRlRnJvbURheSwgZGF0ZUZyb21Nb250aCwgZnVuY3Rpb24gKGVycm9yLCBkYXRlRnJvbWRheVN0cmluZywgZGF0ZUZyb21Nb250aFN0cmluZykge1xuICAgICAgICAgICAgICAgIGRhdGVGcm9tRGF5ID0gZGF0ZUZyb21kYXlTdHJpbmc7XG4gICAgICAgICAgICAgICAgZGF0ZUZyb21Nb250aCA9IGRhdGVGcm9tTW9udGhTdHJpbmc7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZ1bGxEYXRlKGRhdGVVbnRpbERheSwgZGF0ZVVudGlsTW9udGgsIGZ1bmN0aW9uIChlcnJvciwgZGF0ZVVudGlsRGF5U3RyaW5nLCBkYXRlVW50aWxNb250aFN0cmluZykge1xuICAgICAgICAgICAgICAgIGRhdGVVbnRpbERheSA9IGRhdGVVbnRpbERheVN0cmluZztcbiAgICAgICAgICAgICAgICBkYXRlVW50aWxNb250aCA9IGRhdGVVbnRpbE1vbnRoU3RyaW5nO1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cblxuXG4gICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4pLmdldFRpbWUoKSA8PSBuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpKXtcbiAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpID4gbmV3IERhdGUoKS5nZXRUaW1lKCkpe1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJEYXRlIHVudGlsIGNhbid0IGJlIGJlZm9yZSB0b2RheVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCIgRW5kZGF0ZSBjYW4ndCBiZSBiZWZvcmUgc3RhcnRkYXRlXCIpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgoc3RyZWV0ICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKG51bWJlciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgICh6aXBjb2RlICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHRpbWVzdGFtcCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbVllYXIgIT09IHVuZGVmaW5lZCkgJiZcbiAgICAgICAgICAgICAgICAoZGF0ZUZyb21Nb250aCAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlRnJvbURheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChzdGFydFRpbWVIb3VyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKHN0YXJ0VGltZU1pbiAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChkYXRlVW50aWxZZWFyICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbE1vbnRoICE9PSB1bmRlZmluZWQpICYmXG4gICAgICAgICAgICAgICAgKGRhdGVVbnRpbERheSAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lSG91ciAhPT0gdW5kZWZpbmVkKSAmJlxuICAgICAgICAgICAgICAgIChlbmRUaW1lTWluICE9PSB1bmRlZmluZWQpKSB7XG5cblxuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbiA8IDYwICYmIHN0YXJ0VGltZUhvdXIgPCAyNSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKHN0YXJ0VGltZUhvdXIsIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lSG91clN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lSG91ciA9IHN0YXJ0VGltZUhvdXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdDb25zaXN0T2YyTnVtYmVycyhzdGFydFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgc3RhcnRUaW1lTWluU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFRpbWVNaW4gPSBzdGFydFRpbWVNaW5TdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc3RhcnRUaW1lSG91cik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXJ0VGltZU1pbik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0VGltZU1pbi5sZW5ndGggPT09IDIgJiYgc3RhcnRUaW1lSG91ci5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiamUga29tdCBoaWVyIHRlcmVjaHRcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbmRUaW1lTWluIDwgNjAgJiYgZW5kVGltZUhvdXIgPCAyNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKGVuZFRpbWVIb3VyLCBmdW5jdGlvbiAoZXJyb3IsIGVuZFRpbWVIb3VyU3RyaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZFRpbWVIb3VyID0gZW5kVGltZUhvdXJTdHJpbmc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ0NvbnNpc3RPZjJOdW1iZXJzKGVuZFRpbWVNaW4sIGZ1bmN0aW9uIChlcnJvciwgZW5kVGltZU1pblN0cmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRUaW1lTWluID0gZW5kVGltZU1pblN0cmluZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvclxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5kVGltZU1pbi50b1N0cmluZygpLmxlbmd0aCA9PT0gMiAmJiBlbmRUaW1lSG91ci50b1N0cmluZygpLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihuZXcgRGF0ZShkYXRlRnJvbVllYXIgKyBcIi1cIiArIGRhdGVGcm9tTW9udGggKyBcIi1cIiArIGRhdGVGcm9tRGF5ICsgXCIgXCIgKyBzdGFydFRpbWVIb3VyICsgXCI6XCIgKyBzdGFydFRpbWVNaW4pLmdldFRpbWUoKSA8PSBuZXcgRGF0ZShkYXRlVW50aWxZZWFyICsgXCItXCIgKyBkYXRlVW50aWxNb250aCArIFwiLVwiICsgZGF0ZVVudGlsRGF5ICsgXCIgXCIgKyBlbmRUaW1lSG91ciArIFwiOlwiICsgZW5kVGltZU1pbikuZ2V0VGltZSgpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGRhdGVVbnRpbFllYXIgKyBcIi1cIiArIGRhdGVVbnRpbE1vbnRoICsgXCItXCIgKyBkYXRlVW50aWxEYXkgKyBcIiBcIiArIGVuZFRpbWVIb3VyICsgXCI6XCIgKyBlbmRUaW1lTWluKS5nZXRUaW1lKCkgPiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0S2V5d29yZHNGcm9tRGVzY3JpcHRpb24oZGVzY3JpcHRpb24sIGZ1bmN0aW9uIChlcnJvciwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXJ0VGltZUhvdXIgKyBcIjpcIiArIHN0YXJ0VGltZU1pbik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBcIi9hcGkvYWN0aXZpdGllcy9hZGRhY3Rpdml0eVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAucG9zdCh1cmwsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlZXQ6IHN0cmVldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1iZXI6IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aXBjb2RlOiB6aXBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRlRnJvbTogZGF0ZUZyb21ZZWFyICsgXCItXCIgKyBkYXRlRnJvbU1vbnRoICsgXCItXCIgKyBkYXRlRnJvbURheSArIFwiIFwiICsgc3RhcnRUaW1lSG91ciArIFwiOlwiICsgc3RhcnRUaW1lTWluLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGVVbnRpbDogZGF0ZVVudGlsWWVhciArIFwiLVwiICsgZGF0ZVVudGlsTW9udGggKyBcIi1cIiArIGRhdGVVbnRpbERheSArIFwiIFwiICsgZW5kVGltZUhvdXIgKyBcIjpcIiArIGVuZFRpbWVNaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiB0aW1lc3RhbXBcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNldEZvcm0oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID1cIkVuZGRhdGUgY2FuJ3QgYmUgYmVmb3JlIHRvZGF5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gXCJFbmRkYXRlIGlucHV0IGlzIG5vdCBjb3JyZWN0XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkVuZHRpbWUgaW5wdXQgaXMgbm90IGNvcnJlY3RcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSAnRGUgc3RhcnRpbWUgbGVuZ3RoIGlzIG5vdCBjb3JyZWN0ISEhISAnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIlN0YXJ0dGltZSBpbnB1dCBpcyBub3QgY29ycmVjdFwiO1xuICAgICAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBcIkVSUk9SOiBBbGwgZmllbGRzIGFyZSByZXF1aXJlZC5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZ2V0RGV0YWlsQWN0aXZpdHkgPSBmdW5jdGlvbiAoY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIGRiU2VydmljZS5nZXREZXRhaWxzQWN0aXZpdHkoJ2FjdGl2aXRpZXMnLCAkcm91dGVQYXJhbXMuYWN0aXZpdHlOYW1lKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHkgPSByZXNwb25zZS5hY3Rpdml0eTtcbiAgICAgICAgICAgICAgICBpbml0bWFwKCk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXMpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS5tYXRjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm1hdGNoZXNbaV0gPT09IGN1cnJlbnRVc2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubmFtZUJ1dHRvbiA9IFwiTm90IGludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5pbnRlcmVzdGVkQWN0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5hcnJEZXRhaWxzQWN0aXZpdHk7XG5cblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmludGVyZXN0ZWQgPSBmdW5jdGlvbiAoYWN0aXZpdHlOYW1lLCBpbnRlcmVzdGVkVXNlciwgY3JlYXRlclVzZXIpIHtcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIlwiO1xuICAgICAgICAgICAgdmFyIGludGVyZXN0ZWRBY3QgPSAkc2NvcGUuaW50ZXJlc3RlZEFjdDtcbiAgICAgICAgICAgIGlmIChpbnRlcmVzdGVkQWN0ICE9PSBmYWxzZSkge1xuXG4gICAgICAgICAgICAgICAgdXJsID0gXCIvYXBpL2FjdGl2aXRpZXMvaW50ZXJlc3RlZFwiO1xuICAgICAgICAgICAgICAgICRodHRwLnBvc3QodXJsLCB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5TmFtZTogYWN0aXZpdHlOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcmVzdGVkVXNlcjogaW50ZXJlc3RlZFVzZXIsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZXJVc2VyOiBjcmVhdGVyVXNlclxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGludGVyZXN0ZWRVc2VyICsgXCIgaXMgZ2XDr250ZXJlc3NlZXJkIGluIFwiICsgYWN0aXZpdHlOYW1lICsgXCIgZG9vciBcIiArIGNyZWF0ZXJVc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmludGVyZXN0ZWRBY3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5hbWVCdXR0b24gPSBcIk5vdCBpbnRlcmVzdGVkXCI7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGludGVyZXN0ZWRBY3QpO1xuICAgICAgICAgICAgICAgIHVybCA9IFwiL2FwaS9hY3Rpdml0aWVzL2RlbGV0ZWludGVyZXN0ZWRcIjtcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KHVybCwge1xuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eU5hbWU6IGFjdGl2aXR5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJlc3RlZFVzZXI6IGludGVyZXN0ZWRVc2VyLFxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVyVXNlcjogY3JlYXRlclVzZXJcbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnRlcmVzdGVkVXNlciArIFwiIGlzIG5pZXQgbWVlciBnZcOvbnRlcmVzc2VlcmQgaW4gXCIgKyBhY3Rpdml0eU5hbWUgKyBcIiBkb29yIFwiICsgY3JlYXRlclVzZXIpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW50ZXJlc3RlZEFjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5uYW1lQnV0dG9uID0gXCJJbnRlcmVzdGVkXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZGF0YS5lcnJvcjtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiByZWNlbnRGaXJzdChhLCBiKSB7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPiBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAoYS50aW1lc3RhbXAgPCBiLnRpbWVzdGFtcClcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcG9wdWxhckZpcnN0KGFycikge1xuICAgICAgICAgICAgdmFyIG1heCA9IGFyclswXTtcbiAgICAgICAgICAgIHZhciBtYXhJbmRleCA9IDA7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXS5tYXRjaGVzLmxlbmd0aCA+IG1heC5tYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBtYXhJbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgICAgIG1heCA9IGFycltpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBtYXhJbmRleDtcbiAgICAgICAgfVxuXG4gICAgICAgICRzY29wZS5zaG93QWN0aXZpdGllc09uSG9tZVBhZ2UgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzKCk7XG4gICAgICAgICAgICAkc2NvcGUuZ2V0TW9zdFBvcHVsYXJBY3Rpdml0aWVzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmdldE1vc3RSZWNlbnRBY3Rpdml0aWVzID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyclRlbXAgPSByZXNwb25zZS5hY3Rpdml0aWVsaXN0O1xuICAgICAgICAgICAgICAgIHZhciBhcnJBbGxBY3Rpdml0aWVzID0gW107XG5cblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyVGVtcC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3IERhdGUoYXJyVGVtcFtpXS51bnRpbERhdGUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMucHVzaChhcnJUZW1wW2ldKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGFyckFsbEFjdGl2aXRpZXMuc29ydChyZWNlbnRGaXJzdCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBudW1iZXJPZkFjdGl2aXRpZXM7IGlpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMucHVzaChhcnJBbGxBY3Rpdml0aWVzW2lpXSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBbXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGlpaSA9IDA7IGlpaSA8IGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzLmxlbmd0aDsgaWlpKyspIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZHVtbXlBY3Rpdml0eSA9IG5ldyBBY3Rpdml0eShcIk5vIG5hbWVcIiwgODUwMCwgXCJUb2dldGhlclwiLCAyLCBcIm5vIGRlc2NyaXB0aW9uXCIsIFwiMjAxNi0wMS0wMSAwMDowMVwiLCBcIjIwMTctMTItMzEgMjM6NTlcIiwgbmV3IERhdGUoKSwgXCJubyB1c2VybmFtZVwiLCBtYXRjaGVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyck1vc3RSZWNlbnRBY3Rpdml0aWVzW2lpaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFJlY2VudEFjdGl2aXRpZXMuc3BsaWNlKGlpaSwgMSwgZHVtbXlBY3Rpdml0eSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RSZWNlbnRBY3Rpdml0aWVzID0gYXJyTW9zdFJlY2VudEFjdGl2aXRpZXM7XG5cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5nZXRNb3N0UG9wdWxhckFjdGl2aXRpZXMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbignYWN0aXZpdGllcycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgdmFyIG51bWJlck9mQWN0aXZpdGllcyA9IDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyclRlbXAgPSByZXNwb25zZS5hY3Rpdml0aWVsaXN0O1xuICAgICAgICAgICAgICAgIHZhciBhcnJBbGxBY3Rpdml0aWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGFyclRlbXAubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKG5ldyBEYXRlKGFyclRlbXBbaV0udW50aWxEYXRlKS5nZXRUaW1lKCkgPj0gbmV3IERhdGUoZGF0ZVRpbWVOb3cpLmdldFRpbWUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhuZXcgRGF0ZShhcnJUZW1wW2ldLnVudGlsRGF0ZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyQWxsQWN0aXZpdGllcy5wdXNoKGFyclRlbXBbaV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgZm9yKHZhciBqID0gMDsgaiA8IG51bWJlck9mQWN0aXZpdGllczsgaisrKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXhNb3N0UG9wID0gcG9wdWxhckZpcnN0KGFyckFsbEFjdGl2aXRpZXMpO1xuICAgICAgICAgICAgICAgICAgICBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMucHVzaChhcnJBbGxBY3Rpdml0aWVzW2luZGV4TW9zdFBvcF0pO1xuICAgICAgICAgICAgICAgICAgICBhcnJBbGxBY3Rpdml0aWVzLnNwbGljZShpbmRleE1vc3RQb3AsIDEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpaWkgPSAwOyBpaWkgPCBhcnJNb3N0UG9wdWxhckFjdGl2aXRpZXMubGVuZ3RoOyBpaWkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBkdW1teUFjdGl2aXR5ID0gbmV3IEFjdGl2aXR5KFwiTm8gbmFtZVwiLCA4NTAwLCBcIlRvZ2V0aGVyXCIsIDIsIFwibm8gZGVzY3JpcHRpb25cIiwgXCIyMDE2LTAxLTAxIDAwOjAxXCIsIFwiMjAxNy0xMi0zMSAyMzo1OVwiLCBuZXcgRGF0ZSgpLCBcIm5vIHVzZXJuYW1lXCIsIG1hdGNoZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzW2lpaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTW9zdFBvcHVsYXJBY3Rpdml0aWVzLnNwbGljZShpaWksIDEsIGR1bW15QWN0aXZpdHkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgJHNjb3BlLmFyck1vc3RQb3B1bGFyQWN0aXZpdGllcyA9IGFyck1vc3RQb3B1bGFyQWN0aXZpdGllcztcblxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5kZWxldGVBY3Rpdml0eSA9IGZ1bmN0aW9uKGFjdGl2aXR5SWQpe1xuICAgICAgICAgICAgZGJTZXJ2aWNlLmRlbGV0ZUFjdGl2aXR5KCdhY3Rpdml0aWVzJywgYWN0aXZpdHlJZCkudGhlbihmdW5jdGlvbihyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmluZm9kZWxldGVkQWN0aXZpdHkgPSByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdldEFjdGl2aXRpZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdG1hcCgpe1xuICAgICAgICAgICAgdmFyIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgICAgICAgICAgICAgem9vbTogOCxcbiAgICAgICAgICAgICAgICBjZW50ZXI6IHtsYXQ6IDUwLjgxOTQ4OTQsIGxuZzogMy4yNTc3MDc2fVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgZ2VvY29kZUFkZHJlc3MoZ2VvY29kZXIsIG1hcCk7XG5cbiAgICAgICAgfVxuXG5cbiAgICAgICAgZnVuY3Rpb24gZ2VvY29kZUFkZHJlc3MoZ2VvY29kZXIsIHJlc3VsdHNNYXApIHtcbiAgICAgICAgICAgIHZhciBzdHJlZXQgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5LnN0cmVldDtcbiAgICAgICAgICAgIHZhciBudW1iZXIgPSAkc2NvcGUuYXJyRGV0YWlsc0FjdGl2aXR5Lm51bWJlcjtcbiAgICAgICAgICAgIHZhciB6aXBjb2RlID0gJHNjb3BlLmFyckRldGFpbHNBY3Rpdml0eS56aXBjb2RlO1xuXG4gICAgICAgICAgICB2YXIgYWRkcmVzcyA9IHN0cmVldCArIFwiIFwiICsgbnVtYmVyICsgXCIsIFwiICsgemlwY29kZTsgLy9oaWVyIGFkZHJlc3MgdWl0IGRiIGluc3RvcHBlblxuXG4gICAgICAgICAgICBnZW9jb2Rlci5nZW9jb2RlKHsnYWRkcmVzcyc6IGFkZHJlc3N9LCBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcC5zZXRDZW50ZXIocmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbWFnZSA9IFwiLi4vLi4vaW1hZ2VzL21hcmtlci5wbmdcIjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcmtlciA9IG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiByZXN1bHRzTWFwLFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiBpbWFnZVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtYXJrZXIpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ0dlb2NvZGUgd2FzIG5vdCBzdWNjZXNzZnVsIGZvciB0aGUgZm9sbG93aW5nIHJlYXNvbjogJyArIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXNldEZvcm0oKSB7XG4gICAgICAgICAgICB2YXIgZnJtID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoJ0FjdGl2aXR5Rm9ybScpWzBdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2plIGtvbXQgaW4gZGUgcmVzZXRmb3JtJyk7XG4gICAgICAgICAgICBmcm0ucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiQWN0aXZpdGllc0NvbnRyb2xsZXJcIiwgW1wiJHNjb3BlXCIsIFwiZGJTZXJ2aWNlXCIsIFwiJGh0dHBcIiwgXCIkbG9jYXRpb25cIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJmaWxlVXBsb2FkXCIsIEFjdGl2aXRpZXNDb250cm9sbGVyXSk7XG5cblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgTmlraXRhIG9uIDcvMDEvMjAxNi5cbiAqL1xuKGZ1bmN0aW9uICgpIHtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIENoYXRDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHApIHtcblxuICAgICAgICBjb25zb2xlLmxvZygkcm9vdFNjb3BlLmN1cnJlbnRVc2VyLnVzZXJuYW1lKTtcbiAgICAgICAgY29uc29sZS5sb2coJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyLnVzZXJuYW1lKTtcbiAgICAgICAgLy8kc2NvcGUuY29udGFjdGVkVXNlci51c2VybmFtZSA9ICRyb290U2NvcGUuY29udGFjdGVkVXNlci51c2VybmFtZTtcblxuICAgICAgICAkc2NvcGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNoYXRTZXJ2aWNlLmVtaXQoXCJpbml0X3VzZXJzXCIse3VzZXI6JHJvb3RTY29wZS5jdXJyZW50VXNlciwgY29sbGVjdGlvbjpcInVzZXJzXCJ9KTtcbiAgICAgICAgfTtcblxuICAgIH07XG4gICAgYW5ndWxhci5tb2R1bGUoXCJhcHBcIikuY29udHJvbGxlcihcIkNoYXRDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJkYlNlcnZpY2VcIixcIiRodHRwXCIsIENoYXRDb250cm9sbGVyXSk7XG5cbn0pKCk7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGltYW4gb24gNS8xMi8xNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcblxuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIE1hdGNoZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCBkYlNlcnZpY2UpIHtcblxuICAgICAgICB2YXIgY2xpY2tzT25CdG4gPSAwO1xuXG4gICAgICAgICRzY29wZS5zaG93RGl2ID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICRzY29wZS5maWx0ZXIgPSB7c2hvd0ZpbHRlcjp0cnVlfTtcbiAgICAgICAgICAgIGNsaWNrc09uQnRuKys7XG5cbiAgICAgICAgICAgIGlmKGNsaWNrc09uQnRuID4gMSl7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOmZhbHNlfTtcbiAgICAgICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmhpZGVEaXYgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgY2xpY2tzT25CdG4gPSAwO1xuICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOmZhbHNlfTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc29ydFByb3BlcnR5ID0gXCJ0aXRsZVwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyUXVlcnkgPSBcIlwiO1xuICAgICAgICAkc2NvcGUuZmlsdGVyTWF0Y2hlcyA9IGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBlbHNlIGlmKGkudXNlcm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT0gaS5zZXgudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09IFwibm9maWx0ZXJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vaHR0cDovL3d3dy5mYWxzZXBvc2l0aXZlcy5jb20vaW5kZXgucGhwLzIwMDkvMTIvMDEvamF2YXNjcmlwdC1mdW5jdGlvbi10by1nZXQtdGhlLWludGVyc2VjdC1vZi0yLWFycmF5cy9cbiAgICAgICAgJHNjb3BlLmludGVyc2VjdCA9IGZ1bmN0aW9uKGFycjEsIGFycjIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciByID0gW10sIG8gPSB7fSwgbCA9IGFycjIubGVuZ3RoLCBpLCB2O1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIG9bYXJyMltpXV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbCA9IGFycjEubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHYgPSBhcnIxW2ldO1xuICAgICAgICAgICAgICAgIGlmICh2IGluIG8pIHtcbiAgICAgICAgICAgICAgICAgICAgci5wdXNoKHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnNob3dNYXRjaGVzID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lO1xuXG4gICAgICAgICAgICB1c2VybmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcm5hbWVcIik7XG5cbiAgICAgICAgICAgIGRiU2VydmljZS5nZXRDb2xsZWN0aW9uKCd1c2VycycpLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xuXG4gICAgICAgICAgICAgICAgdmFyIGFyclByb2ZpbGVzID0gcmVzcG9uc2UudXNlcmxpc3Q7XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGFyclByb2ZpbGVzLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0udXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpaSA9IDA7IGlpIDwgYXJyUHJvZmlsZXMubGVuZ3RoOyBpaSsrKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaWldLnVzZXJuYW1lID09PSBcImFkbWluXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyclByb2ZpbGVzLnNwbGljZShpaSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgIGRiU2VydmljZS5nZXRJdGVtKHVzZXJuYW1lKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXJyTWF0Y2hlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXIuaW50ZXJlc3RzKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGk9MCwgbD1hcnJQcm9maWxlcy5sZW5ndGg7IGk8bDsgaSsrKXtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNhbWVJbnRlcmVzdHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVJbnRlcmVzdHMgPSAkc2NvcGUuaW50ZXJzZWN0KHVzZXIuaW50ZXJlc3RzLCBhcnJQcm9maWxlc1tpXS5pbnRlcmVzdHMpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzYW1lSW50ZXJlc3RzLmxlbmd0aCAhPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYXJyUHJvZmlsZXNbaV0uZGVsZXRlZCA9PT0gZmFsc2Upe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJNYXRjaGVzLnB1c2goYXJyUHJvZmlsZXNbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYXJyTWF0Y2hlcyA9IGFyck1hdGNoZXM7XG5cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwiYXBwXCIpLmNvbnRyb2xsZXIoXCJNYXRjaGVzQ29udHJvbGxlclwiLCBbXCIkc2NvcGVcIiwgXCJkYlNlcnZpY2VcIiwgTWF0Y2hlc0NvbnRyb2xsZXJdKTtcblxufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgaW1hbiBvbiAyMC8xMi8xNS5cbiAqL1xuXG5cbihmdW5jdGlvbigpe1xuXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgUHJvZmlsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkcm9vdFNjb3BlLCAkcm91dGVQYXJhbXMsIGRiU2VydmljZSwgJGh0dHAsICRsb2NhdGlvbikge1xuXG4gICAgICAgIHZhciBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICRzY29wZS5zdGFydENoYXQgPSBmdW5jdGlvbihjdXJyZW50VXNlciwgY29udGFjdGVkVXNlcil7XG4gICAgICAgICAgICAkaHR0cC5wb3N0KFwiL2NoYXRcIiwge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyOiBjdXJyZW50VXNlcixcbiAgICAgICAgICAgICAgICBjb250YWN0ZWRVc2VyOmNvbnRhY3RlZFVzZXJcblxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGRhdGEuZXJyb3I7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jdXJyZW50VXNlciA9IGRhdGEuY3VycmVudFVzZXI7XG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5jb250YWN0ZWRVc2VyID0gZGF0YS5jb250YWN0ZWRVc2VyO1xuXG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjdXJyZW50dXNlcm5hbWVcIiwgJHJvb3RTY29wZS5jdXJyZW50VXNlci51c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJjb250YWN0ZWR1c2VybmFtZVwiLCAkcm9vdFNjb3BlLmNvbnRhY3RlZFVzZXIudXNlcm5hbWUpO1xuXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoZGF0YS5yZWRpcmVjdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG5cbiAgICAgICAgJHNjb3BlLnNob3dEaXYgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNjb3BlLmZpbHRlciA9IHtzaG93RmlsdGVyOnRydWV9O1xuICAgICAgICAgICAgY2xpY2tzT25CdG4rKztcblxuICAgICAgICAgICAgaWYoY2xpY2tzT25CdG4gPiAxKXtcbiAgICAgICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICAgICAgICAgIGNsaWNrc09uQnRuID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuaGlkZURpdiA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBjbGlja3NPbkJ0biA9IDA7XG4gICAgICAgICAgICAkc2NvcGUuZmlsdGVyID0ge3Nob3dGaWx0ZXI6ZmFsc2V9O1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zaG93UHJvZmlsZXMgPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgdmFyIHVzZXJuYW1lID0gXCJcIjtcbiAgICAgICAgICAgIGlmKCRyb290U2NvcGUudXNlci51c2VybmFtZSAhPT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICB1c2VybmFtZSA9ICRyb290U2NvcGUudXNlci51c2VybmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgdXNlcm5hbWUgPSBcIlwiO1xuICAgICAgICAgICAgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInVzZXJuYW1lXCIpO1xuXG4gICAgICAgICAgICBkYlNlcnZpY2UuZ2V0Q29sbGVjdGlvbigndXNlcnMnKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgICAgICAgICAgICAgIHZhciBhcnJQcm9maWxlcyA9IHJlc3BvbnNlLnVzZXJsaXN0O1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnJQcm9maWxlcy5sZW5ndGg7IGkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2ldLnVzZXJuYW1lID09PSB1c2VybmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJyUHJvZmlsZXMuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcih2YXIgaWkgPSAwOyBpaSA8IGFyclByb2ZpbGVzLmxlbmd0aDsgaWkrKyl7XG4gICAgICAgICAgICAgICAgICAgIGlmKGFyclByb2ZpbGVzW2lpXS51c2VybmFtZSA9PT0gXCJhZG1pblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJQcm9maWxlcy5zcGxpY2UoaWksIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRzY29wZS5hcnJQcm9maWxlcyA9IGFyclByb2ZpbGVzO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zb3J0UHJvcGVydHkgPSBcInRpdGxlXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJRdWVyeSA9IFwiXCI7XG4gICAgICAgICRzY29wZS5maWx0ZXJQcm9maWxlcyA9IGZ1bmN0aW9uKGkpe1xuICAgICAgICAgICAgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5ID09PSBcIlwiKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICBlbHNlIGlmKGkudXNlcm5hbWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKCRzY29wZS5maWx0ZXJRdWVyeS50b0xvY2FsZUxvd2VyQ2FzZSgpKSA+PSAwKXtcbiAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgZWxzZSBpZihpLnNleCA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT0gaS5zZXgudG9Mb3dlckNhc2UoKSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2UgaWYoJHNjb3BlLmZpbHRlclF1ZXJ5LnRvTG93ZXJDYXNlKCkgPT09IFwibm9maWx0ZXJcIil7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlclF1ZXJ5ID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZShcImFwcFwiKS5jb250cm9sbGVyKFwiUHJvZmlsZXNDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRyb290U2NvcGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJkYlNlcnZpY2VcIixcIiRodHRwXCIsIFwiJGxvY2F0aW9uXCIsIFByb2ZpbGVzQ29udHJvbGxlcl0pO1xuXG59KSgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
